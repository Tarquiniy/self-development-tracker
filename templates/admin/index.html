{% extends "admin/base_site.html" %}
{% load i18n static %}
{% block title %}Панель управления — {{ site_title|default:_('Admin') }}{% endblock %}

{% block content %}
<div class="dashboard-grid">
    <section class="dashboard-cards">
        <div class="card card-stats">
            <div class="card-body">
                <div class="stat-title">Посты</div>
                <div class="stat-value">{{ posts_count }}</div>
                <div class="stat-sub">Опубликовано: {{ published_count }} · Черновиков: {{ drafts_count }}</div>
            </div>
        </div>

        <div class="card card-stats">
            <div class="card-body">
                <div class="stat-title">Медиа</div>
                <div class="stat-value">{{ media_count }}</div>
                <div class="stat-sub">Медиабиблиотека</div>
            </div>
        </div>

        <div class="card card-stats">
            <div class="card-body">
                <div class="stat-title">Комментарии</div>
                <div class="stat-value">{{ comments_count }}</div>
                <div class="stat-sub">Новые / Модерация</div>
            </div>
        </div>
    </section>

    <aside class="dashboard-side">
        <div class="card">
            <div class="card-header">Быстрые ссылки</div>
            <div class="card-body">
                <ul class="quick-links">
                    <li><a href="{% url 'admin:blog_post_add' %}">Создать пост</a></li>
                    <li><a href="{% url 'admin:blog_media-library' %}">Открыть медиабиблиотеку</a></li>
                    <li><a href="{% url 'admin:blog_post_changelist' %}">Список постов</a></li>
                </ul>
            </div>
        </div>

        <div class="card">
            <div class="card-header">Недавние посты</div>
            <div class="card-body recent-list">
                <ul>
                    {% for app in app_list %}
                        {% if app.name == "Blog" or app.name|lower == "blog" %}
                            {% for m in app.models %}
                                {% comment %} we don't have actual posts here in template context by default; admin_dashboard_view can be extended to pass recent posts if desired {% endcomment %}
                            {% endfor %}
                        {% endif %}
                    {% endfor %}
                    <li class="muted">Нет данных — расширьте admin_dashboard_view для подробного списка.</li>
                </ul>
            </div>
        </div>
    </aside>
</div>
{% endblock %}
