{% extends "admin/change_form.html" %}
{% load static i18n %}

{% block extrahead %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'admin/css/admin-post-form.css' %}">
  {# CKEditor4 CDN (standard-all) для полного набора базовых плагинов #}
  <script src="https://cdn.ckeditor.com/4.21.0/standard-all/ckeditor.js"></script>
  {# Наш локальный инициализатор, который гарантирует правильную последовательность загрузки #}
  <script src="{% static 'admin/js/ckeditor_admin_extra.js' %}"></script>

  <style>
    .ck-editor__editable_inline { min-height:260px; background:#fff; color:#0f1724; border-radius:6px; padding:12px; border:1px solid #e6eef3; }
    .action-extra { margin-left:8px; }
    /* Если хотите — можете переопределить кнопки панели через CSS здесь */
  </style>
{% endblock %}

{% block submit_buttons_top %}
  {{ block.super }}
  <a href="{% url 'admin-media-library' %}" class="button action-extra" onclick="return openMediaLibrary(event)" title="{% trans 'Открыть медиабиблиотеку' %}">{% trans "Медиатека" %}</a>
  <button type="button" class="button action-extra" id="preview-btn-top">{% trans "Предпросмотр" %}</button>
{% endblock %}

{% block content %}
  {{ block.super }}
{% endblock %}
