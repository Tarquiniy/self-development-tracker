/*! For license information please see ckeditor.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClassicEditor=e():t.ClassicEditor=e()}(this,()=>(()=>{var t={6:(t,e,s)=>{t.exports=s.p+"bfe322b548387b9228eeec6bddbaaaf8.svg"},36:(t,e,s)=>{t.exports=s.p+"0ec58186b468e04c97e023c8b677fb87.svg"},68:(t,e,s)=>{t.exports=s.p+"3500924b6537062cb168c61698a26279.svg"},197:(t,e,s)=>{t.exports=s.p+"0d12105d5c8a29981e1a9146afeccd2a.svg"},298:(t,e,s)=>{t.exports=s.p+"3c37adf51fcad770221496909cf534b0.svg"},313:(t,e,s)=>{t.exports=s.p+"a24bf2c5d52ae3c8f803835aac471b4d.svg"},713:(t,e,s)=>{t.exports=s.p+"723a1da6e853491c5e934d62d906ba4d.svg"},732:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},932:(t,e,s)=>{t.exports=s.p+"ff07b28268d7f3295a32e5350962c5eb.svg"},957:(t,e,s)=>{t.exports=s.p+"6d30ea04247a4f8707b8a749702be678.svg"},967:(t,e,s)=>{t.exports=s.p+"3c37adf51fcad770221496909cf534b0.svg"},983:(t,e,s)=>{t.exports=s.p+"f533503b6d55854762c48caf6d332d12.svg"},988:(t,e,s)=>{t.exports=s.p+"0a23e67787f0868298e63d3ba409cc0c.svg"},999:(t,e,s)=>{t.exports=s.p+"e9e37a053ccd8636bfb91e3e4ea61e76.svg"},1092:(t,e,s)=>{t.exports=s.p+"20866567b4d9b6e52174482a594447ec.svg"},1105:(t,e,s)=>{t.exports=s.p+"9c8f7a82fc68e48dc7857f2ec9b6d668.svg"},1181:(t,e,s)=>{t.exports=s.p+"00a81bf3a395b96b0221d938618d1f37.svg"},1270:(t,e,s)=>{t.exports=s.p+"fba1be7973564a93f90cb924afa94cb5.svg"},1322:(t,e,s)=>{t.exports=s.p+"f4db1884915a5fd9e64e6f97e5512edd.svg"},1323:(t,e,s)=>{t.exports=s.p+"62d853c0ce190fe73a5a80b33e9aa48c.svg"},1383:(t,e,s)=>{t.exports=s.p+"7cb0bca81cd475244c9a7722cc9e5f0c.svg"},1732:(t,e,s)=>{t.exports=s.p+"32e1b1479230ae3db9249b3f2936f955.svg"},1778:(t,e,s)=>{t.exports=s.p+"add1fc6132737142e5112940e8ea35f9.svg"},1782:(t,e,s)=>{t.exports=s.p+"f533503b6d55854762c48caf6d332d12.svg"},1989:(t,e,s)=>{t.exports=s.p+"fc6c62fb7fcb26fa25593143bc589168.svg"},1990:(t,e,s)=>{t.exports=s.p+"7887528896df2068ea2dd82f32ccdb74.svg"},2047:(t,e,s)=>{t.exports=s.p+"83541bc041d374379de5834f37c95b54.svg"},2064:(t,e,s)=>{t.exports=s.p+"765b10638ac9909819ac057cd045e428.svg"},2209:(t,e,s)=>{t.exports=s.p+"8a2cd0c627efbc9f65109cb530516e7e.svg"},2386:(t,e,s)=>{t.exports=s.p+"3c811567e231a8348fea6482d72c2b24.svg"},2396:(t,e,s)=>{t.exports=s.p+"eab852f51cf368ec68618e4db4cd6acc.svg"},2483:(t,e,s)=>{t.exports=s.p+"bcd277cc114e0bc07e82233340fe28cd.svg"},2522:(t,e,s)=>{t.exports=s.p+"c973dd2fc562de82322d9f209b64b66d.svg"},2697:(t,e,s)=>{t.exports=s.p+"3beba950f3444a30c54ce79669d32e36.svg"},2698:(t,e,s)=>{t.exports=s.p+"8a2cd0c627efbc9f65109cb530516e7e.svg"},2738:(t,e,s)=>{t.exports=s.p+"dba60e722ef1baa7aef39060c4ef837d.svg"},2774:(t,e,s)=>{t.exports=s.p+"181d8d90b802f9078d80b9acb7bd5a54.svg"},2788:(t,e,s)=>{t.exports=s.p+"5f91b198209326ae387397d458732250.svg"},3225:(t,e,s)=>{t.exports=s.p+"b51e32d3d9ebf9c5802e4c9269311b5e.svg"},3232:(t,e,s)=>{t.exports=s.p+"413e6ee5e32cdc1893eb716d0e188305.svg"},3341:(t,e,s)=>{t.exports=s.p+"3d69630c4e534f39ce9a7112f72b56e1.svg"},3357:(t,e,s)=>{t.exports=s.p+"fabb2355396e0b43d1b0302bb3a9db62.svg"},3460:(t,e,s)=>{t.exports=s.p+"f349cdf1451f633bb57a397a492fe4ba.svg"},3532:(t,e,s)=>{t.exports=s.p+"bf1f2190e8ee298eb93635dbcf8943db.svg"},3620:(t,e,s)=>{t.exports=s.p+"cbb8ab590b1dd89fd562a28f6364ee35.svg"},3709:(t,e,s)=>{t.exports=s.p+"38d0278a111edbfe0ebcaa812b2e2312.svg"},3713:(t,e,s)=>{t.exports=s.p+"0ea9c74d84edfa95a9455ec4698d2cff.svg"},3761:(t,e,s)=>{t.exports=s.p+"3620dca68ca0f5a1c83df9051797b88c.svg"},3785:(t,e,s)=>{t.exports=s.p+"82dc1953f801dcba8f23e56d66e57ec8.svg"},3930:(t,e,s)=>{t.exports=s.p+"695366001e490f7c19a1fd090bc73b42.svg"},3945:(t,e,s)=>{t.exports=s.p+"f43510520806f6a188c344606b0b6c9a.svg"},4074:(t,e,s)=>{t.exports=s.p+"9cb3623fcedc1e051b28445095b44127.svg"},4103:(t,e,s)=>{t.exports=s.p+"14754ab74db2f29f8c09083c47c10eab.svg"},4294:(t,e,s)=>{t.exports=s.p+"00a81bf3a395b96b0221d938618d1f37.svg"},4296:(t,e,s)=>{t.exports=s.p+"a7256d34889f13c498f5db742fc2251f.svg"},4307:(t,e,s)=>{t.exports=s.p+"181d8d90b802f9078d80b9acb7bd5a54.svg"},4341:(t,e,s)=>{t.exports=s.p+"82efa97f9f07722d56aaeb899c7a6eb1.svg"},4352:(t,e,s)=>{t.exports=s.p+"e1ad41ee055f599709bc5c89a3c3a9a0.svg"},4397:(t,e,s)=>{t.exports=s.p+"b8e5366ac990b117502fc40031769dce.svg"},4497:(t,e,s)=>{t.exports=s.p+"9d66441ac6ff2f4e743ab205632d389b.svg"},4769:(t,e,s)=>{t.exports=s.p+"413e6ee5e32cdc1893eb716d0e188305.svg"},4903:(t,e,s)=>{t.exports=s.p+"af0d86fb60193503fbe83b668ed3d85d.svg"},5172:(t,e,s)=>{t.exports=s.p+"f533503b6d55854762c48caf6d332d12.svg"},5206:(t,e,s)=>{t.exports=s.p+"acc1602d43edb06b3aff10c734ec3f9f.svg"},5285:(t,e,s)=>{t.exports=s.p+"11985ad04eb9874bff99ccb70e3a12ee.svg"},5415:(t,e,s)=>{t.exports=s.p+"3d69630c4e534f39ce9a7112f72b56e1.svg"},5460:(t,e,s)=>{t.exports=s.p+"9a9c4f70ac7877832c45e2aaba14b2fb.svg"},5574:(t,e,s)=>{t.exports=s.p+"b5bba9597102688c22e22164036d36c6.svg"},5718:(t,e,s)=>{t.exports=s.p+"695366001e490f7c19a1fd090bc73b42.svg"},5914:(t,e,s)=>{t.exports=s.p+"32778c6fb69706c5266ed8be166437aa.svg"},5950:(t,e,s)=>{t.exports=s.p+"c05bf70b3d01cb275dea8cb7a5a0e3cf.svg"},6140:(t,e,s)=>{t.exports=s.p+"82efa97f9f07722d56aaeb899c7a6eb1.svg"},6570:(t,e,s)=>{t.exports=s.p+"6419c5e5e46f00d517775303b69cc47f.svg"},6696:(t,e,s)=>{t.exports=s.p+"0f12f5c32eb218615980ea0506a9b5fd.svg"},6713:(t,e,s)=>{t.exports=s.p+"779e618369ed3501bb913bd439002613.svg"},6984:(t,e,s)=>{t.exports=s.p+"62d853c0ce190fe73a5a80b33e9aa48c.svg"},7048:(t,e,s)=>{t.exports=s.p+"be6379baf9c075ac1f44b952e4b6095a.svg"},7133:(t,e,s)=>{t.exports=s.p+"765b10638ac9909819ac057cd045e428.svg"},7142:(t,e,s)=>{t.exports=s.p+"20bb2b21facc1e63df61b4350d6941b4.svg"},7170:(t,e,s)=>{t.exports=s.p+"779e618369ed3501bb913bd439002613.svg"},7287:(t,e,s)=>{t.exports=s.p+"1e2ae333364b4267a4119898d685b7f9.svg"},7357:(t,e,s)=>{t.exports=s.p+"483997ea95655724cfaf8d91c886c1e0.svg"},7603:(t,e,s)=>{t.exports=s.p+"9a9c4f70ac7877832c45e2aaba14b2fb.svg"},7618:(t,e,s)=>{t.exports=s.p+"2733fcfca7ff8b0abe8c4a1dc7458b11.svg"},7684:(t,e,s)=>{t.exports=s.p+"f5af499d1948b0aea8c5e4b7854ca7a4.svg"},7696:(t,e,s)=>{t.exports=s.p+"7ed1eb2cce720f9c672c8a17b81b69ac.svg"},7704:(t,e,s)=>{t.exports=s.p+"935a7e8a484eed6a7fcce0889253ba5d.svg"},7759:(t,e,s)=>{t.exports=s.p+"dba60e722ef1baa7aef39060c4ef837d.svg"},7790:(t,e,s)=>{t.exports=s.p+"83541bc041d374379de5834f37c95b54.svg"},7965:(t,e,s)=>{t.exports=s.p+"b5ce84e955228e23652942a924f8030b.svg"},7997:(t,e,s)=>{t.exports=s.p+"0ec58186b468e04c97e023c8b677fb87.svg"},8009:(t,e,s)=>{t.exports=s.p+"9cb3623fcedc1e051b28445095b44127.svg"},8204:(t,e,s)=>{t.exports=s.p+"82dc1953f801dcba8f23e56d66e57ec8.svg"},8252:(t,e,s)=>{t.exports=s.p+"988c64c613523f717c7f801746851f9c.svg"},8405:(t,e,s)=>{t.exports=s.p+"64081864bf2f1b5de5522b37d1042890.svg"},8408:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},8511:(t,e,s)=>{t.exports=s.p+"be32acfa0a21d8ecb8130c714555db3a.svg"},8674:(t,e,s)=>{t.exports=s.p+"3614f0c14fc758d1efdf45e08673cee5.svg"},8719:(t,e,s)=>{t.exports=s.p+"124b0c043b220394374bde56e928a6c4.svg"},8811:(t,e,s)=>{t.exports=s.p+"228e0f67c844bb97fe62397a132559ec.svg"},8812:(t,e,s)=>{t.exports=s.p+"3d69630c4e534f39ce9a7112f72b56e1.svg"},8873:(t,e,s)=>{t.exports=s.p+"3d97f8ab5b551dcf98e33aab0ea5c62a.svg"},8917:(t,e,s)=>{t.exports=s.p+"f4db1884915a5fd9e64e6f97e5512edd.svg"},9017:(t,e,s)=>{t.exports=s.p+"6d04e28c4db7b38d35572952de7377df.svg"},9065:(t,e,s)=>{t.exports=s.p+"8e61cdafaae63b1db1aa1d368ace35a4.svg"},9153:(t,e,s)=>{t.exports=s.p+"fd5fa576af4702d7de32fb4d1a2f6492.svg"},9241:(t,e,s)=>{t.exports=s.p+"3614f0c14fc758d1efdf45e08673cee5.svg"},9303:(t,e,s)=>{t.exports=s.p+"d45db0540e551bcc3cdced7950fd5ab8.svg"},9354:(t,e,s)=>{t.exports=s.p+"9d66441ac6ff2f4e743ab205632d389b.svg"},9553:(t,e,s)=>{t.exports=s.p+"3f621c9d8a9541f76de1ee27c5dd15d0.svg"},9593:(t,e,s)=>{t.exports=s.p+"cbc53e0d41800a1fbedcbcade0ded4f5.svg"},9760:(t,e,s)=>{t.exports=s.p+"65777fb6dd6dd1fb398b13ec77760d32.svg"},9984:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},10057:(t,e,s)=>{t.exports=s.p+"f3868759e52317a22b92e94fe9f958d4.svg"},10465:(t,e,s)=>{t.exports=s.p+"d6930770569af8d92d0a97489733af9c.svg"},10475:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},10636:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},10751:(t,e,s)=>{t.exports=s.p+"eafc66f7d2f9ca66ca22310b8ce04e52.svg"},10771:(t,e,s)=>{t.exports=s.p+"fc6c62fb7fcb26fa25593143bc589168.svg"},10780:(t,e,s)=>{t.exports=s.p+"82dc1953f801dcba8f23e56d66e57ec8.svg"},10813:(t,e,s)=>{t.exports=s.p+"3d97f8ab5b551dcf98e33aab0ea5c62a.svg"},11e3:(t,e,s)=>{t.exports=s.p+"0ec58186b468e04c97e023c8b677fb87.svg"},11004:(t,e,s)=>{t.exports=s.p+"805e94151c542b41c2016bc28fa2fa51.svg"},11109:(t,e,s)=>{t.exports=s.p+"ac5ef846ba101f007c74489d6e6007a6.svg"},11129:(t,e,s)=>{t.exports=s.p+"9cb3623fcedc1e051b28445095b44127.svg"},11163:(t,e,s)=>{t.exports=s.p+"b1097bb584d93251a588309a62f37f94.svg"},11262:(t,e,s)=>{t.exports=s.p+"82efa97f9f07722d56aaeb899c7a6eb1.svg"},11366:(t,e,s)=>{t.exports=s.p+"3c452607c0fb6d522e0ec001e381bd45.svg"},11486:(t,e,s)=>{t.exports=s.p+"76ba1601c94033f5134bb1c68b0f278e.svg"},11592:(t,e,s)=>{t.exports=s.p+"2c868fb620f5d0473234467d0c549d0e.svg"},11645:(t,e,s)=>{t.exports=s.p+"bf1f2190e8ee298eb93635dbcf8943db.svg"},11694:(t,e,s)=>{t.exports=s.p+"f616ce9c0580da73288f7d724b89dcf1.svg"},11910:(t,e,s)=>{t.exports=s.p+"f22438ceb0ebc99552c513be707a9f9a.svg"},12035:(t,e,s)=>{t.exports=s.p+"5f91b198209326ae387397d458732250.svg"},12109:(t,e,s)=>{t.exports=s.p+"20866567b4d9b6e52174482a594447ec.svg"},12182:(t,e,s)=>{t.exports=s.p+"f22438ceb0ebc99552c513be707a9f9a.svg"},12215:(t,e,s)=>{t.exports=s.p+"bb8026c540de1b67da8b1d8af397970e.svg"},12677:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},12711:(t,e,s)=>{t.exports=s.p+"765b67f85b5e2cb4356d476ee83cfa69.svg"},12730:(t,e,s)=>{t.exports=s.p+"228e0f67c844bb97fe62397a132559ec.svg"},12928:(t,e,s)=>{t.exports=s.p+"81054cfcbb2635f8945eb1c6c32511e6.svg"},12977:(t,e,s)=>{t.exports=s.p+"8014bf8997df11bd496560b42566fcc4.svg"},13052:(t,e,s)=>{t.exports=s.p+"8014bf8997df11bd496560b42566fcc4.svg"},13080:(t,e,s)=>{t.exports=s.p+"38d0278a111edbfe0ebcaa812b2e2312.svg"},13115:(t,e,s)=>{t.exports=s.p+"9b6103302ac19fb935df8c0986744130.svg"},13190:(t,e,s)=>{t.exports=s.p+"fba1be7973564a93f90cb924afa94cb5.svg"},13326:(t,e,s)=>{t.exports=s.p+"483997ea95655724cfaf8d91c886c1e0.svg"},13356:(t,e,s)=>{t.exports=s.p+"b50e0d94ab5ba756343e1fce3306a49f.svg"},13411:(t,e,s)=>{t.exports=s.p+"0ec58186b468e04c97e023c8b677fb87.svg"},13452:(t,e,s)=>{t.exports=s.p+"65777fb6dd6dd1fb398b13ec77760d32.svg"},13640:(t,e,s)=>{t.exports=s.p+"e9e37a053ccd8636bfb91e3e4ea61e76.svg"},13709:(t,e,s)=>{t.exports=s.p+"099051dd1ecbd4f0c59a1b423aaad366.svg"},13906:(t,e,s)=>{t.exports=s.p+"8b45a5514f18c83d6630345fd393d8b1.svg"},13961:(t,e,s)=>{t.exports=s.p+"64081864bf2f1b5de5522b37d1042890.svg"},14069:(t,e,s)=>{t.exports=s.p+"9c8f7a82fc68e48dc7857f2ec9b6d668.svg"},14277:(t,e,s)=>{t.exports=s.p+"c44e49a555a9e3af6bcd15a8f3cce28a.svg"},14421:(t,e,s)=>{t.exports=s.p+"bfb37e1fa93d147b3fe8a010d629acc5.svg"},14533:(t,e,s)=>{t.exports=s.p+"0ea9c74d84edfa95a9455ec4698d2cff.svg"},14584:(t,e,s)=>{t.exports=s.p+"b5664b6b8e315d913a5304129b91ed31.svg"},14617:(t,e,s)=>{t.exports=s.p+"081190435748ba2e099251464fea3a83.svg"},14947:(t,e,s)=>{t.exports=s.p+"4b4efc732d74209df1021ddda31f4458.svg"},15006:(t,e,s)=>{t.exports=s.p+"3c811567e231a8348fea6482d72c2b24.svg"},15079:(t,e,s)=>{t.exports=s.p+"b20f6a4c3f541162244bc0e771980146.svg"},15098:(t,e,s)=>{t.exports=s.p+"f688976d467e4b4b1c2168b40c04db20.svg"},15128:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},15226:(t,e,s)=>{t.exports=s.p+"f31168d92e501461b246cfcecfe42f66.svg"},15285:(t,e,s)=>{t.exports=s.p+"f22438ceb0ebc99552c513be707a9f9a.svg"},15343:(t,e,s)=>{t.exports=s.p+"7ed1eb2cce720f9c672c8a17b81b69ac.svg"},15430:(t,e,s)=>{t.exports=s.p+"c44e49a555a9e3af6bcd15a8f3cce28a.svg"},15463:(t,e,s)=>{t.exports=s.p+"c05bf70b3d01cb275dea8cb7a5a0e3cf.svg"},15487:(t,e,s)=>{t.exports=s.p+"a66d33262a011c68db85d8782a31d3ea.svg"},15542:(t,e,s)=>{t.exports=s.p+"fc45ed981f7d88ac99801ceb720eba2d.svg"},15642:(t,e,s)=>{t.exports=s.p+"fc45ed981f7d88ac99801ceb720eba2d.svg"},15717:(t,e,s)=>{t.exports=s.p+"ff07b28268d7f3295a32e5350962c5eb.svg"},15888:(t,e,s)=>{t.exports=s.p+"886d9e209714849aa30cbc411eab526f.svg"},16133:(t,e,s)=>{t.exports=s.p+"d6930770569af8d92d0a97489733af9c.svg"},16265:(t,e,s)=>{t.exports=s.p+"7f314022ae8747b1cc2ab0f2f59d440e.svg"},16279:(t,e,s)=>{t.exports=s.p+"f349cdf1451f633bb57a397a492fe4ba.svg"},16366:(t,e,s)=>{t.exports=s.p+"4e59bbb22c26db6b2feef961f0967f3b.svg"},16452:(t,e,s)=>{t.exports=s.p+"3c452607c0fb6d522e0ec001e381bd45.svg"},16545:(t,e,s)=>{t.exports=s.p+"76ba1601c94033f5134bb1c68b0f278e.svg"},16627:(t,e,s)=>{t.exports=s.p+"5f91b198209326ae387397d458732250.svg"},16720:(t,e,s)=>{t.exports=s.p+"2f7024f5a3319a3368dcc409d6ea2dd1.svg"},16759:(t,e,s)=>{t.exports=s.p+"8bfb2e3199ece8886369c9e260c35b2c.svg"},16887:(t,e,s)=>{t.exports=s.p+"228e0f67c844bb97fe62397a132559ec.svg"},16949:(t,e,s)=>{t.exports=s.p+"f688976d467e4b4b1c2168b40c04db20.svg"},16986:(t,e,s)=>{t.exports=s.p+"00a81bf3a395b96b0221d938618d1f37.svg"},17151:(t,e,s)=>{t.exports=s.p+"886d9e209714849aa30cbc411eab526f.svg"},17206:(t,e,s)=>{t.exports=s.p+"c44e49a555a9e3af6bcd15a8f3cce28a.svg"},17386:(t,e,s)=>{t.exports=s.p+"7808190d6204688fac398c4b7e255eb9.svg"},17447:(t,e,s)=>{t.exports=s.p+"0a6d102e37fabfb19e96313cc1bbb557.svg"},17476:(t,e,s)=>{t.exports=s.p+"0ea9c74d84edfa95a9455ec4698d2cff.svg"},17592:(t,e,s)=>{t.exports=s.p+"6b5f85b1f696f5dd7d91673eceecc72d.svg"},17769:(t,e,s)=>{t.exports=s.p+"0031bbc6dd0ca430646334328dd1bc55.svg"},17773:(t,e,s)=>{t.exports=s.p+"b5ce84e955228e23652942a924f8030b.svg"},17873:(t,e,s)=>{t.exports=s.p+"bdaca97bc1237905bd927eb2443fa786.svg"},18064:(t,e,s)=>{t.exports=s.p+"8a15776a8ba966420212dc412413db47.svg"},18091:(t,e,s)=>{t.exports=s.p+"a23cc9ff086d200327b698d55be58561.svg"},18249:(t,e,s)=>{t.exports=s.p+"bfe322b548387b9228eeec6bddbaaaf8.svg"},18254:(t,e,s)=>{t.exports=s.p+"01f6944956af76d738dd0459ee098a62.svg"},18301:(t,e,s)=>{t.exports=s.p+"20866567b4d9b6e52174482a594447ec.svg"},18364:(t,e,s)=>{t.exports=s.p+"9b71440b570e4090933f3e527cab52ad.svg"},18379:(t,e,s)=>{t.exports=s.p+"f533503b6d55854762c48caf6d332d12.svg"},18386:(t,e,s)=>{t.exports=s.p+"eafc66f7d2f9ca66ca22310b8ce04e52.svg"},18440:(t,e,s)=>{t.exports=s.p+"5c32b1b7cc0281db2275dcc108654df9.svg"},18479:(t,e,s)=>{t.exports=s.p+"5098ecb91e9ae262de5bd7fc0381bee3.svg"},18500:(t,e,s)=>{t.exports=s.p+"9d66441ac6ff2f4e743ab205632d389b.svg"},18547:(t,e,s)=>{t.exports=s.p+"d5ace44cfdd614df0fe9c44d71d1851e.svg"},18909:(t,e,s)=>{t.exports=s.p+"cca8c93cc08fa7c3aeda9a84d74da963.svg"},18925:(t,e,s)=>{t.exports=s.p+"7f314022ae8747b1cc2ab0f2f59d440e.svg"},18945:(t,e,s)=>{t.exports=s.p+"9d66441ac6ff2f4e743ab205632d389b.svg"},19281:(t,e,s)=>{t.exports=s.p+"543068612a589aa24cbcf5efd5624bdf.svg"},19354:(t,e,s)=>{t.exports=s.p+"081e447ec32b255dc09462a93675f812.svg"},19491:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},19576:(t,e,s)=>{t.exports=s.p+"a66d33262a011c68db85d8782a31d3ea.svg"},19591:(t,e,s)=>{t.exports=s.p+"805e94151c542b41c2016bc28fa2fa51.svg"},19611:(t,e,s)=>{t.exports=s.p+"0ffc463363693481b93ccfcc01e6c6e8.svg"},19705:(t,e,s)=>{t.exports=s.p+"483997ea95655724cfaf8d91c886c1e0.svg"},19969:(t,e,s)=>{t.exports=s.p+"3f621c9d8a9541f76de1ee27c5dd15d0.svg"},20025:(t,e,s)=>{t.exports=s.p+"82efa97f9f07722d56aaeb899c7a6eb1.svg"},20199:(t,e,s)=>{t.exports=s.p+"7f21f0a2b56e3f5923aa3f8d3231369e.svg"},20242:(t,e,s)=>{t.exports=s.p+"c05bf70b3d01cb275dea8cb7a5a0e3cf.svg"},20380:(t,e,s)=>{t.exports=s.p+"1fbfac4e843ff82078d1c9a3d5f4a995.svg"},20461:(t,e,s)=>{t.exports=s.p+"bdaca97bc1237905bd927eb2443fa786.svg"},20466:(t,e,s)=>{t.exports=s.p+"bfb37e1fa93d147b3fe8a010d629acc5.svg"},20510:(t,e,s)=>{t.exports=s.p+"3eae80596d08454b0b785b73c8649df3.svg"},20551:(t,e,s)=>{t.exports=s.p+"a23cc9ff086d200327b698d55be58561.svg"},20737:(t,e,s)=>{t.exports=s.p+"f616ce9c0580da73288f7d724b89dcf1.svg"},20799:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},20802:(t,e,s)=>{t.exports=s.p+"b51e32d3d9ebf9c5802e4c9269311b5e.svg"},21068:(t,e,s)=>{t.exports=s.p+"0f025043e8ada6cd8b7847ff43216d0c.svg"},21145:(t,e,s)=>{t.exports=s.p+"7887528896df2068ea2dd82f32ccdb74.svg"},21200:(t,e,s)=>{t.exports=s.p+"8dbb63ae660e7bacee3c39a7449a7531.svg"},21351:(t,e,s)=>{t.exports=s.p+"5e6e1c860d4f637c5276fe8687b3eb84.svg"},21533:(t,e,s)=>{t.exports=s.p+"e6981d71381805f72210cdd12ad8386b.svg"},21612:(t,e,s)=>{t.exports=s.p+"b1097bb584d93251a588309a62f37f94.svg"},21871:(t,e,s)=>{t.exports=s.p+"5b76bbb089dafb5e2a017a64c3737e9e.svg"},21883:(t,e,s)=>{t.exports=s.p+"e1ad41ee055f599709bc5c89a3c3a9a0.svg"},21897:(t,e,s)=>{t.exports=s.p+"97cc207f3c410cbd82af7e727a33fd32.svg"},21995:(t,e,s)=>{t.exports=s.p+"20bb2b21facc1e63df61b4350d6941b4.svg"},22037:(t,e,s)=>{t.exports=s.p+"c05bf70b3d01cb275dea8cb7a5a0e3cf.svg"},22260:(t,e,s)=>{t.exports=s.p+"b5bba9597102688c22e22164036d36c6.svg"},22294:(t,e,s)=>{t.exports=s.p+"f6174af4f7ee7512a22d9edbb94115ce.svg"},22502:(t,e,s)=>{t.exports=s.p+"af0d86fb60193503fbe83b668ed3d85d.svg"},22550:(t,e,s)=>{t.exports=s.p+"3f9622897d2957cf3185b63b642b5c64.svg"},22622:(t,e,s)=>{t.exports=s.p+"0a6d102e37fabfb19e96313cc1bbb557.svg"},22736:(t,e,s)=>{t.exports=s.p+"81054cfcbb2635f8945eb1c6c32511e6.svg"},22843:(t,e,s)=>{t.exports=s.p+"af0d86fb60193503fbe83b668ed3d85d.svg"},23146:(t,e,s)=>{t.exports=s.p+"e1b8ff8ea56500bd22b51bab95a3cfe6.svg"},23232:(t,e,s)=>{t.exports=s.p+"7d40685425f65a86f2021d8290730aac.svg"},23295:(t,e,s)=>{t.exports=s.p+"6419c5e5e46f00d517775303b69cc47f.svg"},23318:(t,e,s)=>{t.exports=s.p+"be32acfa0a21d8ecb8130c714555db3a.svg"},23319:(t,e,s)=>{t.exports=s.p+"3614f0c14fc758d1efdf45e08673cee5.svg"},23432:(t,e,s)=>{t.exports=s.p+"3beba950f3444a30c54ce79669d32e36.svg"},23480:(t,e,s)=>{t.exports=s.p+"8bfb2e3199ece8886369c9e260c35b2c.svg"},23744:(t,e,s)=>{t.exports=s.p+"db60c238abb7166557b06cf77bcc0690.svg"},23814:(t,e,s)=>{t.exports=s.p+"1ee13725a4f0c8b4d1e17dbba021981f.svg"},23939:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},24157:(t,e,s)=>{t.exports=s.p+"e1ad41ee055f599709bc5c89a3c3a9a0.svg"},24201:(t,e,s)=>{t.exports=s.p+"ab2f9e9d6397b09788fd1a5225debd7d.svg"},24294:(t,e,s)=>{t.exports=s.p+"0f12f5c32eb218615980ea0506a9b5fd.svg"},24694:(t,e,s)=>{t.exports=s.p+"fbdf759fb98b29ad4e0fb2933db70f98.svg"},24716:(t,e,s)=>{t.exports=s.p+"52d242838567c3ca4e6526a6f64cda8e.svg"},24783:(t,e,s)=>{t.exports=s.p+"4b4efc732d74209df1021ddda31f4458.svg"},24880:(t,e,s)=>{t.exports=s.p+"fd5fa576af4702d7de32fb4d1a2f6492.svg"},24903:(t,e,s)=>{t.exports=s.p+"959ce99680c26411a30f83aafd8c63e7.svg"},24939:(t,e,s)=>{t.exports=s.p+"2733fcfca7ff8b0abe8c4a1dc7458b11.svg"},24950:(t,e,s)=>{t.exports=s.p+"6d04e28c4db7b38d35572952de7377df.svg"},25206:(t,e,s)=>{t.exports=s.p+"810431d6b4a0bfafc0364c497f377b09.svg"},25299:(t,e,s)=>{t.exports=s.p+"fffcfb933faaeaaaabee9c60bf6970b5.svg"},25414:(t,e,s)=>{t.exports=s.p+"59549d6fa2176797a0f1d4e5827b70f7.svg"},25477:(t,e,s)=>{t.exports=s.p+"5f872bb2318d50670b3bb8abd1caefe6.svg"},25613:(t,e,s)=>{t.exports=s.p+"842edb0a57aa7a922e68375960603653.svg"},25738:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},25743:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},25838:(t,e,s)=>{t.exports=s.p+"fc6c62fb7fcb26fa25593143bc589168.svg"},25843:(t,e,s)=>{t.exports=s.p+"f5af499d1948b0aea8c5e4b7854ca7a4.svg"},25874:(t,e,s)=>{t.exports=s.p+"b1097bb584d93251a588309a62f37f94.svg"},26069:(t,e,s)=>{t.exports=s.p+"fc45ed981f7d88ac99801ceb720eba2d.svg"},26086:(t,e,s)=>{t.exports=s.p+"be6379baf9c075ac1f44b952e4b6095a.svg"},26279:(t,e,s)=>{t.exports=s.p+"d45db0540e551bcc3cdced7950fd5ab8.svg"},26291:(t,e,s)=>{t.exports=s.p+"3c37adf51fcad770221496909cf534b0.svg"},26391:(t,e,s)=>{t.exports=s.p+"33c217bde0d9bd2670fbf02d915bfbb6.svg"},26465:(t,e,s)=>{t.exports=s.p+"9b71440b570e4090933f3e527cab52ad.svg"},26484:(t,e,s)=>{t.exports=s.p+"e9e37a053ccd8636bfb91e3e4ea61e76.svg"},26503:(t,e,s)=>{t.exports=s.p+"f3868759e52317a22b92e94fe9f958d4.svg"},26588:(t,e,s)=>{t.exports=s.p+"6b5f85b1f696f5dd7d91673eceecc72d.svg"},26618:(t,e,s)=>{t.exports=s.p+"f43510520806f6a188c344606b0b6c9a.svg"},26821:(t,e,s)=>{t.exports=s.p+"695366001e490f7c19a1fd090bc73b42.svg"},26853:(t,e,s)=>{t.exports=s.p+"ba26c513feef377be3662cb9ab627a55.svg"},26900:(t,e,s)=>{t.exports=s.p+"d3640d89a7f0d63564e56c27ae29597f.svg"},26914:(t,e,s)=>{t.exports=s.p+"97cc207f3c410cbd82af7e727a33fd32.svg"},26997:(t,e,s)=>{t.exports=s.p+"55e22cdcc1a9ea168fc7f588fb958f96.svg"},27542:(t,e,s)=>{t.exports=s.p+"0ffc463363693481b93ccfcc01e6c6e8.svg"},27623:(t,e,s)=>{t.exports=s.p+"acc1602d43edb06b3aff10c734ec3f9f.svg"},27698:(t,e,s)=>{t.exports=s.p+"95f08c02adb6b9063680a0b661386ad8.svg"},27718:(t,e,s)=>{t.exports=s.p+"081190435748ba2e099251464fea3a83.svg"},27809:(t,e,s)=>{t.exports=s.p+"71ee1c29ff8ef3d0df95c661b3315ca4.svg"},27855:(t,e,s)=>{t.exports=s.p+"fc45ed981f7d88ac99801ceb720eba2d.svg"},27862:(t,e,s)=>{t.exports=s.p+"1e2ae333364b4267a4119898d685b7f9.svg"},27884:(t,e,s)=>{t.exports=s.p+"9b71440b570e4090933f3e527cab52ad.svg"},27935:(t,e,s)=>{t.exports=s.p+"d5ace44cfdd614df0fe9c44d71d1851e.svg"},28004:(t,e,s)=>{t.exports=s.p+"bcd277cc114e0bc07e82233340fe28cd.svg"},28008:(t,e,s)=>{t.exports=s.p+"3d69630c4e534f39ce9a7112f72b56e1.svg"},28201:(t,e,s)=>{t.exports=s.p+"b5ce84e955228e23652942a924f8030b.svg"},28317:(t,e,s)=>{t.exports=s.p+"3c452607c0fb6d522e0ec001e381bd45.svg"},28406:(t,e,s)=>{t.exports=s.p+"620b195ac3620a8c2428bd67c8a61a8f.svg"},28439:(t,e,s)=>{t.exports=s.p+"7cb0bca81cd475244c9a7722cc9e5f0c.svg"},28606:(t,e,s)=>{t.exports=s.p+"cca8c93cc08fa7c3aeda9a84d74da963.svg"},28992:(t,e,s)=>{t.exports=s.p+"842edb0a57aa7a922e68375960603653.svg"},29388:(t,e,s)=>{t.exports=s.p+"8014bf8997df11bd496560b42566fcc4.svg"},29446:(t,e,s)=>{t.exports=s.p+"8b45a5514f18c83d6630345fd393d8b1.svg"},29502:(t,e,s)=>{t.exports=s.p+"b20f6a4c3f541162244bc0e771980146.svg"},29514:(t,e,s)=>{t.exports=s.p+"c973dd2fc562de82322d9f209b64b66d.svg"},29623:(t,e,s)=>{t.exports=s.p+"081190435748ba2e099251464fea3a83.svg"},29629:(t,e,s)=>{t.exports=s.p+"099051dd1ecbd4f0c59a1b423aaad366.svg"},29673:(t,e,s)=>{t.exports=s.p+"bf1f2190e8ee298eb93635dbcf8943db.svg"},29706:(t,e,s)=>{t.exports=s.p+"52d242838567c3ca4e6526a6f64cda8e.svg"},29866:(t,e,s)=>{t.exports=s.p+"f22438ceb0ebc99552c513be707a9f9a.svg"},30064:(t,e,s)=>{t.exports=s.p+"1fbfac4e843ff82078d1c9a3d5f4a995.svg"},30270:(t,e,s)=>{t.exports=s.p+"add1fc6132737142e5112940e8ea35f9.svg"},30343:(t,e,s)=>{t.exports=s.p+"9b71440b570e4090933f3e527cab52ad.svg"},30453:(t,e,s)=>{t.exports=s.p+"5098ecb91e9ae262de5bd7fc0381bee3.svg"},30498:(t,e,s)=>{t.exports=s.p+"5098ecb91e9ae262de5bd7fc0381bee3.svg"},30500:(t,e,s)=>{t.exports=s.p+"81054cfcbb2635f8945eb1c6c32511e6.svg"},30654:(t,e,s)=>{t.exports=s.p+"5c32b1b7cc0281db2275dcc108654df9.svg"},31006:(t,e,s)=>{t.exports=s.p+"4e59bbb22c26db6b2feef961f0967f3b.svg"},31245:(t,e,s)=>{t.exports=s.p+"a3bd38f55130f05c5eb6843882d69ce2.svg"},31513:(t,e,s)=>{t.exports=s.p+"8e61cdafaae63b1db1aa1d368ace35a4.svg"},31569:(t,e,s)=>{t.exports=s.p+"acc1602d43edb06b3aff10c734ec3f9f.svg"},31576:(t,e,s)=>{t.exports=s.p+"0031bbc6dd0ca430646334328dd1bc55.svg"},31834:(t,e,s)=>{t.exports=s.p+"bb8026c540de1b67da8b1d8af397970e.svg"},32022:(t,e,s)=>{t.exports=s.p+"9400876d6ea2372d2fd0099219569fe1.svg"},32227:(t,e,s)=>{t.exports=s.p+"5b76bbb089dafb5e2a017a64c3737e9e.svg"},32333:(t,e,s)=>{t.exports=s.p+"b429f53e3f6ce4956584be69aa58f690.svg"},32336:(t,e,s)=>{t.exports=s.p+"db60c238abb7166557b06cf77bcc0690.svg"},33048:(t,e,s)=>{t.exports=s.p+"82dc1953f801dcba8f23e56d66e57ec8.svg"},33062:(t,e,s)=>{t.exports=s.p+"f31168d92e501461b246cfcecfe42f66.svg"},33125:(t,e,s)=>{t.exports=s.p+"cc4c1ab2e255c178b26d54fbef71b697.svg"},33457:(t,e,s)=>{t.exports=s.p+"32e1b1479230ae3db9249b3f2936f955.svg"},33460:(t,e,s)=>{t.exports=s.p+"8e61cdafaae63b1db1aa1d368ace35a4.svg"},33691:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},33896:(t,e,s)=>{t.exports=s.p+"3c00c51ae7fbfed25615ccd4608a11b3.svg"},33942:(t,e,s)=>{t.exports=s.p+"124b0c043b220394374bde56e928a6c4.svg"},33994:(t,e,s)=>{t.exports=s.p+"695366001e490f7c19a1fd090bc73b42.svg"},34122:(t,e,s)=>{t.exports=s.p+"e3f37edb6215aa8b6b154132ae2f16a4.svg"},34299:(t,e,s)=>{t.exports=s.p+"1ee13725a4f0c8b4d1e17dbba021981f.svg"},34362:(t,e,s)=>{t.exports=s.p+"081190435748ba2e099251464fea3a83.svg"},34419:(t,e,s)=>{t.exports=s.p+"3f9622897d2957cf3185b63b642b5c64.svg"},34607:(t,e,s)=>{t.exports=s.p+"811305430b0de2c93e0eaf48efdfcf72.svg"},34699:(t,e,s)=>{t.exports=s.p+"eafc66f7d2f9ca66ca22310b8ce04e52.svg"},34741:(t,e,s)=>{t.exports=s.p+"805e94151c542b41c2016bc28fa2fa51.svg"},34775:(t,e,s)=>{t.exports=s.p+"0031bbc6dd0ca430646334328dd1bc55.svg"},34859:(t,e,s)=>{t.exports=s.p+"7f21f0a2b56e3f5923aa3f8d3231369e.svg"},35049:(t,e,s)=>{t.exports=s.p+"ac5ef846ba101f007c74489d6e6007a6.svg"},35061:(t,e,s)=>{t.exports=s.p+"0ea9c74d84edfa95a9455ec4698d2cff.svg"},35448:(t,e,s)=>{t.exports=s.p+"9b71440b570e4090933f3e527cab52ad.svg"},35486:(t,e,s)=>{t.exports=s.p+"b51e32d3d9ebf9c5802e4c9269311b5e.svg"},35522:(t,e,s)=>{t.exports=s.p+"3620dca68ca0f5a1c83df9051797b88c.svg"},35586:(t,e,s)=>{t.exports=s.p+"acc1602d43edb06b3aff10c734ec3f9f.svg"},35630:(t,e,s)=>{t.exports=s.p+"d3640d89a7f0d63564e56c27ae29597f.svg"},35686:(t,e,s)=>{t.exports=s.p+"886d9e209714849aa30cbc411eab526f.svg"},35884:(t,e,s)=>{t.exports=s.p+"db60c238abb7166557b06cf77bcc0690.svg"},36067:(t,e,s)=>{t.exports=s.p+"4e59bbb22c26db6b2feef961f0967f3b.svg"},36147:(t,e,s)=>{t.exports=s.p+"e1b8ff8ea56500bd22b51bab95a3cfe6.svg"},36523:(t,e,s)=>{t.exports=s.p+"e6f36721b671094a8fe6d5d86c01b27a.svg"},36586:(t,e,s)=>{t.exports=s.p+"081e447ec32b255dc09462a93675f812.svg"},36761:(t,e,s)=>{t.exports=s.p+"7f314022ae8747b1cc2ab0f2f59d440e.svg"},37004:(t,e,s)=>{t.exports=s.p+"5f872bb2318d50670b3bb8abd1caefe6.svg"},37038:(t,e,s)=>{t.exports=s.p+"9c8f7a82fc68e48dc7857f2ec9b6d668.svg"},37148:(t,e,s)=>{t.exports=s.p+"3d69630c4e534f39ce9a7112f72b56e1.svg"},37265:(t,e,s)=>{t.exports=s.p+"cca8c93cc08fa7c3aeda9a84d74da963.svg"},37506:(t,e,s)=>{t.exports=s.p+"f6174af4f7ee7512a22d9edbb94115ce.svg"},37548:(t,e,s)=>{t.exports=s.p+"7f4bf7c410a56d2cdcb4bbec1ecc135a.svg"},37705:(t,e,s)=>{t.exports=s.p+"cbb8ab590b1dd89fd562a28f6364ee35.svg"},37726:(t,e,s)=>{t.exports=s.p+"c1e25f0163c677d7e2014bc1a67e2031.svg"},37748:(t,e,s)=>{t.exports=s.p+"ff07b28268d7f3295a32e5350962c5eb.svg"},37795:(t,e,s)=>{t.exports=s.p+"3c00c51ae7fbfed25615ccd4608a11b3.svg"},37974:(t,e,s)=>{t.exports=s.p+"3b51fe5df0db269edb496394e40e3882.svg"},38096:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},38143:(t,e,s)=>{t.exports=s.p+"0664577d0257405df98f062b0d4455b9.svg"},38418:(t,e,s)=>{t.exports=s.p+"0664577d0257405df98f062b0d4455b9.svg"},38508:(t,e,s)=>{t.exports=s.p+"2c868fb620f5d0473234467d0c549d0e.svg"},38567:(t,e,s)=>{t.exports=s.p+"7808190d6204688fac398c4b7e255eb9.svg"},38666:(t,e,s)=>{t.exports=s.p+"01f6944956af76d738dd0459ee098a62.svg"},38701:(t,e,s)=>{t.exports=s.p+"413e6ee5e32cdc1893eb716d0e188305.svg"},38978:(t,e,s)=>{t.exports=s.p+"add1fc6132737142e5112940e8ea35f9.svg"},38987:(t,e,s)=>{t.exports=s.p+"7ed1eb2cce720f9c672c8a17b81b69ac.svg"},39036:(t,e,s)=>{t.exports=s.p+"935a7e8a484eed6a7fcce0889253ba5d.svg"},39108:(t,e,s)=>{t.exports=s.p+"38d0278a111edbfe0ebcaa812b2e2312.svg"},39112:(t,e,s)=>{t.exports=s.p+"805e94151c542b41c2016bc28fa2fa51.svg"},39120:(t,e,s)=>{t.exports=s.p+"5e6e1c860d4f637c5276fe8687b3eb84.svg"},39225:(t,e,s)=>{t.exports=s.p+"14754ab74db2f29f8c09083c47c10eab.svg"},39382:(t,e,s)=>{t.exports=s.p+"64081864bf2f1b5de5522b37d1042890.svg"},39427:(t,e,s)=>{t.exports=s.p+"811305430b0de2c93e0eaf48efdfcf72.svg"},39441:(t,e,s)=>{t.exports=s.p+"0f025043e8ada6cd8b7847ff43216d0c.svg"},39481:(t,e,s)=>{t.exports=s.p+"8bfb2e3199ece8886369c9e260c35b2c.svg"},39496:(t,e,s)=>{t.exports=s.p+"af0d86fb60193503fbe83b668ed3d85d.svg"},39575:(t,e,s)=>{t.exports=s.p+"52d242838567c3ca4e6526a6f64cda8e.svg"},39627:(t,e,s)=>{t.exports=s.p+"0f12f5c32eb218615980ea0506a9b5fd.svg"},39662:(t,e,s)=>{t.exports=s.p+"3beba950f3444a30c54ce79669d32e36.svg"},39692:(t,e,s)=>{t.exports=s.p+"1fbfac4e843ff82078d1c9a3d5f4a995.svg"},39799:(t,e,s)=>{t.exports=s.p+"65777fb6dd6dd1fb398b13ec77760d32.svg"},39819:(t,e,s)=>{t.exports=s.p+"d3640d89a7f0d63564e56c27ae29597f.svg"},39852:(t,e,s)=>{t.exports=s.p+"e1ad41ee055f599709bc5c89a3c3a9a0.svg"},40004:(t,e,s)=>{t.exports=s.p+"228e0f67c844bb97fe62397a132559ec.svg"},40092:(t,e,s)=>{t.exports=s.p+"e8009f53e694569b1bd778a6d45ce3ae.svg"},40237:(t,e,s)=>{t.exports=s.p+"2f7024f5a3319a3368dcc409d6ea2dd1.svg"},40549:(t,e,s)=>{t.exports=s.p+"988c64c613523f717c7f801746851f9c.svg"},40565:(t,e,s)=>{t.exports=s.p+"59549d6fa2176797a0f1d4e5827b70f7.svg"},40657:(t,e,s)=>{t.exports=s.p+"71ee1c29ff8ef3d0df95c661b3315ca4.svg"},40730:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},40839:(t,e,s)=>{t.exports=s.p+"7d40685425f65a86f2021d8290730aac.svg"},40840:(t,e,s)=>{t.exports=s.p+"6b5f85b1f696f5dd7d91673eceecc72d.svg"},40867:(t,e,s)=>{t.exports=s.p+"959ce99680c26411a30f83aafd8c63e7.svg"},40943:(t,e,s)=>{t.exports=s.p+"be32acfa0a21d8ecb8130c714555db3a.svg"},41028:(t,e,s)=>{t.exports=s.p+"e6f36721b671094a8fe6d5d86c01b27a.svg"},41053:(t,e,s)=>{t.exports=s.p+"3620dca68ca0f5a1c83df9051797b88c.svg"},41120:(t,e,s)=>{t.exports=s.p+"c5ddcfe4cd32ddf13980d2d28b97d8e8.svg"},41262:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},41338:(t,e,s)=>{t.exports=s.p+"fc6c62fb7fcb26fa25593143bc589168.svg"},41485:(t,e,s)=>{t.exports=s.p+"add1fc6132737142e5112940e8ea35f9.svg"},41640:(t,e,s)=>{t.exports=s.p+"8bfb2e3199ece8886369c9e260c35b2c.svg"},42269:(t,e,s)=>{t.exports=s.p+"cd2c5893fb2b12d66d404ec21868af15.svg"},42291:(t,e,s)=>{t.exports=s.p+"124b0c043b220394374bde56e928a6c4.svg"},42450:(t,e,s)=>{t.exports=s.p+"c44e49a555a9e3af6bcd15a8f3cce28a.svg"},42471:(t,e,s)=>{t.exports=s.p+"6d04e28c4db7b38d35572952de7377df.svg"},42508:(t,e,s)=>{t.exports=s.p+"7f314022ae8747b1cc2ab0f2f59d440e.svg"},42517:(t,e,s)=>{t.exports=s.p+"dba60e722ef1baa7aef39060c4ef837d.svg"},42536:(t,e,s)=>{t.exports=s.p+"cbb8ab590b1dd89fd562a28f6364ee35.svg"},42552:(t,e,s)=>{t.exports=s.p+"32e1b1479230ae3db9249b3f2936f955.svg"},42600:(t,e,s)=>{t.exports=s.p+"0a23e67787f0868298e63d3ba409cc0c.svg"},42716:(t,e,s)=>{t.exports=s.p+"95f08c02adb6b9063680a0b661386ad8.svg"},42755:(t,e,s)=>{t.exports=s.p+"33c217bde0d9bd2670fbf02d915bfbb6.svg"},42763:(t,e,s)=>{t.exports=s.p+"f31168d92e501461b246cfcecfe42f66.svg"},42800:(t,e,s)=>{t.exports=s.p+"53c93b7c3fdcce9529ef50e105f244d7.svg"},42996:(t,e,s)=>{t.exports=s.p+"543068612a589aa24cbcf5efd5624bdf.svg"},43146:(t,e,s)=>{t.exports=s.p+"7f4bf7c410a56d2cdcb4bbec1ecc135a.svg"},43196:(t,e,s)=>{t.exports=s.p+"506682d6b9bda92478143715947e86a6.svg"},43365:(t,e,s)=>{t.exports=s.p+"3c00c51ae7fbfed25615ccd4608a11b3.svg"},43458:(t,e,s)=>{t.exports=s.p+"067782e3db47feea13d771625e23c1f7.svg"},43467:(t,e,s)=>{t.exports=s.p+"3c811567e231a8348fea6482d72c2b24.svg"},43614:(t,e,s)=>{t.exports=s.p+"20866567b4d9b6e52174482a594447ec.svg"},43713:(t,e,s)=>{t.exports=s.p+"3c452607c0fb6d522e0ec001e381bd45.svg"},43722:(t,e,s)=>{t.exports=s.p+"7578d5c7c70ac4375f9895f31b21101f.svg"},43756:(t,e,s)=>{t.exports=s.p+"b429f53e3f6ce4956584be69aa58f690.svg"},43888:(t,e,s)=>{t.exports=s.p+"7887528896df2068ea2dd82f32ccdb74.svg"},43982:(t,e,s)=>{t.exports=s.p+"7808190d6204688fac398c4b7e255eb9.svg"},43986:(t,e,s)=>{t.exports=s.p+"fba1be7973564a93f90cb924afa94cb5.svg"},44060:(t,e,s)=>{t.exports=s.p+"2f7024f5a3319a3368dcc409d6ea2dd1.svg"},44067:(t,e,s)=>{t.exports=s.p+"cd2c5893fb2b12d66d404ec21868af15.svg"},44135:(t,e,s)=>{t.exports=s.p+"fbdf759fb98b29ad4e0fb2933db70f98.svg"},44145:(t,e,s)=>{t.exports=s.p+"067782e3db47feea13d771625e23c1f7.svg"},44187:(t,e,s)=>{t.exports=s.p+"f533503b6d55854762c48caf6d332d12.svg"},44205:(t,e,s)=>{t.exports=s.p+"6d30ea04247a4f8707b8a749702be678.svg"},44277:(t,e,s)=>{t.exports=s.p+"62d853c0ce190fe73a5a80b33e9aa48c.svg"},44376:(t,e,s)=>{t.exports=s.p+"cc4c1ab2e255c178b26d54fbef71b697.svg"},44409:(t,e,s)=>{t.exports=s.p+"be6379baf9c075ac1f44b952e4b6095a.svg"},44436:(t,e,s)=>{t.exports=s.p+"959ce99680c26411a30f83aafd8c63e7.svg"},44551:(t,e,s)=>{t.exports=s.p+"e6981d71381805f72210cdd12ad8386b.svg"},44633:(t,e,s)=>{t.exports=s.p+"f5af499d1948b0aea8c5e4b7854ca7a4.svg"},44641:(t,e,s)=>{t.exports=s.p+"3c811567e231a8348fea6482d72c2b24.svg"},44660:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},44953:(t,e,s)=>{t.exports=s.p+"ba26c513feef377be3662cb9ab627a55.svg"},44990:(t,e,s)=>{t.exports=s.p+"723a1da6e853491c5e934d62d906ba4d.svg"},45013:(t,e,s)=>{t.exports=s.p+"95f08c02adb6b9063680a0b661386ad8.svg"},45063:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},45178:(t,e,s)=>{t.exports=s.p+"c5680ebe2c2ac8e5bd6b0c8b29200aa6.svg"},45323:(t,e,s)=>{t.exports=s.p+"b5664b6b8e315d913a5304129b91ed31.svg"},45495:(t,e,s)=>{t.exports=s.p+"5a201ad2dafc9ef08db1a3e2ef094e6c.svg"},45540:(t,e,s)=>{t.exports=s.p+"8cf62fc0602be25d5cfed5ef96c05818.svg"},45554:(t,e,s)=>{t.exports=s.p+"a66d33262a011c68db85d8782a31d3ea.svg"},45730:(t,e,s)=>{t.exports=s.p+"a23cc9ff086d200327b698d55be58561.svg"},45785:(t,e,s)=>{t.exports=s.p+"ac5ef846ba101f007c74489d6e6007a6.svg"},45833:(t,e,s)=>{t.exports=s.p+"65777fb6dd6dd1fb398b13ec77760d32.svg"},45834:(t,e,s)=>{t.exports=s.p+"413e6ee5e32cdc1893eb716d0e188305.svg"},45845:(t,e,s)=>{t.exports=s.p+"1ee13725a4f0c8b4d1e17dbba021981f.svg"},45848:(t,e,s)=>{t.exports=s.p+"cebefd9441e383f10b69692ef0f56899.svg"},45916:(t,e,s)=>{t.exports=s.p+"ac5ef846ba101f007c74489d6e6007a6.svg"},45955:(t,e,s)=>{t.exports=s.p+"52d242838567c3ca4e6526a6f64cda8e.svg"},46072:(t,e,s)=>{t.exports=s.p+"2c868fb620f5d0473234467d0c549d0e.svg"},46126:(t,e,s)=>{t.exports=s.p+"f4db1884915a5fd9e64e6f97e5512edd.svg"},46855:(t,e,s)=>{t.exports=s.p+"d3640d89a7f0d63564e56c27ae29597f.svg"},47051:(t,e,s)=>{t.exports=s.p+"5a201ad2dafc9ef08db1a3e2ef094e6c.svg"},47248:(t,e,s)=>{t.exports=s.p+"e1ad41ee055f599709bc5c89a3c3a9a0.svg"},47515:(t,e,s)=>{t.exports=s.p+"8dbb63ae660e7bacee3c39a7449a7531.svg"},47534:(t,e,s)=>{t.exports=s.p+"c5680ebe2c2ac8e5bd6b0c8b29200aa6.svg"},47683:(t,e,s)=>{t.exports=s.p+"886d9e209714849aa30cbc411eab526f.svg"},47907:(t,e,s)=>{t.exports=s.p+"3f9622897d2957cf3185b63b642b5c64.svg"},48123:(t,e,s)=>{t.exports=s.p+"0f12f5c32eb218615980ea0506a9b5fd.svg"},48151:(t,e,s)=>{t.exports=s.p+"5e6e1c860d4f637c5276fe8687b3eb84.svg"},48337:(t,e,s)=>{t.exports=s.p+"0d12105d5c8a29981e1a9146afeccd2a.svg"},48358:(t,e,s)=>{t.exports=s.p+"c973dd2fc562de82322d9f209b64b66d.svg"},48554:(t,e,s)=>{t.exports=s.p+"1d496b77c78e3444387c50a6db7e4c98.svg"},48648:(t,e,s)=>{t.exports=s.p+"bfb37e1fa93d147b3fe8a010d629acc5.svg"},48835:(t,e,s)=>{t.exports=s.p+"cc4c1ab2e255c178b26d54fbef71b697.svg"},48942:(t,e,s)=>{t.exports=s.p+"779e618369ed3501bb913bd439002613.svg"},49027:(t,e,s)=>{t.exports=s.p+"7d40685425f65a86f2021d8290730aac.svg"},49058:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},49063:(t,e,s)=>{t.exports=s.p+"181d8d90b802f9078d80b9acb7bd5a54.svg"},49135:(t,e,s)=>{t.exports=s.p+"a66d33262a011c68db85d8782a31d3ea.svg"},49459:(t,e,s)=>{t.exports=s.p+"0a6d102e37fabfb19e96313cc1bbb557.svg"},49490:(t,e,s)=>{t.exports=s.p+"5b76bbb089dafb5e2a017a64c3737e9e.svg"},49543:(t,e,s)=>{t.exports=s.p+"fd5fa576af4702d7de32fb4d1a2f6492.svg"},49564:(t,e,s)=>{t.exports=s.p+"b8e5366ac990b117502fc40031769dce.svg"},49647:(t,e,s)=>{t.exports=s.p+"c5ddcfe4cd32ddf13980d2d28b97d8e8.svg"},49739:(t,e,s)=>{t.exports=s.p+"be32acfa0a21d8ecb8130c714555db3a.svg"},49864:(t,e,s)=>{t.exports=s.p+"e6f36721b671094a8fe6d5d86c01b27a.svg"},49918:(t,e,s)=>{t.exports=s.p+"6076e8a615ba3fdf63a0136a4f163d8e.svg"},50042:(t,e,s)=>{t.exports=s.p+"b429f53e3f6ce4956584be69aa58f690.svg"},50175:(t,e,s)=>{t.exports=s.p+"3b51fe5df0db269edb496394e40e3882.svg"},50232:(t,e,s)=>{t.exports=s.p+"1f22fa022e683ace036c403870aefba8.svg"},50424:(t,e,s)=>{t.exports=s.p+"3500924b6537062cb168c61698a26279.svg"},50544:(t,e,s)=>{t.exports=s.p+"c5ddcfe4cd32ddf13980d2d28b97d8e8.svg"},50595:(t,e,s)=>{t.exports=s.p+"810431d6b4a0bfafc0364c497f377b09.svg"},50828:(t,e,s)=>{t.exports=s.p+"765b67f85b5e2cb4356d476ee83cfa69.svg"},50836:(t,e,s)=>{t.exports=s.p+"e6f36721b671094a8fe6d5d86c01b27a.svg"},50879:(t,e,s)=>{t.exports=s.p+"f22438ceb0ebc99552c513be707a9f9a.svg"},50897:(t,e,s)=>{t.exports=s.p+"3b51fe5df0db269edb496394e40e3882.svg"},51130:(t,e,s)=>{t.exports=s.p+"20bb2b21facc1e63df61b4350d6941b4.svg"},51161:(t,e,s)=>{t.exports=s.p+"f43510520806f6a188c344606b0b6c9a.svg"},51456:(t,e,s)=>{t.exports=s.p+"fd5fa576af4702d7de32fb4d1a2f6492.svg"},51593:(t,e,s)=>{t.exports=s.p+"b429f53e3f6ce4956584be69aa58f690.svg"},51638:(t,e,s)=>{t.exports=s.p+"2733fcfca7ff8b0abe8c4a1dc7458b11.svg"},52084:(t,e,s)=>{t.exports=s.p+"be32acfa0a21d8ecb8130c714555db3a.svg"},52207:(t,e,s)=>{t.exports=s.p+"9a9c4f70ac7877832c45e2aaba14b2fb.svg"},52237:(t,e,s)=>{t.exports=s.p+"3c452607c0fb6d522e0ec001e381bd45.svg"},52305:(t,e,s)=>{t.exports=s.p+"b20f6a4c3f541162244bc0e771980146.svg"},52598:(t,e,s)=>{t.exports=s.p+"765b67f85b5e2cb4356d476ee83cfa69.svg"},52615:(t,e,s)=>{t.exports=s.p+"5a201ad2dafc9ef08db1a3e2ef094e6c.svg"},52730:(t,e,s)=>{t.exports=s.p+"1d496b77c78e3444387c50a6db7e4c98.svg"},52759:(t,e,s)=>{t.exports=s.p+"a31585ef009902096b24a711d08fda34.svg"},52769:(t,e,s)=>{t.exports=s.p+"9c8f7a82fc68e48dc7857f2ec9b6d668.svg"},53172:(t,e,s)=>{t.exports=s.p+"4b4efc732d74209df1021ddda31f4458.svg"},53195:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},53352:(t,e,s)=>{t.exports=s.p+"6076e8a615ba3fdf63a0136a4f163d8e.svg"},53378:(t,e,s)=>{t.exports=s.p+"0664577d0257405df98f062b0d4455b9.svg"},53518:(t,e,s)=>{t.exports=s.p+"b20f6a4c3f541162244bc0e771980146.svg"},53783:(t,e,s)=>{t.exports=s.p+"765b67f85b5e2cb4356d476ee83cfa69.svg"},53866:(t,e,s)=>{t.exports=s.p+"ba26c513feef377be3662cb9ab627a55.svg"},53885:(t,e,s)=>{t.exports=s.p+"3f621c9d8a9541f76de1ee27c5dd15d0.svg"},53991:(t,e,s)=>{t.exports=s.p+"2f7024f5a3319a3368dcc409d6ea2dd1.svg"},54105:(t,e,s)=>{t.exports=s.p+"32778c6fb69706c5266ed8be166437aa.svg"},54111:(t,e,s)=>{t.exports=s.p+"a7256d34889f13c498f5db742fc2251f.svg"},54120:(t,e,s)=>{t.exports=s.p+"543068612a589aa24cbcf5efd5624bdf.svg"},54166:(t,e,s)=>{t.exports=s.p+"59549d6fa2176797a0f1d4e5827b70f7.svg"},54211:(t,e,s)=>{t.exports=s.p+"6076e8a615ba3fdf63a0136a4f163d8e.svg"},54256:(t,e,s)=>{t.exports=s.p+"0ffc463363693481b93ccfcc01e6c6e8.svg"},54278:(t,e,s)=>{t.exports=s.p+"acc1602d43edb06b3aff10c734ec3f9f.svg"},54342:(t,e,s)=>{t.exports=s.p+"e1b8ff8ea56500bd22b51bab95a3cfe6.svg"},54370:(t,e,s)=>{t.exports=s.p+"3c811567e231a8348fea6482d72c2b24.svg"},54371:(t,e,s)=>{t.exports=s.p+"00a81bf3a395b96b0221d938618d1f37.svg"},54387:(t,e,s)=>{t.exports=s.p+"5b76bbb089dafb5e2a017a64c3737e9e.svg"},54427:(t,e,s)=>{t.exports=s.p+"a3bd38f55130f05c5eb6843882d69ce2.svg"},54497:(t,e,s)=>{t.exports=s.p+"067782e3db47feea13d771625e23c1f7.svg"},54620:(t,e,s)=>{t.exports=s.p+"97cc207f3c410cbd82af7e727a33fd32.svg"},54706:(t,e,s)=>{t.exports=s.p+"d5ace44cfdd614df0fe9c44d71d1851e.svg"},54879:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},54886:(t,e,s)=>{t.exports=s.p+"7578d5c7c70ac4375f9895f31b21101f.svg"},54944:(t,e,s)=>{t.exports=s.p+"cbc53e0d41800a1fbedcbcade0ded4f5.svg"},55167:(t,e,s)=>{t.exports=s.p+"7ed1eb2cce720f9c672c8a17b81b69ac.svg"},55237:(t,e,s)=>{t.exports=s.p+"be6379baf9c075ac1f44b952e4b6095a.svg"},55391:(t,e,s)=>{t.exports=s.p+"4b4efc732d74209df1021ddda31f4458.svg"},55488:(t,e,s)=>{t.exports=s.p+"ff07b28268d7f3295a32e5350962c5eb.svg"},55571:(t,e,s)=>{t.exports=s.p+"959ce99680c26411a30f83aafd8c63e7.svg"},55658:(t,e,s)=>{t.exports=s.p+"099051dd1ecbd4f0c59a1b423aaad366.svg"},55776:(t,e,s)=>{t.exports=s.p+"3d97f8ab5b551dcf98e33aab0ea5c62a.svg"},55783:(t,e,s)=>{t.exports=s.p+"cebefd9441e383f10b69692ef0f56899.svg"},55811:(t,e,s)=>{t.exports=s.p+"620b195ac3620a8c2428bd67c8a61a8f.svg"},55900:(t,e,s)=>{t.exports=s.p+"765b10638ac9909819ac057cd045e428.svg"},55948:(t,e,s)=>{t.exports=s.p+"5b76bbb089dafb5e2a017a64c3737e9e.svg"},56289:(t,e,s)=>{t.exports=s.p+"9b6103302ac19fb935df8c0986744130.svg"},56372:(t,e,s)=>{t.exports=s.p+"bcd277cc114e0bc07e82233340fe28cd.svg"},56380:(t,e,s)=>{t.exports=s.p+"cbc53e0d41800a1fbedcbcade0ded4f5.svg"},56468:(t,e,s)=>{t.exports=s.p+"9400876d6ea2372d2fd0099219569fe1.svg"},56547:(t,e,s)=>{t.exports=s.p+"765b67f85b5e2cb4356d476ee83cfa69.svg"},56681:(t,e,s)=>{t.exports=s.p+"8b45a5514f18c83d6630345fd393d8b1.svg"},56683:(t,e,s)=>{t.exports=s.p+"1e2ae333364b4267a4119898d685b7f9.svg"},56883:(t,e,s)=>{t.exports=s.p+"081e447ec32b255dc09462a93675f812.svg"},57225:(t,e,s)=>{t.exports=s.p+"7887528896df2068ea2dd82f32ccdb74.svg"},57393:(t,e,s)=>{t.exports=s.p+"20866567b4d9b6e52174482a594447ec.svg"},57591:(t,e,s)=>{t.exports=s.p+"723a1da6e853491c5e934d62d906ba4d.svg"},57709:(t,e,s)=>{t.exports=s.p+"f616ce9c0580da73288f7d724b89dcf1.svg"},57734:(t,e,s)=>{t.exports=s.p+"f688976d467e4b4b1c2168b40c04db20.svg"},57779:(t,e,s)=>{t.exports=s.p+"842edb0a57aa7a922e68375960603653.svg"},57801:(t,e,s)=>{t.exports=s.p+"b5bba9597102688c22e22164036d36c6.svg"},57844:(t,e,s)=>{t.exports=s.p+"a24bf2c5d52ae3c8f803835aac471b4d.svg"},57935:(t,e,s)=>{t.exports=s.p+"8a15776a8ba966420212dc412413db47.svg"},58061:(t,e,s)=>{t.exports=s.p+"97cc207f3c410cbd82af7e727a33fd32.svg"},58252:(t,e,s)=>{t.exports=s.p+"f43510520806f6a188c344606b0b6c9a.svg"},58262:(t,e,s)=>{t.exports=s.p+"00a81bf3a395b96b0221d938618d1f37.svg"},58389:(t,e,s)=>{t.exports=s.p+"a24bf2c5d52ae3c8f803835aac471b4d.svg"},58497:(t,e,s)=>{t.exports=s.p+"9400876d6ea2372d2fd0099219569fe1.svg"},58498:(t,e,s)=>{t.exports=s.p+"811305430b0de2c93e0eaf48efdfcf72.svg"},58651:(t,e,s)=>{t.exports=s.p+"f4db1884915a5fd9e64e6f97e5512edd.svg"},58705:(t,e,s)=>{t.exports=s.p+"9400876d6ea2372d2fd0099219569fe1.svg"},59238:(t,e,s)=>{t.exports=s.p+"7816dda30de9cd8860edea936a73ef41.svg"},59249:(t,e,s)=>{t.exports=s.p+"8dbb63ae660e7bacee3c39a7449a7531.svg"},59281:(t,e,s)=>{t.exports=s.p+"8a2cd0c627efbc9f65109cb530516e7e.svg"},59330:(t,e,s)=>{t.exports=s.p+"b8e5366ac990b117502fc40031769dce.svg"},59548:(t,e,s)=>{t.exports=s.p+"067782e3db47feea13d771625e23c1f7.svg"},59656:(t,e,s)=>{t.exports=s.p+"0031bbc6dd0ca430646334328dd1bc55.svg"},59739:(t,e,s)=>{t.exports=s.p+"7f21f0a2b56e3f5923aa3f8d3231369e.svg"},59765:(t,e,s)=>{t.exports=s.p+"be6379baf9c075ac1f44b952e4b6095a.svg"},59796:(t,e,s)=>{t.exports=s.p+"6d30ea04247a4f8707b8a749702be678.svg"},59813:(t,e,s)=>{t.exports=s.p+"8e61cdafaae63b1db1aa1d368ace35a4.svg"},59910:(t,e,s)=>{t.exports=s.p+"dba60e722ef1baa7aef39060c4ef837d.svg"},59950:(t,e,s)=>{t.exports=s.p+"e6981d71381805f72210cdd12ad8386b.svg"},59988:(t,e,s)=>{t.exports=s.p+"1d495f7573c0bbab2fe2c77efd26f41f.svg"},60246:(t,e,s)=>{t.exports=s.p+"32778c6fb69706c5266ed8be166437aa.svg"},60298:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},60307:(t,e,s)=>{t.exports=s.p+"ff07b28268d7f3295a32e5350962c5eb.svg"},60495:(t,e,s)=>{t.exports=s.p+"3eae80596d08454b0b785b73c8649df3.svg"},60700:(t,e,s)=>{t.exports=s.p+"8dbb63ae660e7bacee3c39a7449a7531.svg"},60715:(t,e,s)=>{t.exports=s.p+"779e618369ed3501bb913bd439002613.svg"},60765:(t,e,s)=>{t.exports=s.p+"7887528896df2068ea2dd82f32ccdb74.svg"},60782:(t,e,s)=>{t.exports=s.p+"ab2f9e9d6397b09788fd1a5225debd7d.svg"},60904:(t,e,s)=>{t.exports=s.p+"cc4c1ab2e255c178b26d54fbef71b697.svg"},60920:(t,e,s)=>{t.exports=s.p+"543068612a589aa24cbcf5efd5624bdf.svg"},60960:(t,e,s)=>{t.exports=s.p+"506682d6b9bda92478143715947e86a6.svg"},60962:(t,e,s)=>{t.exports=s.p+"7ed1eb2cce720f9c672c8a17b81b69ac.svg"},61211:(t,e,s)=>{t.exports=s.p+"b5664b6b8e315d913a5304129b91ed31.svg"},61226:(t,e,s)=>{t.exports=s.p+"959ce99680c26411a30f83aafd8c63e7.svg"},61274:(t,e,s)=>{t.exports=s.p+"0f025043e8ada6cd8b7847ff43216d0c.svg"},61282:(t,e,s)=>{t.exports=s.p+"3b51fe5df0db269edb496394e40e3882.svg"},61345:(t,e,s)=>{t.exports=s.p+"1fbfac4e843ff82078d1c9a3d5f4a995.svg"},61379:(t,e,s)=>{t.exports=s.p+"db60c238abb7166557b06cf77bcc0690.svg"},61442:(t,e,s)=>{t.exports=s.p+"a31585ef009902096b24a711d08fda34.svg"},61684:(t,e,s)=>{t.exports=s.p+"fd5fa576af4702d7de32fb4d1a2f6492.svg"},61805:(t,e,s)=>{t.exports=s.p+"e1b8ff8ea56500bd22b51bab95a3cfe6.svg"},61829:(t,e,s)=>{t.exports=s.p+"ab2f9e9d6397b09788fd1a5225debd7d.svg"},61998:(t,e,s)=>{t.exports=s.p+"1d496b77c78e3444387c50a6db7e4c98.svg"},62135:(t,e,s)=>{t.exports=s.p+"1fbfac4e843ff82078d1c9a3d5f4a995.svg"},62210:(t,e,s)=>{t.exports=s.p+"3f621c9d8a9541f76de1ee27c5dd15d0.svg"},62411:(t,e,s)=>{t.exports=s.p+"a84a7d1030f295e250153d114d073559.svg"},62487:(t,e,s)=>{t.exports=s.p+"54c721ebb2c709c0da4f478230adf73d.svg"},62886:(t,e,s)=>{t.exports=s.p+"3b51fe5df0db269edb496394e40e3882.svg"},62987:(t,e,s)=>{t.exports=s.p+"0ffc463363693481b93ccfcc01e6c6e8.svg"},63005:(t,e,s)=>{t.exports=s.p+"fffcfb933faaeaaaabee9c60bf6970b5.svg"},63093:(t,e,s)=>{t.exports=s.p+"9d66441ac6ff2f4e743ab205632d389b.svg"},63287:(t,e,s)=>{t.exports=s.p+"3f9622897d2957cf3185b63b642b5c64.svg"},63290:(t,e,s)=>{t.exports=s.p+"b20f6a4c3f541162244bc0e771980146.svg"},63394:(t,e,s)=>{t.exports=s.p+"a3bd38f55130f05c5eb6843882d69ce2.svg"},63567:(t,e,s)=>{t.exports=s.p+"b5664b6b8e315d913a5304129b91ed31.svg"},63569:(t,e,s)=>{t.exports=s.p+"413e6ee5e32cdc1893eb716d0e188305.svg"},63579:(t,e,s)=>{t.exports=s.p+"f349cdf1451f633bb57a397a492fe4ba.svg"},63580:(t,e,s)=>{t.exports=s.p+"55e22cdcc1a9ea168fc7f588fb958f96.svg"},63782:(t,e,s)=>{t.exports=s.p+"3614f0c14fc758d1efdf45e08673cee5.svg"},63811:(t,e,s)=>{t.exports=s.p+"3c37adf51fcad770221496909cf534b0.svg"},63854:(t,e,s)=>{t.exports=s.p+"5098ecb91e9ae262de5bd7fc0381bee3.svg"},64036:(t,e,s)=>{t.exports=s.p+"cc4c1ab2e255c178b26d54fbef71b697.svg"},64177:(t,e,s)=>{t.exports=s.p+"081e447ec32b255dc09462a93675f812.svg"},64234:(t,e,s)=>{t.exports=s.p+"6d04e28c4db7b38d35572952de7377df.svg"},64243:(t,e,s)=>{t.exports=s.p+"886d9e209714849aa30cbc411eab526f.svg"},64503:(t,e,s)=>{t.exports=s.p+"53c93b7c3fdcce9529ef50e105f244d7.svg"},64737:(t,e,s)=>{t.exports=s.p+"506682d6b9bda92478143715947e86a6.svg"},64754:(t,e,s)=>{t.exports=s.p+"fbdf759fb98b29ad4e0fb2933db70f98.svg"},64833:(t,e,s)=>{t.exports=s.p+"8cf62fc0602be25d5cfed5ef96c05818.svg"},64927:(t,e,s)=>{t.exports=s.p+"32e1b1479230ae3db9249b3f2936f955.svg"},64990:(t,e,s)=>{t.exports=s.p+"5098ecb91e9ae262de5bd7fc0381bee3.svg"},65186:(t,e,s)=>{t.exports=s.p+"c05bf70b3d01cb275dea8cb7a5a0e3cf.svg"},65209:(t,e,s)=>{t.exports=s.p+"ab2f9e9d6397b09788fd1a5225debd7d.svg"},65220:(t,e,s)=>{t.exports=s.p+"1d495f7573c0bbab2fe2c77efd26f41f.svg"},65226:(t,e,s)=>{t.exports=s.p+"bb8026c540de1b67da8b1d8af397970e.svg"},65236:(t,e,s)=>{t.exports=s.p+"ab2f9e9d6397b09788fd1a5225debd7d.svg"},65251:(t,e,s)=>{t.exports=s.p+"a31585ef009902096b24a711d08fda34.svg"},65274:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},65327:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},65414:(t,e,s)=>{t.exports=s.p+"fc45ed981f7d88ac99801ceb720eba2d.svg"},65751:(t,e,s)=>{t.exports=s.p+"a23cc9ff086d200327b698d55be58561.svg"},65781:(t,e,s)=>{t.exports=s.p+"5f872bb2318d50670b3bb8abd1caefe6.svg"},65816:(t,e,s)=>{t.exports=s.p+"33c217bde0d9bd2670fbf02d915bfbb6.svg"},65854:(t,e,s)=>{t.exports=s.p+"01f6944956af76d738dd0459ee098a62.svg"},65978:(t,e,s)=>{t.exports=s.p+"620b195ac3620a8c2428bd67c8a61a8f.svg"},65989:(t,e,s)=>{t.exports=s.p+"bb8026c540de1b67da8b1d8af397970e.svg"},66074:(t,e,s)=>{t.exports=s.p+"c1e25f0163c677d7e2014bc1a67e2031.svg"},66527:(t,e,s)=>{t.exports=s.p+"e8009f53e694569b1bd778a6d45ce3ae.svg"},66558:(t,e,s)=>{t.exports=s.p+"d6930770569af8d92d0a97489733af9c.svg"},66605:(t,e,s)=>{t.exports=s.p+"8cf62fc0602be25d5cfed5ef96c05818.svg"},66653:(t,e,s)=>{t.exports=s.p+"7f4bf7c410a56d2cdcb4bbec1ecc135a.svg"},66764:(t,e,s)=>{t.exports=s.p+"805e94151c542b41c2016bc28fa2fa51.svg"},66848:(t,e,s)=>{t.exports=s.p+"cd2c5893fb2b12d66d404ec21868af15.svg"},66905:(t,e,s)=>{t.exports=s.p+"c973dd2fc562de82322d9f209b64b66d.svg"},66933:(t,e,s)=>{t.exports=s.p+"9cb3623fcedc1e051b28445095b44127.svg"},66971:(t,e,s)=>{t.exports=s.p+"8014bf8997df11bd496560b42566fcc4.svg"},67088:(t,e,s)=>{t.exports=s.p+"181d8d90b802f9078d80b9acb7bd5a54.svg"},67138:(t,e,s)=>{t.exports=s.p+"723a1da6e853491c5e934d62d906ba4d.svg"},67371:(t,e,s)=>{t.exports=s.p+"54c721ebb2c709c0da4f478230adf73d.svg"},67492:(t,e,s)=>{t.exports=s.p+"53c93b7c3fdcce9529ef50e105f244d7.svg"},67688:(t,e,s)=>{t.exports=s.p+"38d0278a111edbfe0ebcaa812b2e2312.svg"},67723:(t,e,s)=>{t.exports=s.p+"c5680ebe2c2ac8e5bd6b0c8b29200aa6.svg"},67792:(t,e,s)=>{t.exports=s.p+"f5af499d1948b0aea8c5e4b7854ca7a4.svg"},67956:(t,e,s)=>{t.exports=s.p+"842edb0a57aa7a922e68375960603653.svg"},68082:(t,e,s)=>{t.exports=s.p+"fffcfb933faaeaaaabee9c60bf6970b5.svg"},68160:(t,e,s)=>{t.exports=s.p+"3f9622897d2957cf3185b63b642b5c64.svg"},68172:(t,e,s)=>{t.exports=s.p+"765b10638ac9909819ac057cd045e428.svg"},68219:(t,e,s)=>{t.exports=s.p+"eafc66f7d2f9ca66ca22310b8ce04e52.svg"},68254:(t,e,s)=>{t.exports=s.p+"cebefd9441e383f10b69692ef0f56899.svg"},68286:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},68291:(t,e,s)=>{t.exports=s.p+"eab852f51cf368ec68618e4db4cd6acc.svg"},68337:(t,e,s)=>{t.exports=s.p+"3500924b6537062cb168c61698a26279.svg"},68419:(t,e,s)=>{t.exports=s.p+"b51e32d3d9ebf9c5802e4c9269311b5e.svg"},68434:(t,e,s)=>{t.exports=s.p+"988c64c613523f717c7f801746851f9c.svg"},68522:(t,e,s)=>{t.exports=s.p+"59549d6fa2176797a0f1d4e5827b70f7.svg"},68674:(t,e,s)=>{t.exports=s.p+"54c721ebb2c709c0da4f478230adf73d.svg"},68784:(t,e,s)=>{t.exports=s.p+"cd2c5893fb2b12d66d404ec21868af15.svg"},68807:(t,e,s)=>{t.exports=s.p+"a31585ef009902096b24a711d08fda34.svg"},68812:(t,e,s)=>{t.exports=s.p+"506682d6b9bda92478143715947e86a6.svg"},68813:(t,e,s)=>{t.exports=s.p+"1f22fa022e683ace036c403870aefba8.svg"},68814:(t,e,s)=>{t.exports=s.p+"eab852f51cf368ec68618e4db4cd6acc.svg"},68853:(t,e,s)=>{t.exports=s.p+"067782e3db47feea13d771625e23c1f7.svg"},69042:(t,e,s)=>{t.exports=s.p+"d29fdadd5f016b83d1adc84fc809896e.svg"},69053:(t,e,s)=>{t.exports=s.p+"8cf62fc0602be25d5cfed5ef96c05818.svg"},69059:(t,e,s)=>{t.exports=s.p+"9a9c4f70ac7877832c45e2aaba14b2fb.svg"},69230:(t,e,s)=>{t.exports=s.p+"9a9c4f70ac7877832c45e2aaba14b2fb.svg"},69285:(t,e,s)=>{t.exports=s.p+"64081864bf2f1b5de5522b37d1042890.svg"},69299:(t,e,s)=>{t.exports=s.p+"59549d6fa2176797a0f1d4e5827b70f7.svg"},69305:(t,e,s)=>{t.exports=s.p+"7ae98a17d8bf5a5a592db60664b4ff7d.svg"},69414:(t,e,s)=>{t.exports=s.p+"2733fcfca7ff8b0abe8c4a1dc7458b11.svg"},69416:(t,e,s)=>{t.exports=s.p+"1d495f7573c0bbab2fe2c77efd26f41f.svg"},69465:(t,e,s)=>{t.exports=s.p+"099051dd1ecbd4f0c59a1b423aaad366.svg"},69541:(t,e,s)=>{t.exports=s.p+"bcd277cc114e0bc07e82233340fe28cd.svg"},69719:(t,e,s)=>{t.exports=s.p+"0a23e67787f0868298e63d3ba409cc0c.svg"},69997:(t,e,s)=>{t.exports=s.p+"bfe322b548387b9228eeec6bddbaaaf8.svg"},70194:(t,e,s)=>{t.exports=s.p+"810431d6b4a0bfafc0364c497f377b09.svg"},70264:(t,e,s)=>{t.exports=s.p+"a84a7d1030f295e250153d114d073559.svg"},70293:(t,e,s)=>{t.exports=s.p+"0f025043e8ada6cd8b7847ff43216d0c.svg"},70334:(t,e,s)=>{t.exports=s.p+"e6981d71381805f72210cdd12ad8386b.svg"},70400:(t,e,s)=>{t.exports=s.p+"eafc66f7d2f9ca66ca22310b8ce04e52.svg"},70615:(t,e,s)=>{t.exports=s.p+"cebefd9441e383f10b69692ef0f56899.svg"},70746:(t,e,s)=>{t.exports=s.p+"76ba1601c94033f5134bb1c68b0f278e.svg"},70796:(t,e,s)=>{t.exports=s.p+"a31585ef009902096b24a711d08fda34.svg"},70862:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},70886:(t,e,s)=>{t.exports=s.p+"32778c6fb69706c5266ed8be166437aa.svg"},70892:(t,e,s)=>{t.exports=s.p+"811305430b0de2c93e0eaf48efdfcf72.svg"},71050:(t,e,s)=>{t.exports=s.p+"0ea9c74d84edfa95a9455ec4698d2cff.svg"},71230:(t,e,s)=>{t.exports=s.p+"83541bc041d374379de5834f37c95b54.svg"},71439:(t,e,s)=>{t.exports=s.p+"1d495f7573c0bbab2fe2c77efd26f41f.svg"},71530:(t,e,s)=>{t.exports=s.p+"e6981d71381805f72210cdd12ad8386b.svg"},71564:(t,e,s)=>{t.exports=s.p+"8dbb63ae660e7bacee3c39a7449a7531.svg"},71633:(t,e,s)=>{t.exports=s.p+"988c64c613523f717c7f801746851f9c.svg"},71952:(t,e,s)=>{t.exports=s.p+"842edb0a57aa7a922e68375960603653.svg"},72169:(t,e,s)=>{t.exports=s.p+"5f872bb2318d50670b3bb8abd1caefe6.svg"},72227:(t,e,s)=>{t.exports=s.p+"7cb0bca81cd475244c9a7722cc9e5f0c.svg"},72244:(t,e,s)=>{t.exports=s.p+"53c93b7c3fdcce9529ef50e105f244d7.svg"},72379:(t,e,s)=>{t.exports=s.p+"3eae80596d08454b0b785b73c8649df3.svg"},72431:(t,e,s)=>{t.exports=s.p+"935a7e8a484eed6a7fcce0889253ba5d.svg"},72974:(t,e,s)=>{t.exports=s.p+"5f91b198209326ae387397d458732250.svg"},73207:(t,e,s)=>{t.exports=s.p+"0a6d102e37fabfb19e96313cc1bbb557.svg"},73298:(t,e,s)=>{t.exports=s.p+"a3bd38f55130f05c5eb6843882d69ce2.svg"},73372:(t,e,s)=>{t.exports=s.p+"a84a7d1030f295e250153d114d073559.svg"},73380:(t,e,s)=>{t.exports=s.p+"11985ad04eb9874bff99ccb70e3a12ee.svg"},73477:(t,e,s)=>{t.exports=s.p+"bfb37e1fa93d147b3fe8a010d629acc5.svg"},73481:(t,e,s)=>{t.exports=s.p+"810431d6b4a0bfafc0364c497f377b09.svg"},73497:(t,e,s)=>{t.exports=s.p+"1f22fa022e683ace036c403870aefba8.svg"},73498:(t,e,s)=>{t.exports=s.p+"4e59bbb22c26db6b2feef961f0967f3b.svg"},73510:(t,e,s)=>{t.exports=s.p+"fabb2355396e0b43d1b0302bb3a9db62.svg"},73562:(t,e,s)=>{t.exports=s.p+"fabb2355396e0b43d1b0302bb3a9db62.svg"},73911:(t,e,s)=>{t.exports=s.p+"11985ad04eb9874bff99ccb70e3a12ee.svg"},74096:(t,e,s)=>{t.exports=s.p+"3620dca68ca0f5a1c83df9051797b88c.svg"},74262:(t,e,s)=>{t.exports=s.p+"e1b8ff8ea56500bd22b51bab95a3cfe6.svg"},74266:(t,e,s)=>{t.exports=s.p+"4b4efc732d74209df1021ddda31f4458.svg"},74349:(t,e,s)=>{t.exports=s.p+"7f4bf7c410a56d2cdcb4bbec1ecc135a.svg"},74355:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},74393:(t,e,s)=>{t.exports=s.p+"8a15776a8ba966420212dc412413db47.svg"},74495:(t,e,s)=>{t.exports=s.p+"811305430b0de2c93e0eaf48efdfcf72.svg"},74506:(t,e,s)=>{t.exports=s.p+"20bb2b21facc1e63df61b4350d6941b4.svg"},74571:(t,e,s)=>{t.exports=s.p+"af0d86fb60193503fbe83b668ed3d85d.svg"},74572:(t,e,s)=>{t.exports=s.p+"0a23e67787f0868298e63d3ba409cc0c.svg"},74794:(t,e,s)=>{t.exports=s.p+"f688976d467e4b4b1c2168b40c04db20.svg"},74826:(t,e,s)=>{t.exports=s.p+"8e61cdafaae63b1db1aa1d368ace35a4.svg"},74894:(t,e,s)=>{t.exports=s.p+"fffcfb933faaeaaaabee9c60bf6970b5.svg"},74970:(t,e,s)=>{t.exports=s.p+"5f872bb2318d50670b3bb8abd1caefe6.svg"},75055:(t,e,s)=>{t.exports=s.p+"e8009f53e694569b1bd778a6d45ce3ae.svg"},75172:(t,e,s)=>{t.exports=s.p+"ba26c513feef377be3662cb9ab627a55.svg"},75180:(t,e,s)=>{t.exports=s.p+"d45db0540e551bcc3cdced7950fd5ab8.svg"},75205:(t,e,s)=>{t.exports=s.p+"a24bf2c5d52ae3c8f803835aac471b4d.svg"},75284:(t,e,s)=>{t.exports=s.p+"0ec58186b468e04c97e023c8b677fb87.svg"},75418:(t,e,s)=>{t.exports=s.p+"5a201ad2dafc9ef08db1a3e2ef094e6c.svg"},75493:(t,e,s)=>{t.exports=s.p+"0f025043e8ada6cd8b7847ff43216d0c.svg"},75501:(t,e,s)=>{t.exports=s.p+"3620dca68ca0f5a1c83df9051797b88c.svg"},75826:(t,e,s)=>{t.exports=s.p+"3d97f8ab5b551dcf98e33aab0ea5c62a.svg"},75956:(t,e,s)=>{t.exports=s.p+"3c00c51ae7fbfed25615ccd4608a11b3.svg"},76022:(t,e,s)=>{t.exports=s.p+"dba60e722ef1baa7aef39060c4ef837d.svg"},76154:(t,e,s)=>{t.exports=s.p+"bdaca97bc1237905bd927eb2443fa786.svg"},76156:(t,e,s)=>{t.exports=s.p+"d5ace44cfdd614df0fe9c44d71d1851e.svg"},76217:(t,e,s)=>{t.exports=s.p+"3beba950f3444a30c54ce79669d32e36.svg"},76281:(t,e,s)=>{t.exports=s.p+"b8e5366ac990b117502fc40031769dce.svg"},76297:(t,e,s)=>{t.exports=s.p+"ba26c513feef377be3662cb9ab627a55.svg"},76335:(t,e,s)=>{t.exports=s.p+"5c32b1b7cc0281db2275dcc108654df9.svg"},76371:(t,e,s)=>{t.exports=s.p+"3500924b6537062cb168c61698a26279.svg"},76444:(t,e,s)=>{t.exports=s.p+"65777fb6dd6dd1fb398b13ec77760d32.svg"},76587:(t,e,s)=>{t.exports=s.p+"76ba1601c94033f5134bb1c68b0f278e.svg"},76691:(t,e,s)=>{t.exports=s.p+"6419c5e5e46f00d517775303b69cc47f.svg"},76768:(t,e,s)=>{t.exports=s.p+"32778c6fb69706c5266ed8be166437aa.svg"},76790:(t,e,s)=>{t.exports=s.p+"e8009f53e694569b1bd778a6d45ce3ae.svg"},76931:(t,e,s)=>{t.exports=s.p+"cebefd9441e383f10b69692ef0f56899.svg"},77139:(t,e,s)=>{t.exports=s.p+"5c32b1b7cc0281db2275dcc108654df9.svg"},77364:(t,e,s)=>{t.exports=s.p+"32e1b1479230ae3db9249b3f2936f955.svg"},77406:(t,e,s)=>{t.exports=s.p+"0664577d0257405df98f062b0d4455b9.svg"},77426:(t,e,s)=>{t.exports=s.p+"a24bf2c5d52ae3c8f803835aac471b4d.svg"},77600:(t,e,s)=>{t.exports=s.p+"0a6d102e37fabfb19e96313cc1bbb557.svg"},77667:(t,e,s)=>{t.exports=s.p+"506682d6b9bda92478143715947e86a6.svg"},77959:(t,e,s)=>{t.exports=s.p+"5f91b198209326ae387397d458732250.svg"},77974:(t,e,s)=>{t.exports=s.p+"d29fdadd5f016b83d1adc84fc809896e.svg"},78334:(t,e,s)=>{t.exports=s.p+"71ee1c29ff8ef3d0df95c661b3315ca4.svg"},78401:(t,e,s)=>{t.exports=s.p+"e3f37edb6215aa8b6b154132ae2f16a4.svg"},78457:(t,e,s)=>{t.exports=s.p+"4e59bbb22c26db6b2feef961f0967f3b.svg"},78523:(t,e,s)=>{t.exports=s.p+"d3640d89a7f0d63564e56c27ae29597f.svg"},78563:(t,e,s)=>{t.exports=s.p+"6419c5e5e46f00d517775303b69cc47f.svg"},78578:(t,e,s)=>{t.exports=s.p+"7f21f0a2b56e3f5923aa3f8d3231369e.svg"},78606:(t,e,s)=>{t.exports=s.p+"a3bd38f55130f05c5eb6843882d69ce2.svg"},78772:(t,e,s)=>{t.exports=s.p+"8a2cd0c627efbc9f65109cb530516e7e.svg"},78927:(t,e,s)=>{t.exports=s.p+"d5ace44cfdd614df0fe9c44d71d1851e.svg"},78945:(t,e,s)=>{t.exports=s.p+"1d496b77c78e3444387c50a6db7e4c98.svg"},79037:(t,e,s)=>{t.exports=s.p+"1f22fa022e683ace036c403870aefba8.svg"},79078:(t,e,s)=>{t.exports=s.p+"d45db0540e551bcc3cdced7950fd5ab8.svg"},79096:(t,e,s)=>{t.exports=s.p+"f3868759e52317a22b92e94fe9f958d4.svg"},79138:(t,e,s)=>{t.exports=s.p+"1ee13725a4f0c8b4d1e17dbba021981f.svg"},79149:(t,e,s)=>{t.exports=s.p+"1d495f7573c0bbab2fe2c77efd26f41f.svg"},79306:(t,e,s)=>{t.exports=s.p+"081190435748ba2e099251464fea3a83.svg"},79428:(t,e,s)=>{t.exports=s.p+"3c00c51ae7fbfed25615ccd4608a11b3.svg"},79505:(t,e,s)=>{t.exports=s.p+"bfb37e1fa93d147b3fe8a010d629acc5.svg"},79697:(t,e,s)=>{t.exports=s.p+"2c868fb620f5d0473234467d0c549d0e.svg"},79922:(t,e,s)=>{t.exports=s.p+"779e618369ed3501bb913bd439002613.svg"},79960:(t,e,s)=>{t.exports=s.p+"f616ce9c0580da73288f7d724b89dcf1.svg"},80307:(t,e,s)=>{t.exports=s.p+"f6174af4f7ee7512a22d9edbb94115ce.svg"},80430:(t,e,s)=>{t.exports=s.p+"b51e32d3d9ebf9c5802e4c9269311b5e.svg"},80629:(t,e,s)=>{t.exports=s.p+"f31168d92e501461b246cfcecfe42f66.svg"},80635:(t,e,s)=>{t.exports=s.p+"8b45a5514f18c83d6630345fd393d8b1.svg"},80774:(t,e,s)=>{t.exports=s.p+"97e620d626eb95db97a60ac45e86f693.svg"},80837:(t,e,s)=>{t.exports=s.p+"620b195ac3620a8c2428bd67c8a61a8f.svg"},80873:(t,e,s)=>{t.exports=s.p+"a84a7d1030f295e250153d114d073559.svg"},80896:(t,e,s)=>{t.exports=s.p+"54c721ebb2c709c0da4f478230adf73d.svg"},81208:(t,e,s)=>{t.exports=s.p+"b50e0d94ab5ba756343e1fce3306a49f.svg"},81303:(t,e,s)=>{t.exports=s.p+"eab852f51cf368ec68618e4db4cd6acc.svg"},81349:(t,e,s)=>{t.exports=s.p+"fbdf759fb98b29ad4e0fb2933db70f98.svg"},81353:(t,e,s)=>{t.exports=s.p+"55e22cdcc1a9ea168fc7f588fb958f96.svg"},81413:(t,e,s)=>{t.exports=s.p+"e9e37a053ccd8636bfb91e3e4ea61e76.svg"},81446:(t,e,s)=>{t.exports=s.p+"d29fdadd5f016b83d1adc84fc809896e.svg"},81615:(t,e,s)=>{t.exports=s.p+"cbc53e0d41800a1fbedcbcade0ded4f5.svg"},81644:(t,e,s)=>{t.exports=s.p+"1e2ae333364b4267a4119898d685b7f9.svg"},81690:(t,e,s)=>{t.exports=s.p+"7808190d6204688fac398c4b7e255eb9.svg"},81719:(t,e,s)=>{t.exports=s.p+"b50e0d94ab5ba756343e1fce3306a49f.svg"},81878:(t,e,s)=>{t.exports=s.p+"bf1f2190e8ee298eb93635dbcf8943db.svg"},81890:(t,e,s)=>{t.exports=s.p+"7f314022ae8747b1cc2ab0f2f59d440e.svg"},81967:(t,e,s)=>{t.exports=s.p+"01f6944956af76d738dd0459ee098a62.svg"},81973:(t,e,s)=>{t.exports=s.p+"fba1be7973564a93f90cb924afa94cb5.svg"},82014:(t,e,s)=>{t.exports=s.p+"fc6c62fb7fcb26fa25593143bc589168.svg"},82090:(t,e,s)=>{t.exports=s.p+"c5680ebe2c2ac8e5bd6b0c8b29200aa6.svg"},82165:(t,e,s)=>{t.exports=s.p+"7816dda30de9cd8860edea936a73ef41.svg"},82229:(t,e,s)=>{t.exports=s.p+"7808190d6204688fac398c4b7e255eb9.svg"},82674:(t,e,s)=>{t.exports=s.p+"723a1da6e853491c5e934d62d906ba4d.svg"},83035:(t,e,s)=>{t.exports=s.p+"1e2ae333364b4267a4119898d685b7f9.svg"},83136:(t,e,s)=>{t.exports=s.p+"f5af499d1948b0aea8c5e4b7854ca7a4.svg"},83151:(t,e,s)=>{t.exports=s.p+"1d496b77c78e3444387c50a6db7e4c98.svg"},83609:(t,e,s)=>{t.exports=s.p+"81054cfcbb2635f8945eb1c6c32511e6.svg"},83642:(t,e,s)=>{t.exports=s.p+"7816dda30de9cd8860edea936a73ef41.svg"},83873:(t,e,s)=>{t.exports=s.p+"f6174af4f7ee7512a22d9edbb94115ce.svg"},84327:(t,e,s)=>{t.exports=s.p+"81054cfcbb2635f8945eb1c6c32511e6.svg"},84696:(t,e,s)=>{t.exports=s.p+"64081864bf2f1b5de5522b37d1042890.svg"},84704:(t,e,s)=>{t.exports=s.p+"bcd277cc114e0bc07e82233340fe28cd.svg"},84709:(t,e,s)=>{t.exports=s.p+"d29fdadd5f016b83d1adc84fc809896e.svg"},84717:(t,e,s)=>{t.exports=s.p+"3d97f8ab5b551dcf98e33aab0ea5c62a.svg"},84825:(t,e,s)=>{t.exports=s.p+"b5bba9597102688c22e22164036d36c6.svg"},84868:(t,e,s)=>{t.exports=s.p+"cd2c5893fb2b12d66d404ec21868af15.svg"},84979:(t,e,s)=>{t.exports=s.p+"a66d33262a011c68db85d8782a31d3ea.svg"},85091:(t,e,s)=>{t.exports=s.p+"695366001e490f7c19a1fd090bc73b42.svg"},85204:(t,e,s)=>{t.exports=s.p+"cbb8ab590b1dd89fd562a28f6364ee35.svg"},85248:(t,e,s)=>{t.exports=s.p+"8a15776a8ba966420212dc412413db47.svg"},85256:(t,e,s)=>{t.exports=s.p+"11985ad04eb9874bff99ccb70e3a12ee.svg"},85257:(t,e,s)=>{t.exports=s.p+"b8e5366ac990b117502fc40031769dce.svg"},85387:(t,e,s)=>{t.exports=s.p+"b1097bb584d93251a588309a62f37f94.svg"},85470:(t,e,s)=>{t.exports=s.p+"081e447ec32b255dc09462a93675f812.svg"},85576:(t,e,s)=>{t.exports=s.p+"3c37adf51fcad770221496909cf534b0.svg"},85853:(t,e,s)=>{t.exports=s.p+"c5680ebe2c2ac8e5bd6b0c8b29200aa6.svg"},85874:(t,e,s)=>{t.exports=s.p+"55e22cdcc1a9ea168fc7f588fb958f96.svg"},85996:(t,e,s)=>{t.exports=s.p+"62d853c0ce190fe73a5a80b33e9aa48c.svg"},86004:(t,e,s)=>{t.exports=s.p+"7f21f0a2b56e3f5923aa3f8d3231369e.svg"},86008:(t,e,s)=>{t.exports=s.p+"11985ad04eb9874bff99ccb70e3a12ee.svg"},86027:(t,e,s)=>{t.exports=s.p+"f349cdf1451f633bb57a397a492fe4ba.svg"},86105:(t,e,s)=>{t.exports=s.p+"0a23e67787f0868298e63d3ba409cc0c.svg"},86157:(t,e,s)=>{t.exports=s.p+"cca8c93cc08fa7c3aeda9a84d74da963.svg"},86229:(t,e,s)=>{t.exports=s.p+"e6f36721b671094a8fe6d5d86c01b27a.svg"},86275:(t,e,s)=>{t.exports=s.p+"c1e25f0163c677d7e2014bc1a67e2031.svg"},86279:(t,e,s)=>{t.exports=s.p+"c44e49a555a9e3af6bcd15a8f3cce28a.svg"},86287:(t,e,s)=>{t.exports=s.p+"add1fc6132737142e5112940e8ea35f9.svg"},86354:(t,e,s)=>{t.exports=s.p+"9b6103302ac19fb935df8c0986744130.svg"},86502:(t,e,s)=>{t.exports=s.p+"810431d6b4a0bfafc0364c497f377b09.svg"},86515:(t,e,s)=>{t.exports=s.p+"33c217bde0d9bd2670fbf02d915bfbb6.svg"},86615:(t,e,s)=>{t.exports=s.p+"c973dd2fc562de82322d9f209b64b66d.svg"},86627:(t,e,s)=>{t.exports=s.p+"124b0c043b220394374bde56e928a6c4.svg"},86705:(t,e,s)=>{t.exports=s.p+"6d30ea04247a4f8707b8a749702be678.svg"},86772:(t,e,s)=>{t.exports=s.p+"f3868759e52317a22b92e94fe9f958d4.svg"},86830:(t,e,s)=>{t.exports=s.p+"bb8026c540de1b67da8b1d8af397970e.svg"},87058:(t,e,s)=>{t.exports=s.p+"83541bc041d374379de5834f37c95b54.svg"},87230:(t,e,s)=>{t.exports=s.p+"ac5ef846ba101f007c74489d6e6007a6.svg"},87256:(t,e,s)=>{t.exports=s.p+"3eae80596d08454b0b785b73c8649df3.svg"},87285:(t,e,s)=>{t.exports=s.p+"2733fcfca7ff8b0abe8c4a1dc7458b11.svg"},87383:(t,e,s)=>{t.exports=s.p+"fabb2355396e0b43d1b0302bb3a9db62.svg"},87435:(t,e,s)=>{t.exports=s.p+"3eae80596d08454b0b785b73c8649df3.svg"},87509:(t,e,s)=>{t.exports=s.p+"e3f37edb6215aa8b6b154132ae2f16a4.svg"},87527:(t,e,s)=>{t.exports=s.p+"52d242838567c3ca4e6526a6f64cda8e.svg"},87628:(t,e,s)=>{t.exports=s.p+"a84a7d1030f295e250153d114d073559.svg"},87811:(t,e,s)=>{t.exports=s.p+"181d8d90b802f9078d80b9acb7bd5a54.svg"},88118:(t,e,s)=>{t.exports=s.p+"f31168d92e501461b246cfcecfe42f66.svg"},88125:(t,e,s)=>{t.exports=s.p+"7578d5c7c70ac4375f9895f31b21101f.svg"},88317:(t,e,s)=>{t.exports=s.p+"97cc207f3c410cbd82af7e727a33fd32.svg"},88369:(t,e,s)=>{t.exports=s.p+"d6930770569af8d92d0a97489733af9c.svg"},88448:(t,e,s)=>{t.exports=s.p+"cca8c93cc08fa7c3aeda9a84d74da963.svg"},88494:(t,e,s)=>{t.exports=s.p+"7d40685425f65a86f2021d8290730aac.svg"},88667:(t,e,s)=>{t.exports=s.p+"14754ab74db2f29f8c09083c47c10eab.svg"},88668:(t,e,s)=>{t.exports=s.p+"0031bbc6dd0ca430646334328dd1bc55.svg"},88724:(t,e,s)=>{t.exports=s.p+"6419c5e5e46f00d517775303b69cc47f.svg"},88793:(t,e,s)=>{t.exports=s.p+"bf1f2190e8ee298eb93635dbcf8943db.svg"},88825:(t,e,s)=>{t.exports=s.p+"01f6944956af76d738dd0459ee098a62.svg"},89062:(t,e,s)=>{t.exports=s.p+"f6174af4f7ee7512a22d9edbb94115ce.svg"},89328:(t,e,s)=>{t.exports=s.p+"5a201ad2dafc9ef08db1a3e2ef094e6c.svg"},89347:(t,e,s)=>{t.exports=s.p+"e8009f53e694569b1bd778a6d45ce3ae.svg"},89402:(t,e,s)=>{t.exports=s.p+"f4db1884915a5fd9e64e6f97e5512edd.svg"},89562:(t,e,s)=>{t.exports=s.p+"6d04e28c4db7b38d35572952de7377df.svg"},89597:(t,e,s)=>{t.exports=s.p+"b5bba9597102688c22e22164036d36c6.svg"},89674:(t,e,s)=>{t.exports=s.p+"0d12105d5c8a29981e1a9146afeccd2a.svg"},89701:(t,e,s)=>{t.exports=s.p+"71ee1c29ff8ef3d0df95c661b3315ca4.svg"},89917:(t,e,s)=>{t.exports=s.p+"3beba950f3444a30c54ce79669d32e36.svg"},90043:(t,e,s)=>{t.exports=s.p+"6b5f85b1f696f5dd7d91673eceecc72d.svg"},90068:(t,e,s)=>{t.exports=s.p+"7cb0bca81cd475244c9a7722cc9e5f0c.svg"},90214:(t,e,s)=>{t.exports=s.p+"620b195ac3620a8c2428bd67c8a61a8f.svg"},90305:(t,e,s)=>{t.exports=s.p+"bdaca97bc1237905bd927eb2443fa786.svg"},90331:(t,e,s)=>{t.exports=s.p+"228e0f67c844bb97fe62397a132559ec.svg"},90349:(t,e,s)=>{t.exports=s.p+"db60c238abb7166557b06cf77bcc0690.svg"},90372:(t,e,s)=>{t.exports=s.p+"14754ab74db2f29f8c09083c47c10eab.svg"},90491:(t,e,s)=>{t.exports=s.p+"f688976d467e4b4b1c2168b40c04db20.svg"},90633:(t,e,s)=>{t.exports=s.p+"483997ea95655724cfaf8d91c886c1e0.svg"},90637:(t,e,s)=>{t.exports=s.p+"53c93b7c3fdcce9529ef50e105f244d7.svg"},91010:(t,e,s)=>{t.exports=s.p+"8b45a5514f18c83d6630345fd393d8b1.svg"},91087:(t,e,s)=>{t.exports=s.p+"0ffc463363693481b93ccfcc01e6c6e8.svg"},91112:(t,e,s)=>{t.exports=s.p+"a23cc9ff086d200327b698d55be58561.svg"},91122:(t,e,s)=>{t.exports=s.p+"3614f0c14fc758d1efdf45e08673cee5.svg"},91268:(t,e,s)=>{t.exports=s.p+"f3868759e52317a22b92e94fe9f958d4.svg"},91420:(t,e,s)=>{t.exports=s.p+"c5ddcfe4cd32ddf13980d2d28b97d8e8.svg"},91545:(t,e,s)=>{t.exports=s.p+"4d7bd754c0b0c01b965a7fa7b0b22eca.svg"},91835:(t,e,s)=>{t.exports=s.p+"d45db0540e551bcc3cdced7950fd5ab8.svg"},91936:(t,e,s)=>{t.exports=s.p+"2f7024f5a3319a3368dcc409d6ea2dd1.svg"},92167:(t,e,s)=>{t.exports=s.p+"543068612a589aa24cbcf5efd5624bdf.svg"},92191:(t,e,s)=>{t.exports=s.p+"5c32b1b7cc0281db2275dcc108654df9.svg"},92322:(t,e,s)=>{t.exports=s.p+"9b6103302ac19fb935df8c0986744130.svg"},92376:(t,e,s)=>{t.exports=s.p+"8014bf8997df11bd496560b42566fcc4.svg"},92519:(t,e,s)=>{t.exports=s.p+"fba1be7973564a93f90cb924afa94cb5.svg"},92645:(t,e,s)=>{t.exports=s.p+"6b5f85b1f696f5dd7d91673eceecc72d.svg"},93018:(t,e,s)=>{t.exports=s.p+"7cb0bca81cd475244c9a7722cc9e5f0c.svg"},93041:(t,e,s)=>{t.exports=s.p+"7f4bf7c410a56d2cdcb4bbec1ecc135a.svg"},93085:(t,e,s)=>{t.exports=s.p+"9400876d6ea2372d2fd0099219569fe1.svg"},93162:(t,e,s)=>{t.exports=s.p+"76ba1601c94033f5134bb1c68b0f278e.svg"},93164:(t,e,s)=>{t.exports=s.p+"099051dd1ecbd4f0c59a1b423aaad366.svg"},93384:(t,e,s)=>{t.exports=s.p+"71ee1c29ff8ef3d0df95c661b3315ca4.svg"},93602:(t,e,s)=>{t.exports=s.p+"fbdf759fb98b29ad4e0fb2933db70f98.svg"},93656:(t,e,s)=>{t.exports=s.p+"9cb3623fcedc1e051b28445095b44127.svg"},93724:(t,e,s)=>{t.exports=s.p+"a7256d34889f13c498f5db742fc2251f.svg"},93732:(t,e,s)=>{t.exports=s.p+"9c8f7a82fc68e48dc7857f2ec9b6d668.svg"},93754:(t,e,s)=>{t.exports=s.p+"b5664b6b8e315d913a5304129b91ed31.svg"},93865:(t,e,s)=>{t.exports=s.p+"b50e0d94ab5ba756343e1fce3306a49f.svg"},93866:(t,e,s)=>{t.exports=s.p+"5e6e1c860d4f637c5276fe8687b3eb84.svg"},94089:(t,e,s)=>{t.exports=s.p+"c1e25f0163c677d7e2014bc1a67e2031.svg"},94245:(t,e,s)=>{t.exports=s.p+"95f08c02adb6b9063680a0b661386ad8.svg"},94428:(t,e,s)=>{t.exports=s.p+"0d12105d5c8a29981e1a9146afeccd2a.svg"},94455:(t,e,s)=>{t.exports=s.p+"765b10638ac9909819ac057cd045e428.svg"},94457:(t,e,s)=>{t.exports=s.p+"b429f53e3f6ce4956584be69aa58f690.svg"},94481:(t,e,s)=>{t.exports=s.p+"95f08c02adb6b9063680a0b661386ad8.svg"},94510:(t,e,s)=>{t.exports=s.p+"c1e25f0163c677d7e2014bc1a67e2031.svg"},94662:(t,e,s)=>{t.exports=s.p+"33c217bde0d9bd2670fbf02d915bfbb6.svg"},94679:(t,e,s)=>{t.exports=s.p+"6076e8a615ba3fdf63a0136a4f163d8e.svg"},94761:(t,e,s)=>{t.exports=s.p+"82efa97f9f07722d56aaeb899c7a6eb1.svg"},94899:(t,e,s)=>{t.exports=s.p+"6076e8a615ba3fdf63a0136a4f163d8e.svg"},95070:(t,e,s)=>{t.exports=s.p+"6d30ea04247a4f8707b8a749702be678.svg"},95116:(t,e,s)=>{t.exports=s.p+"cbc53e0d41800a1fbedcbcade0ded4f5.svg"},95139:(t,e,s)=>{t.exports=s.p+"82dc1953f801dcba8f23e56d66e57ec8.svg"},95202:(t,e,s)=>{t.exports=s.p+"f349cdf1451f633bb57a397a492fe4ba.svg"},95224:(t,e,s)=>{t.exports=s.p+"62d853c0ce190fe73a5a80b33e9aa48c.svg"},95551:(t,e,s)=>{t.exports=s.p+"b1097bb584d93251a588309a62f37f94.svg"},95560:(t,e,s)=>{t.exports=s.p+"b50e0d94ab5ba756343e1fce3306a49f.svg"},95599:(t,e,s)=>{t.exports=s.p+"7578d5c7c70ac4375f9895f31b21101f.svg"},95761:(t,e,s)=>{t.exports=s.p+"a7256d34889f13c498f5db742fc2251f.svg"},95893:(t,e,s)=>{t.exports=s.p+"0d12105d5c8a29981e1a9146afeccd2a.svg"},95987:(t,e,s)=>{t.exports=s.p+"7d40685425f65a86f2021d8290730aac.svg"},96128:(t,e,s)=>{t.exports=s.p+"483997ea95655724cfaf8d91c886c1e0.svg"},96365:(t,e,s)=>{t.exports=s.p+"f43510520806f6a188c344606b0b6c9a.svg"},96443:(t,e,s)=>{t.exports=s.p+"38d0278a111edbfe0ebcaa812b2e2312.svg"},96647:(t,e,s)=>{t.exports=s.p+"7816dda30de9cd8860edea936a73ef41.svg"},96656:(t,e,s)=>{t.exports=s.p+"d6930770569af8d92d0a97489733af9c.svg"},96695:(t,e,s)=>{t.exports=s.p+"cbb8ab590b1dd89fd562a28f6364ee35.svg"},96720:(t,e,s)=>{t.exports=s.p+"14754ab74db2f29f8c09083c47c10eab.svg"},96935:(t,e,s)=>{t.exports=s.p+"54c721ebb2c709c0da4f478230adf73d.svg"},97030:(t,e,s)=>{t.exports=s.p+"9b6103302ac19fb935df8c0986744130.svg"},97044:(t,e,s)=>{t.exports=s.p+"3500924b6537062cb168c61698a26279.svg"},97127:(t,e,s)=>{t.exports=s.p+"eab852f51cf368ec68618e4db4cd6acc.svg"},97185:(t,e,s)=>{t.exports=s.p+"20bb2b21facc1e63df61b4350d6941b4.svg"},97187:(t,e,s)=>{t.exports=s.p+"5e6e1c860d4f637c5276fe8687b3eb84.svg"},97213:(t,e,s)=>{t.exports=s.p+"bfe322b548387b9228eeec6bddbaaaf8.svg"},97261:(t,e,s)=>{t.exports=s.p+"8a2cd0c627efbc9f65109cb530516e7e.svg"},97398:(t,e,s)=>{t.exports=s.p+"1ee13725a4f0c8b4d1e17dbba021981f.svg"},97572:(t,e,s)=>{t.exports=s.p+"8bfb2e3199ece8886369c9e260c35b2c.svg"},97578:(t,e,s)=>{t.exports=s.p+"8cf62fc0602be25d5cfed5ef96c05818.svg"},97669:(t,e,s)=>{t.exports=s.p+"fabb2355396e0b43d1b0302bb3a9db62.svg"},97728:(t,e,s)=>{t.exports=s.p+"3f621c9d8a9541f76de1ee27c5dd15d0.svg"},97732:(t,e,s)=>{t.exports=s.p+"b5ce84e955228e23652942a924f8030b.svg"},97978:(t,e,s)=>{t.exports=s.p+"7578d5c7c70ac4375f9895f31b21101f.svg"},98082:(t,e,s)=>{t.exports=s.p+"fffcfb933faaeaaaabee9c60bf6970b5.svg"},98105:(t,e,s)=>{t.exports=s.p+"55e22cdcc1a9ea168fc7f588fb958f96.svg"},98121:(t,e,s)=>{t.exports=s.p+"935a7e8a484eed6a7fcce0889253ba5d.svg"},98124:(t,e,s)=>{t.exports=s.p+"a7256d34889f13c498f5db742fc2251f.svg"},98181:(t,e,s)=>{t.exports=s.p+"e3f37edb6215aa8b6b154132ae2f16a4.svg"},98188:(t,e,s)=>{t.exports=s.p+"935a7e8a484eed6a7fcce0889253ba5d.svg"},98385:(t,e,s)=>{t.exports=s.p+"83541bc041d374379de5834f37c95b54.svg"},98673:(t,e,s)=>{t.exports=s.p+"c5ddcfe4cd32ddf13980d2d28b97d8e8.svg"},98696:(t,e,s)=>{t.exports=s.p+"bfe322b548387b9228eeec6bddbaaaf8.svg"},98768:(t,e,s)=>{t.exports=s.p+"bdaca97bc1237905bd927eb2443fa786.svg"},98812:(t,e,s)=>{t.exports=s.p+"124b0c043b220394374bde56e928a6c4.svg"},98820:(t,e,s)=>{t.exports=s.p+"e9e37a053ccd8636bfb91e3e4ea61e76.svg"},98827:(t,e,s)=>{t.exports=s.p+"d29fdadd5f016b83d1adc84fc809896e.svg"},98903:(t,e,s)=>{t.exports=s.p+"0f12f5c32eb218615980ea0506a9b5fd.svg"},99030:(t,e,s)=>{t.exports=s.p+"7816dda30de9cd8860edea936a73ef41.svg"},99057:(t,e,s)=>{t.exports=s.p+"0664577d0257405df98f062b0d4455b9.svg"},99070:(t,e,s)=>{t.exports=s.p+"b5ce84e955228e23652942a924f8030b.svg"},99212:(t,e,s)=>{t.exports=s.p+"e3f37edb6215aa8b6b154132ae2f16a4.svg"},99297:(t,e,s)=>{t.exports=s.p+"988c64c613523f717c7f801746851f9c.svg"},99684:(t,e,s)=>{t.exports=s.p+"8a15776a8ba966420212dc412413db47.svg"},99707:(t,e,s)=>{t.exports=s.p+"2c868fb620f5d0473234467d0c549d0e.svg"},99858:(t,e,s)=>{t.exports=s.p+"1f22fa022e683ace036c403870aefba8.svg"},99889:(t,e,s)=>{t.exports=s.p+"f616ce9c0580da73288f7d724b89dcf1.svg"}},e={};function s(n){var i=e[n];if(void 0!==i)return i.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,s),r.exports}s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})();var n={};return(()=>{"use strict";s.r(n),s.d(n,{default:()=>If});var t={};s.r(t);var e={};s.r(e);var i={};s.r(i);var r={};s.r(r);var o={};s.r(o);var a={};s.r(a);var h={};s.r(h);var l={};s.r(l),s.d(l,{f:()=>Xs});var c={};s.r(c);var d={};s.r(d);var f={};s.r(f);var u={};s.r(u);var g={};s.r(g);var p={};s.r(p);var m={};s.r(m);var b={};s.r(b);var _={};s.r(_);var y={};s.r(y);var w={};s.r(w);var v={};s.r(v);var P={};s.r(P);var x={};s.r(x);var S={};let A;s.r(S);try{A={window,document}}catch{A={window:{},document:{}}}class O{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const k=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function R(){const[t,e,s,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+k[255&t]+k[t>>8&255]+k[t>>16&255]+k[t>>24&255]+k[255&e]+k[e>>8&255]+k[e>>16&255]+k[e>>24&255]+k[255&s]+k[s>>8&255]+k[s>>16&255]+k[s>>24&255]+k[255&n]+k[n>>8&255]+k[n>>16&255]+k[n>>24&255]}const N={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function E(t,e){const s=N.get(e.priority);let n=0,i=t.length;for(;n<i;){const e=n+i>>1;N.get(t[e].priority)<s?i=e:n=e+1}t.splice(n,0,e)}class M extends Error{context;data;constructor(t,e,s,n){super(function(t,e,s){const n=new WeakSet;return t+(e?` ${JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e})}`:"")+B(t)+(s?`\nOriginal error: ${s.name}: ${s.message}`:"")}(t,s,n)),this.name="CKEditorError",this.context=e,this.data=s,n&&(this.stack=n.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new M("unexpected-error",e,void 0,t)}}function T(t,e){console.warn(...function(t,e){const s=B(t);return e?[t,e,s]:[t,s]}(t,e))}function B(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}if(new Date(2025,9,16),globalThis.CKEDITOR_VERSION)throw new M("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION="47.1.0";const C=Symbol("listeningTo"),I=Symbol("emitterId"),F=Symbol("delegations"),J=V(Object);function V(t){return t?class extends t{on(t,e,s){this.listenTo(this,t,e,s)}once(t,e,s){let n=!1;this.listenTo(this,t,(t,...s)=>{n||(n=!0,t.off(),e.call(this,t,...s))},s)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,s,n={}){let i,r;this[C]||(this[C]={});const o=this[C];D(t)||q(t);const a=D(t);(i=o[a])||(i=o[a]={emitter:t,callbacks:{}}),(r=i.callbacks[e])||(r=i.callbacks[e]=[]),r.push(s),function(t,e,s,n,i){e._addEventListener?e._addEventListener(s,n,i):t._addEventListener.call(e,s,n,i)}(this,t,e,s,n)}stopListening(t,e,s){const n=this[C];let i=t&&D(t);const r=n&&i?n[i]:void 0,o=r&&e?r.callbacks[e]:void 0;if(!(!n||t&&!r||e&&!o))if(s)W(this,t,e,s),-1!==o.indexOf(s)&&(1===o.length?delete r.callbacks[e]:W(this,t,e,s));else if(o){for(;s=o.pop();)W(this,t,e,s);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete n[i]}else{for(i in n)this.stopListening(n[i].emitter);delete this[C]}}fire(t,...e){try{const s=t instanceof O?t:new O(this,t),n=s.name;let i=function(t,e){if(!t._events)return null;let s=e;do{const e=t._events[s];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const n=s.lastIndexOf(":");s=n>-1?s.substring(0,n):""}while(s);return null}(this,n);if(s.path.push(this),i){i=i.slice();for(let t=0;t<i.length;t++){const r=i[t].callback;if(r.call(this,s,...e),s.off.called&&(delete s.off.called,this._removeEventListener(n,r)),s.stop.called)break}}const r=this[F];if(r){const t=r.get(n),i=r.get("*");t&&z(t,s,e),i&&z(i,s,e)}return s.return}catch(t){M.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,s)=>{this[F]||(this[F]=new Map),t.forEach(t=>{const n=this[F].get(t);n?n.set(e,s):this[F].set(t,new Map([[e,s]]))})}}}stopDelegating(t,e){if(this[F])if(t)if(e){const s=this[F].get(t);s&&s.delete(e)}else this[F].delete(t);else this[F].clear()}_addEventListener(t,e,s){!function(t,e){const s=j(t);if(s[e])return;let n=e,i=null;const r=[];for(;""!==n&&!s[n];)s[n]=L(),r.push(s[n]),i&&s[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(":"));if(""!==n){for(const t of r)t.callbacks=s[n].callbacks.slice();s[n].childEvents.push(i)}}(this,t);const n=$(this,t),i={callback:e,priority:N.get(s.priority)};for(const t of n)E(t,i)}_removeEventListener(t,e){const s=$(this,t);for(const t of s)for(let s=0;s<t.length;s++)t[s].callback==e&&(t.splice(s,1),s--)}}:J}function q(t,e){t[I]||(t[I]=e||R())}function D(t){return t[I]}function j(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function L(){return{callbacks:[],childEvents:[]}}function $(t,e){const s=j(t)[e];if(!s)return[];let n=[s.callbacks];for(let e=0;e<s.childEvents.length;e++){const i=$(t,s.childEvents[e]);n=n.concat(i)}return n}function z(t,e,s){for(let[n,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new O(e.source,i);t.path=[...e.path],n.fire(t,...s)}}function W(t,e,s,n){e._removeEventListener?e._removeEventListener(s,n):t._removeEventListener.call(e,s,n)}function U(t){return null!==t&&("object"==typeof t||"function"==typeof t)}const G=Symbol("observableProperties"),K=Symbol("boundObservables"),Y=Symbol("boundProperties"),Q=Symbol("decoratedMethods"),H=Symbol("decoratedOriginal"),X=Z(V());function Z(t){return t?class extends t{set(t,e){if(U(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);tt(this);const s=this[G];if(t in this&&!s.has(t))throw new M("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>s.get(t),set(e){const n=s.get(t);let i=this.fire(`set:${t}`,t,e,n);void 0===i&&(i=e),n===i&&s.has(t)||(s.set(t,i),this.fire(`change:${t}`,t,i,n))}}),this[t]=e}bind(...t){if(!t.length||!nt(t))throw new M("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new M("observable-bind-duplicate-properties",this);tt(this);const e=this[Y];t.forEach(t=>{if(e.has(t))throw new M("observable-bind-rebind",this)});const s=new Map;return t.forEach(t=>{const n={property:t,to:[]};e.set(t,n),s.set(t,n)}),{to:et,toMany:st,_observable:this,_bindProperties:t,_to:[],_bindings:s}}unbind(...t){if(!this[G])return;const e=this[Y],s=this[K];if(t.length){if(!nt(t))throw new M("observable-unbind-wrong-properties",this);t.forEach(t=>{const n=e.get(t);n&&(n.to.forEach(([t,e])=>{const i=s.get(t),r=i[e];r.delete(n),r.size||delete i[e],Object.keys(i).length||(s.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else s.forEach((t,e)=>{this.stopListening(e,"change")}),s.clear(),e.clear()}decorate(t){tt(this);const e=this[t];if(!e)throw new M("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,s)=>{t.return=e.apply(this,s)}),this[t]=function(...e){return this.fire(t,e)},this[t][H]=e,this[Q]||(this[Q]=[]),this[Q].push(t)}stopListening(t,e,s){if(!t&&this[Q]){for(const t of this[Q])this[t]=this[t][H];delete this[Q]}super.stopListening(t,e,s)}[G];[Q];[Y];[K]}:X}function tt(t){t[G]||(Object.defineProperty(t,G,{value:new Map}),Object.defineProperty(t,K,{value:new Map}),Object.defineProperty(t,Y,{value:new Map}))}function et(...t){const e=function(...t){if(!t.length)throw new M("observable-bind-to-parse-error",null);const e={to:[]};let s;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)s.properties.push(t);else{if("object"!=typeof t)throw new M("observable-bind-to-parse-error",null);s={observable:t,properties:[]},e.to.push(s)}}),e}(...t),s=Array.from(this._bindings.keys()),n=s.length;if(!e.callback&&e.to.length>1)throw new M("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new M("observable-bind-to-extra-callback",this);var i;e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==n)throw new M("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(s[0]).callback=e.callback),i=this._observable,this._to.forEach(t=>{const e=i[K];let s;e.get(t.observable)||i.listenTo(t.observable,"change",(n,r)=>{s=e.get(t.observable)[r],s&&s.forEach(t=>{it(i,t.property)})})}),function(t){let e;t._bindings.forEach((s,n)=>{t._to.forEach(i=>{e=i.properties[s.callback?0:t._bindProperties.indexOf(n)],s.to.push([i.observable,e]),function(t,e,s,n){const i=t[K],r=i.get(s),o=r||{};o[n]||(o[n]=new Set),o[n].add(e),r||i.set(s,o)}(t._observable,s,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{it(this._observable,t)})}function st(t,e,s){if(this._bindings.size>1)throw new M("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const s=t.map(t=>[t,e]);return Array.prototype.concat.apply([],s)}(t,e),s)}function nt(t){return t.every(t=>"string"==typeof t)}function it(t,e){const s=t[Y].get(e);let n;s.callback?n=s.callback.apply(t,s.to.map(t=>t[0][t[1]])):(n=s.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=n:t.set(e,n)}function rt(t){let e=0;for(const s of t)e++;return e}function ot(t,e){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++)if(t[n]!=e[n])return n;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function at(t){return!(!t||!t[Symbol.iterator])}function ht(t){if("object"!=typeof t)return!1;if(null==t)return!1;if(null===Object.getPrototypeOf(t))return!0;if("[object Object]"!==Object.prototype.toString.call(t)){const e=t[Symbol.toStringTag];return null!=e&&(!!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable&&t.toString()===`[object ${e}]`)}let e=t;for(;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function lt(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function ct(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const dt="[object RegExp]",ft="[object String]",ut="[object Number]",gt="[object Boolean]",pt="[object Arguments]",mt="[object Symbol]",bt="[object Date]",_t="[object Map]",yt="[object Set]",wt="[object Array]",vt="[object ArrayBuffer]",Pt="[object Object]",xt="[object DataView]",St="[object Uint8Array]",At="[object Uint8ClampedArray]",Ot="[object Uint16Array]",kt="[object Uint32Array]",Rt="[object Int8Array]",Nt="[object Int16Array]",Et="[object Int32Array]",Mt="[object Float32Array]",Tt="[object Float64Array]";function Bt(t){return null==t||"object"!=typeof t&&"function"!=typeof t}function Ct(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function It(t,e,s,n=new Map,i=void 0){const r=i?.(t,e,s,n);if(null!=r)return r;if(Bt(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const e=new Array(t.length);n.set(t,e);for(let r=0;r<t.length;r++)e[r]=It(t[r],r,s,n,i);return Object.hasOwn(t,"index")&&(e.index=t.index),Object.hasOwn(t,"input")&&(e.input=t.input),e}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const e=new RegExp(t.source,t.flags);return e.lastIndex=t.lastIndex,e}if(t instanceof Map){const e=new Map;n.set(t,e);for(const[r,o]of t)e.set(r,It(o,r,s,n,i));return e}if(t instanceof Set){const e=new Set;n.set(t,e);for(const r of t)e.add(It(r,void 0,s,n,i));return e}if("undefined"!=typeof Buffer&&Buffer.isBuffer(t))return t.subarray();if(Ct(t)){const e=new(Object.getPrototypeOf(t).constructor)(t.length);n.set(t,e);for(let r=0;r<t.length;r++)e[r]=It(t[r],r,s,n,i);return e}if(t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const e=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,e),Ft(e,t,s,n,i),e}if("undefined"!=typeof File&&t instanceof File){const e=new File([t],t.name,{type:t.type});return n.set(t,e),Ft(e,t,s,n,i),e}if(t instanceof Blob){const e=new Blob([t],{type:t.type});return n.set(t,e),Ft(e,t,s,n,i),e}if(t instanceof Error){const e=new t.constructor;return n.set(t,e),e.message=t.message,e.name=t.name,e.stack=t.stack,e.cause=t.cause,Ft(e,t,s,n,i),e}if("object"==typeof t&&function(t){switch(ct(t)){case pt:case wt:case vt:case xt:case gt:case bt:case Mt:case Tt:case Rt:case Nt:case Et:case _t:case ut:case Pt:case dt:case yt:case ft:case mt:case St:case At:case Ot:case kt:return!0;default:return!1}}(t)){const e=Object.create(Object.getPrototypeOf(t));return n.set(t,e),Ft(e,t,s,n,i),e}return t}function Ft(t,e,s=t,n,i){const r=[...Object.keys(e),...lt(e)];for(let o=0;o<r.length;o++){const a=r[o],h=Object.getOwnPropertyDescriptor(t,a);(null==h||h.writable)&&(t[a]=It(e[a],a,s,n,i))}}function Jt(t,e){return function(t,e){return It(t,void 0,t,new Map,e)}(t,(s,n,i,r)=>{const o=e?.(s,n,i,r);if(null!=o)return o;if("object"==typeof t)switch(Object.prototype.toString.call(t)){case ut:case ft:case gt:{const e=new t.constructor(t?.valueOf());return Ft(e,t),e}case pt:{const e={};return Ft(e,t),e.length=t.length,e[Symbol.iterator]=t[Symbol.iterator],e}default:return}})}function Vt(t){return"object"==typeof t&&null!==t}function qt(t){return Array.isArray(t)?t:[t]}function Dt(t){return Jt(t)}function jt(t){return"__proto__"===t}function Lt(t){return null!==t&&"object"==typeof t&&"[object Arguments]"===ct(t)}function $t(t){return Ct(t)}function zt(t,e,s,n){if(Bt(t)&&(t=Object(t)),null==e||"object"!=typeof e)return t;if(n.has(e))return function(t){if(Bt(t))return t;if(Array.isArray(t)||Ct(t)||t instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),s=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new s(t);if(t instanceof RegExp){const e=new s(t);return e.lastIndex=t.lastIndex,e}if(t instanceof DataView)return new s(t.buffer.slice(0));if(t instanceof Error){const e=new s(t.message);return e.stack=t.stack,e.name=t.name,e.cause=t.cause,e}if("undefined"!=typeof File&&t instanceof File)return new s([t],t.name,{type:t.type,lastModified:t.lastModified});if("object"==typeof t){const s=Object.create(e);return Object.assign(s,t)}return t}(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]=e[t]??void 0}const i=[...Object.keys(e),...lt(e)];for(let r=0;r<i.length;r++){const o=i[r];if(jt(o))continue;let a=e[o],h=t[o];if(Lt(a)&&(a={...a}),Lt(h)&&(h={...h}),"undefined"!=typeof Buffer&&Buffer.isBuffer(a)&&(a=Dt(a)),Array.isArray(a))if("object"==typeof h&&null!=h){const t=[],e=Reflect.ownKeys(h);for(let s=0;s<e.length;s++){const n=e[s];t[n]=h[n]}h=t}else h=[];const l=s(h,a,o,t,e,n);null!=l?t[o]=l:Array.isArray(a)||Vt(h)&&Vt(a)?t[o]=zt(h,a,s,n):null==h&&ht(a)?t[o]=zt({},a,s,n):null==h&&$t(a)?t[o]=Dt(a):void 0!==h&&void 0===a||(t[o]=a)}return t}function Wt(){}function Ut(t,...e){return function(t,...e){const s=e.slice(0,-1),n=e[e.length-1];let i=t;for(let t=0;t<s.length;t++)i=zt(i,s[t],n,new Map);return i}(t,...e,Wt)}A.window.CKEDITOR_TRANSLATIONS||(A.window.CKEDITOR_TRANSLATIONS={});class Gt extends(V()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const s=at(t);if(s||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new M("collection-add-item-invalid-index",this);let s=0;for(const n of t){const t=this._getItemIdBeforeAdding(n),i=e+s;this._items.splice(i,0,n),this._itemMap.set(t,n),this.fire("add",n,i),s++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new M("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,s]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:s}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new M("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,s=(s,n,i)=>{const r=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(n);if(r&&o)this._bindToExternalToInternalMap.set(n,o),this._bindToInternalToExternalMap.set(o,n);else{const s=t(n);if(!s)return void this._skippedIndexesFromExternal.push(i);let r=i;for(const t of this._skippedIndexesFromExternal)i>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(n,s),this._bindToInternalToExternalMap.set(s,n),this.add(s,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)s(0,t,e.getIndex(t));this.listenTo(e,"add",s),this.listenTo(e,"remove",(t,e,s)=>{const n=this._bindToExternalToInternalMap.get(e);n&&this.remove(n),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(s<e&&t.push(e-1),s>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let s;if(e in t){if(s=t[e],"string"!=typeof s)throw new M("collection-add-invalid-id",this);if(this.get(s))throw new M("collection-add-item-already-exists",this)}else t[e]=s=R();return s}_remove(t){let e,s,n,i=!1;const r=this._idProperty;if("string"==typeof t?(s=t,n=this._itemMap.get(s),i=!n,n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,n=this._items[e],i=!n,n&&(s=n[r])):(n=t,s=n[r],e=this._items.indexOf(n),i=-1==e||!this._itemMap.get(s)),i)throw new M("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(s);const o=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(o),this.fire("remove",n,e),[n,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Kt(t){return at(t)?new Map(t):function(t){const e=new Map;for(const s in t)e.set(s,t[s]);return e}(t)}function Yt(t,e,s){const n=t.length,i=e.length;for(let e=n-1;e>=s;e--)t[e+i]=t[e];for(let n=0;n<i;n++)t[s+n]=e[n]}new Set,s(74794),s(1383),s(56372),s(59281),s(65327),s(82090),s(53378),s(55237),s(15343),s(73372),s(87509),s(13080),s(19969),s(35049),s(20799),s(74495),s(24783),s(4769),s(29514),s(20025),s(85257),s(36),s(95987),s(58262),s(58061),s(61211),s(17592),s(93162),s(31006),s(67792),s(25414),s(8511),s(65226),s(68812),s(16720),s(87527),s(73298),s(95560),s(22843),s(67138),s(10636),s(18254),s(75493),s(51593),s(92191),s(9065),s(62987),s(52237),s(54211),s(65414),s(3945),s(29673),s(64234),s(957),s(85256),s(66764),s(32227),s(41028),s(18364),s(52769),s(3930),s(41120),s(29502),s(28992),s(90305),s(84717),s(18909),s(63854),s(25206),s(11910),s(95116),s(92322),s(8811),s(99030),s(41053),s(29388),s(39819),s(41640),s(27935),s(44953),s(79306),s(48123),s(86772),s(8405),s(88118),s(65274),s(45013),s(2697),s(4352),s(65209),s(14533),s(16265),s(23744),s(68082),s(1732),s(8674),s(71633),s(37974),s(48554),s(74572),s(74506),s(55783),s(79428),s(46072),s(95224),s(96935),s(19354),s(22294),s(13452),s(66653),s(48151),s(55571),s(25477),s(97978),s(37148),s(98820),s(89402),s(7170),s(38978),s(40657),s(17773),s(45495),s(7603),s(85387),s(39692),s(34419),s(76022),s(75055),s(86515),s(17206),s(73477),s(63579),s(81353),s(4497),s(58497),s(59950),s(197),s(29629),s(53783),s(1270),s(69414),s(26291),s(12035),s(90372),s(54497),s(72379),s(44376),s(59656),s(54278),s(11129),s(66605),s(34699),s(59739),s(74262),s(13906),s(81303),s(20242),s(60246),s(7790);var Qt=s(97044);s(25738),s(85204),s(85248),s(22736),s(10465),s(39036),s(99889),s(79037),s(21145),s(68172),s(73562),s(26279),s(93602),s(18301),s(25838),s(20551),s(58389),s(2386),s(83035),s(10780),s(19705),s(23814),s(69997),s(51456),s(54120),s(57801),s(15487),s(98124),s(94510),s(35486),s(59988),s(44187),s(17447),s(72244),s(81690),s(76691),s(77974),s(932),s(64243),s(33691),s(71564),s(87811),s(86627),s(52759),s(90214),s(66848),new WeakMap;class Ht{is(){throw new Error("is() method is abstract")}}class Xt extends(V(Ht)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new M("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=ot(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s),this.parent&&this.parent._fireChange(t,e,s)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}Xt.prototype.is=function(t){return"node"===t||"view:node"===t};class Zt extends Xt{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Zt&&(this===t||this.data===t.data)}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new Zt(this.document,this.data)}}Zt.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class te extends Ht{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.data.length)throw new M("view-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.data.length)throw new M("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let s=t.includeSelf?this.textNode:this.parent;for(;null!==s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}}function ee(t,e,s){if("string"!=typeof e)for(const n of e)Array.isArray(n)?t.push(n):t.push(s?[s,n]:[n]);else t.push(s?[s,e]:[e])}te.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class se{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const s=this._isElementMatching(e,t);if(s)return{element:e,pattern:t,match:s}}return null}matchAll(...t){const e=[];for(const s of t)for(const t of this._patterns){const n=this._isElementMatching(s,t);n&&e.push({element:s,pattern:t,match:n})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const s=e(t);return s&&"object"==typeof s?function(t){const e=[];return"attributes"in t&&t.attributes&&ee(e,t.attributes),"classes"in t&&t.classes&&ee(e,t.classes,"class"),"styles"in t&&t.styles&&ee(e,t.styles,"style"),{name:t.name||!1,attributes:e}}(s):s}const s={};if(e.name&&(s.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!s.name))return null;const n=[];return e.attributes&&!function(t,e,s){let n;return"object"!=typeof t||t instanceof RegExp||Array.isArray(t)?n=["class","style"]:(void 0!==t.style&&T("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&T("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(ie(t),s,n)}(e.attributes,t,n)||e.classes&&!function(t,e,s){return e._collectAttributesMatch(ie(t,"class"),s)}(e.classes,t,n)||e.styles&&!function(t,e,s){return e._collectAttributesMatch(ie(t,"style"),s)}(e.styles,t,n)?null:(n.length&&(s.attributes=n),s)}}function ne(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function ie(t,e){if(Array.isArray(t))return t.map(t=>"object"!=typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||T("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!=typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const s=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.push(e?[e,n,t[n]]:[n,t[n]]);return s}function re(t){return"string"==typeof t||"symbol"==typeof t?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}function oe(t){const e=[],s=t.length;if(0===s)return e;let n=0,i="",r="",o=!1;for(46===t.charCodeAt(0)&&(e.push(""),n++);n<s;){const a=t[n];r?"\\"===a&&n+1<s?(n++,i+=t[n]):a===r?r="":i+=a:o?'"'===a||"'"===a?r=a:"]"===a?(o=!1,e.push(i),i=""):i+=a:"["===a?(o=!0,i&&(e.push(i),i="")):"."===a?i&&(e.push(i),i=""):i+=a,n++}return i&&e.push(i),e}function ae(t,e,s){if(null==t)return s;switch(typeof e){case"string":{if(jt(e))return s;const n=t[e];return void 0===n?function(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}(e)?ae(t,oe(e),s):s:n}case"number":case"symbol":{"number"==typeof e&&(e=re(e));const n=t[e];return void 0===n?s:n}default:{if(Array.isArray(e))return function(t,e,s){if(0===e.length)return s;let n=t;for(let t=0;t<e.length;t++){if(null==n)return s;if(jt(e[t]))return s;n=n[e[t]]}return void 0===n?s:n}(t,e,s);if(jt(e=Object.is(e?.valueOf(),-0)?"-0":String(e)))return s;const n=t[e];return void 0===n?s:n}}}function he(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}const le=(t,e,s)=>{const n=t[e];Object.hasOwn(t,e)&&he(n,s)&&(void 0!==s||e in t)||(t[e]=s)},ce=/^(?:0|[1-9]\d*)$/;function de(t,e=Number.MAX_SAFE_INTEGER){switch(typeof t){case"number":return Number.isInteger(t)&&t>=0&&t<e;case"symbol":return!1;case"string":return ce.test(t)}}const fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ue=/^\w*$/;function ge(t,e,s,n){if(null==t&&!U(t))return t;const i=(r=e,o=t,!Array.isArray(r)&&("number"==typeof r||"boolean"==typeof r||null==r||function(t){return"symbol"==typeof t||t instanceof Symbol}(r)||"string"==typeof r&&(ue.test(r)||!fe.test(r))||null!=o&&Object.hasOwn(o,r))?[e]:Array.isArray(e)?e:"string"==typeof e?oe(e):[e]);var r,o;let a=t;for(let e=0;e<i.length&&null!=a;e++){const r=re(i[e]);if(jt(r))continue;let o;if(e===i.length-1)o=s(a[r]);else{const s=a[r],h=n?.(s,r,t);o=void 0!==h?h:U(s)?s:de(i[e+1])?[]:{}}le(a,r,o),a=a[r]}return t}function pe(t,e,s){return ge(t,e,()=>s,()=>{})}class me{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=function(t){let e=null,s=0,n=0,i=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(null===e)switch(a){case":":i||(i=t.substr(s,o-s),n=o+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(n,o-n);i&&r.set(i.trim(),e.trim()),i=null,s=o+1;break}}else a===e&&(e=null)}return r}(t);for(const[t,s]of e)this._styleProcessor.toNormalizedForm(t,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,U(t))for(const[e,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const s of qt(t)){const t=be(s),n=ae(this._styles,t);if(n)_e(e,t,n);else{const t=this.getAsString(s);void 0!==t&&this._styleProcessor.toNormalizedForm(s,t,e)}}Object.keys(e).length&&(ye(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!U(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const s of e)t.push(...this._styleProcessor.getReducedForm(s,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const s=[];for(const n of this.getStyleNames(!0))if(ne(t,n)){if(!0===e){s.push(n);continue}ne(e,this.getAsString(n))&&s.push(n)}return s.length?s:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s)}else for(const t of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s);e.push(t)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}function be(t){return t.replace("-",".")}function _e(t,e,s){let n=s;U(s)&&(n=Ut({},ae(t,e),s)),pe(t,e,n)}function ye(t,e){for(const s of Object.keys(e))null===t[s]||Array.isArray(t[s])||"object"!=typeof t[s]||"object"!=typeof e[s]?delete t[s]:(ye(t[s],e[s]),Object.keys(t[s]).length||delete t[s])}class we{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of qt(t))e&&this._set.add(e)}remove(t){for(const e of qt(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const s of t.split(/\s+/)){if(!this._set.has(s))return;e.push(s)}return e}for(const s of this._set.keys())s.match(t)&&e.push(s);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class ve extends Xt{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,s,n){super(t),this.name=e,this._attrs=this._parseAttributes(s),this._children=[],n&&this._insertChild(0,n)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(xe(this.name,t)||Pe(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof ve))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,s]of this._attrs){const n=t._attrs.get(e);if(void 0===n)return!1;if("string"==typeof s||"string"==typeof n){if(n!==s)return!1}else if(!s.isSimilar(n))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new se(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(e.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==s?"":` ${s}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=[];if(t)for(const s of this.getChildren())e.push(s._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,e);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){if("string"==typeof e)return[new Zt(t,e)];at(e)||(e=[e]);const s=[];for(const n of e)"string"==typeof n?s.push(new Zt(t,n)):n instanceof te?s.push(new Zt(t,n.data)):s.push(n);return s}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,s=!0){if(this._fireChange("attributes",this),xe(this.name,t)||Pe(this.name,t)){let n=this._attrs.get(t);n||(n=xe(this.name,t)?new me(this.document.stylesProcessor):new we,this._attrs.set(t,n)),s?n.setTo(String(e)):xe(this.name,t)?Array.isArray(e)?n.set(e[0],e[1]):n.set(e):n.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(xe(this.name,t)||Pe(this.name,t))){const s=this._attrs.get(t);return!!s&&(Pe(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),s.remove(e),!!s.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,s){for(const[n,i,r]of t){let t=!1,o=!1;for(const[a,h]of this._attrs)if(!(s&&s.includes(a)||!ne(n,a)))if(t=!0,"string"==typeof h){if(ne(i,h))e.push([a]),o=!0;else if(!(n instanceof RegExp))return!1}else{const t=h._getTokensMatch(i,r||!0);if(t){o=!0;for(const s of t)e.push([a,s])}else if(!(n instanceof RegExp))return!1}if(!t||!o)return!1}return!0}_getConsumables(t,e){const s=[];if(t){const n=this._attrs.get(t);if(void 0!==n)if("string"==typeof n)s.push([t]);else for(const i of n._getConsumables(e))s.push([t,i])}else for(const[t,e]of this._attrs)if("string"==typeof e)s.push([t]);else for(const n of e._getConsumables())s.push([t,n]);return{name:!t,attributes:s}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._canMergeFrom(s))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof s?this._setAttribute(e,s):t._mergeFrom(s)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._isMatching(s))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof s?this._attrs.delete(e):(t.remove(s.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=Kt(t);for(const[t,s]of e)if(null===s)e.delete(t);else if(xe(this.name,t)){const n=s instanceof me?s._clone():new me(this.document.stylesProcessor).setTo(String(s));e.set(t,n)}else if(Pe(this.name,t)){const n=s instanceof we?s._clone():(new we).setTo(String(s));e.set(t,n)}else"string"!=typeof s&&e.set(t,String(s));return e}}function Pe(t,e){return"class"==e||"a"==t&&"rel"==e}function xe(t,e){return"style"==e}ve.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Se extends ve{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ae}toJSON(){const t=super.toJSON();return t.type="ContainerElement",t}}function Ae(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}Se.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Oe extends(Z(Se)){constructor(t,e,s,n){super(t,e,s,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const t=super.toJSON();return t.type="EditableElement",t.isReadOnly=this.isReadOnly,t.isFocused=this.isFocused,t}}Oe.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const ke=Symbol("rootName");(class extends Oe{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(ke)}set rootName(t){this._setCustomProperty(ke,t)}toJSON(){return this.rootName}set _name(t){this.name=t}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Re{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new M("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new M("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=Ne._createAt(t.startPosition):this._position=Ne._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s;do{s=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=s)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&t.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let n;if(s&&s.is("view:$text")){if(t.isAtEnd)return this._position=Ne._createAfter(s),this._next();n=s.data[t.offset]}else n=s.getChild(t.offset);if("string"==typeof n){let n;n=this.singleCharacters?1:(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-t.offset;const i=new te(s,t.offset,n);return t.offset+=n,this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new Ne(n,0);return this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new Ne(n,0),this._position=t,this._next();let s,i=n.data.length;return n==this._boundaryEndParent?(i=this.boundaries.end.offset,s=new te(n,0,i),t=Ne._createAfter(s)):(s=new te(n,0,n.data.length),t.offset++),this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=Ne._createAfter(s),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,t)}_previous(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&0===t.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let n;if(s.is("view:$text")){if(t.isAtStart)return this._position=Ne._createBefore(s),this._previous();n=s.data[t.offset-1]}else n=s.getChild(t.offset-1);if("string"==typeof n){let n;if(this.singleCharacters)n=1;else{const e=s===this._boundaryStartParent?this.boundaries.start.offset:0;n=t.offset-e}t.offset-=n;const i=new te(s,t.offset,n);return this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new Ne(n,n.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new Ne(n,n.data.length),this._position=t,this._previous();let s,i=n.data.length;if(n==this._boundaryStartParent){const e=this.boundaries.start.offset;s=new te(n,e,n.data.length-e),i=s.data.length,t=Ne._createBefore(s)}else s=new te(n,0,n.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=Ne._createBefore(s),this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}_formatReturnValue(t,e,s,n,i){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?s=Ne._createAfter(e.textNode):(n=Ne._createAfter(e.textNode),this._position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?s=Ne._createBefore(e.textNode):(n=Ne._createBefore(e.textNode),this._position=n))),{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}}class Ne extends Ht{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof Oe);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=Ne._createAt(this),s=e.offset+t;return e.offset=s<0?0:s,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new Re(e);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),s.push(t.offset);const n=ot(e,s);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<s[n]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new Re(t)}clone(){return new Ne(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,e){if(t instanceof Ne)return new this(t.parent,t.offset);{const s=t;if("end"==e)e=s.is("$text")?s.data.length:s.childCount;else{if("before"==e)return this._createBefore(s);if("after"==e)return this._createAfter(s);if(0!==e&&!e)throw new M("view-createpositionat-offset-required",s)}return new Ne(s,e)}}static _createAfter(t){if(t.is("$textProxy"))return new Ne(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new M("view-position-after-root",t,{root:t});return new Ne(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new Ne(t.textNode,t.offsetInText);if(!t.parent)throw new M("view-position-before-root",t,{root:t});return new Ne(t.parent,t.index)}}Ne.prototype.is=function(t){return"position"===t||"view:position"===t};class Ee extends Ht{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new Re({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(Me,{direction:"backward"}),e=this.end.getLastMatchingPosition(Me);return t.parent.is("$text")&&t.isAtStart&&(t=Ne._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=Ne._createAfter(e.parent)),new Ee(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(Me);if(t.isAfter(this.end)||t.isEqual(this.end))return new Ee(t,t);let e=this.end.getLastMatchingPosition(Me,{direction:"backward"});const s=t.nodeAfter,n=e.nodeBefore;return s&&s.is("$text")&&(t=new Ne(s,0)),n&&n.is("$text")&&(e=new Ne(n,n.data.length)),new Ee(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ee(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ee(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Ee(e,s)}return null}getWalker(t={}){return t.boundaries=this,new Re(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Ee(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Re(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new Re(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,e,s,n){return new this(new Ne(t,e),new Ne(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(Ne._createBefore(t),e)}}function Me(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}Ee.prototype.is=function(t){return"range"===t||"view:range"===t};class Te extends(V(Ht)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=rt(this.getRanges());if(e!=rt(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let s=!1;for(let n of t.getRanges())if(n=n.getTrimmed(),e.start.isEqual(n.start)&&e.end.isEqual(n.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]),this._setFakeOptions(n);else if(e instanceof Te||e instanceof Be)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Ee)this._setRanges([e],n&&n.backward),this._setFakeOptions(n);else if(e instanceof Ne)this._setRanges([new Ee(e)]),this._setFakeOptions(n);else if(e instanceof Xt){const t=!!n&&!!n.backward;let i;if(void 0===s)throw new M("view-selection-setto-required-second-parameter",this);i="in"==s?Ee._createIn(e):"on"==s?Ee._createOn(e):new Ee(Ne._createAt(e,s)),this._setRanges([i],t),this._setFakeOptions(n)}else{if(!at(e))throw new M("view-selection-setto-not-selectable",this);this._setRanges(e,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new M("view-selection-setfocus-no-ranges",this);const s=Ne._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.pop(),"before"==s.compareWith(n)?this._addRange(new Ee(s,n),!0):this._addRange(new Ee(n,s)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof Ee))throw new M("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new M("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new Ee(t.start,t.end))}}Te.prototype.is=function(t){return"selection"===t||"view:selection"===t};class Be extends(V(Ht)){_selection;constructor(...t){super(),this._selection=new Te,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}Be.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t},Symbol("bubblingEmitter"),Symbol("bubblingCallbacks"),Symbol("bubblingContexts");function Ce(){if(Ie(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(Ie(t)>1)return null;t=t.parent}return!t||Ie(t)>1?null:this.childCount}function Ie(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}(class extends ve{static DEFAULT_PRIORITY=10;_priority=10;_id=null;_clonesGroup=null;constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ce}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new M("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}).prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Fe(){return null}(class extends ve{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Fe}toJSON(){const t=super.toJSON();return t.type="EmptyElement",t}_insertChild(t,e){if(e&&(e instanceof Xt||Array.from(e).length>0))throw new M("view-emptyelement-cannot-add",[this,e]);return 0}}).prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Je(){return null}(class extends ve{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Je}_insertChild(t,e){if(e&&(e instanceof Xt||Array.from(e).length>0))throw new M("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}toJSON(){const t=super.toJSON();return t.type="UIElement",t}}).prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Ve(){return null}(class extends ve{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ve}toJSON(){const t=super.toJSON();return t.type="RawElement",t}_insertChild(t,e){if(e&&(e instanceof Xt||Array.from(e).length>0))throw new M("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}).prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class qe extends(V(Ht)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){return"string"==typeof e?[new Zt(t,e)]:(at(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new Zt(t,e):e instanceof te?new Zt(t,e.data):e))}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}qe.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};function De(t){if(!t||"object"!=typeof t)return!1;const e=Object.getPrototypeOf(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e))&&"[object Object]"===Object.prototype.toString.call(t)}function je(t,e,s,n,i,r,o){const a=o(t,e,s,n,i,r);if(void 0!==a)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return t===e;case"number":return t===e||Object.is(t,e);case"object":return Le(t,e,r,o)}return Le(t,e,r,o)}function Le(t,e,s,n){if(Object.is(t,e))return!0;let i=ct(t),r=ct(e);if(i===pt&&(i=Pt),r===pt&&(r=Pt),i!==r)return!1;switch(i){case ft:return t.toString()===e.toString();case ut:return he(t.valueOf(),e.valueOf());case gt:case bt:case mt:return Object.is(t.valueOf(),e.valueOf());case dt:return t.source===e.source&&t.flags===e.flags;case"[object Function]":return t===e}const o=(s=s??new Map).get(t),a=s.get(e);if(null!=o&&null!=a)return o===e;s.set(t,e),s.set(e,t);try{switch(i){case _t:if(t.size!==e.size)return!1;for(const[i,r]of t.entries())if(!e.has(i)||!je(r,e.get(i),i,t,e,s,n))return!1;return!0;case yt:{if(t.size!==e.size)return!1;const i=Array.from(t.values()),r=Array.from(e.values());for(let o=0;o<i.length;o++){const a=i[o],h=r.findIndex(i=>je(a,i,void 0,t,e,s,n));if(-1===h)return!1;r.splice(h,1)}return!0}case wt:case St:case At:case Ot:case kt:case"[object BigUint64Array]":case Rt:case Nt:case Et:case"[object BigInt64Array]":case Mt:case Tt:if("undefined"!=typeof Buffer&&Buffer.isBuffer(t)!==Buffer.isBuffer(e))return!1;if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!je(t[i],e[i],i,t,e,s,n))return!1;return!0;case vt:return t.byteLength===e.byteLength&&Le(new Uint8Array(t),new Uint8Array(e),s,n);case xt:return t.byteLength===e.byteLength&&t.byteOffset===e.byteOffset&&Le(new Uint8Array(t),new Uint8Array(e),s,n);case"[object Error]":return t.name===e.name&&t.message===e.message;case Pt:{if(!(Le(t.constructor,e.constructor,s,n)||De(t)&&De(e)))return!1;const i=[...Object.keys(t),...lt(t)],r=[...Object.keys(e),...lt(e)];if(i.length!==r.length)return!1;for(let r=0;r<i.length;r++){const o=i[r],a=t[o];if(!Object.hasOwn(e,o))return!1;if(!je(a,e[o],o,t,e,s,n))return!1}return!0}default:return!1}}finally{s.delete(t),s.delete(e)}}"".repeat(7),(t=>{const e=t.createElement("br");e.dataset.ckeFiller="true"})(A.document),A.document.createTextNode(""),(t=>{const e=t.createElement("span");e.dataset.ckeFiller="true",e.innerText=""})(A.document);class $e{is(){throw new Error("is() method is abstract")}}class ze extends $e{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new M("model-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.offsetSize)throw new M("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ze.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class We{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new M("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new M("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=Ge._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s,n,i;do{n=this.position,i=this._visitedParent,({done:e,value:s}=this.next())}while(!e&&t(s));e||(this._position=n,this._visitedParent=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const n=Ke(e,s),i=n||Ye(e,s,n);if(i&&i.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=i;return this._position=e,Ue("elementStart",i,t,e,1)}if(i&&i.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=i.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),n=t-e.offset}const r=e.offset-i.startOffset,o=new ze(i,r,n);return e.offset+=n,this._position=e,Ue("text",o,t,e,n)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():Ue("elementEnd",s,t,e)}_previous(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&0===e.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const n=e.parent,i=Ke(e,n),r=i||Qe(e,n,i);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,Ue("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():Ue("elementEnd",r,t,e));if(r&&r.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=r.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),n=e.offset-t}const i=e.offset-r.startOffset,o=new ze(r,i-n,n);return e.offset-=n,this._position=e,Ue("text",o,t,e,n)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,Ue("elementStart",s,t,e,1)}}function Ue(t,e,s,n,i){return{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}class Ge extends $e{root;path;stickiness;constructor(t,e,s="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new M("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new M("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new M("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new M("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ke(this,this.parent)}get nodeAfter(){const t=this.parent;return Ye(this,t,Ke(this,t))}get nodeBefore(){const t=this.parent;return Qe(this,t,Ke(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=ot(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new We(e);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=ot(this.path,t.path),s="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,s)}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}getShiftedBy(t){const e=this.clone(),s=e.offset+t;return e.offset=s<0?0:s,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let s=0;s<e;s++){const e=this.path[s]-t.path[s];if(e<-1||e>1)return!1;if(1===e)return He(t,this,s);if(-1===e)return He(this,t,s)}return this.path.length===t.path.length||(this.path.length>t.path.length?Xe(this.path,e):Xe(t.path,e))}hasSameParentAs(t){return this.root===t.root&&"same"==ot(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Ge._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let s;return e.containsPosition(this)||e.start.isEqual(this)?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):s=this.isEqual(t.deletionPosition)?Ge._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,e){const s=Ge._createAt(this);if(this.root!=t.root)return s;if("same"==ot(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;s.offset-=e}}else if("prefix"==ot(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n])return null;s.path[n]-=e}}return s}_getTransformedByInsertion(t,e){const s=Ge._createAt(this);if(this.root!=t.root)return s;if("same"==ot(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(s.offset+=e);else if("prefix"==ot(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;t.offset<=this.path[n]&&(s.path[n]+=e)}return s}_getTransformedByMove(t,e,s){if(e=e._getTransformedByDeletion(t,s),t.isEqual(e))return Ge._createAt(this);const n=this._getTransformedByDeletion(t,s);return null===n||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(s).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):n._getTransformedByInsertion(e,s)}_getCombined(t,e){const s=t.path.length-1,n=Ge._createAt(e);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[s]-t.offset,n.path=[...n.path,...this.path.slice(s+1)],n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,s="toNone"){if(t.is("model:position"))return new Ge(t.root,t.path,t.stickiness);{const n=t;if("end"==e)e=n.maxOffset;else{if("before"==e)return this._createBefore(n,s);if("after"==e)return this._createAfter(n,s);if(0!==e&&!e)throw new M("model-createpositionat-offset-required",[this,t])}if(!n.is("element")&&!n.is("documentFragment"))throw new M("model-position-parent-incorrect",[this,t]);const i=n.getPath();return i.push(e),new this(n.root,i,s)}}static _createAfter(t,e){if(!t.parent)throw new M("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new M("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const s=new Ge(e.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!e.getRoot(t.root))throw new M("model-position-fromjson-no-root",e,{rootName:t.root});return new Ge(e.getRoot(t.root),t.path,t.stickiness)}}function Ke(t,e){const s=e.getChildAtOffset(t.offset);return s&&s.is("$text")&&s.startOffset<t.offset?s:null}function Ye(t,e,s){return null!==s?null:e.getChildAtOffset(t.offset)}function Qe(t,e,s){return null!==s?null:e.getChild(e.offsetToIndex(t.offset)-1)}function He(t,e,s){return s+1!==t.path.length&&!!Xe(e.path,s+1)&&!!function(t,e){let s=t.parent,n=t.path.length-1,i=0;for(;n>=e;){if(t.path[n]+i!==s.maxOffset)return!1;i=1,n--,s=s.parent}return!0}(t,s+1)}function Xe(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}Ge.prototype.is=function(t){return"position"===t||"model:position"===t};class Ze extends $e{start;end;constructor(t,e){super(),this.start=Ge._createAt(t),this.end=e?Ge._createAt(e):Ge._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new We({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==ot(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}containsItem(t){const e=Ge._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ze(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ze(t.end,this.end))):e.push(new Ze(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Ze(e,s)}return null}getJoined(t,e=!1){let s=this.isIntersecting(t);if(s||(s=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let n=this.start,i=this.end;return t.start.isBefore(n)&&(n=t.start),t.end.isAfter(i)&&(i=t.end),new Ze(n,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,s=Ge._createAt(this.start);let n=s.parent;for(;s.path.length>e+1;){const e=n.maxOffset-s.offset;0!==e&&t.push(new Ze(s,s.getShiftedBy(e))),s.path=s.path.slice(0,-1),s.offset++,n=n.parent}for(;s.path.length<=this.end.path.length;){const e=this.end.path[s.path.length-1],n=e-s.offset;0!==n&&t.push(new Ze(s,s.getShiftedBy(n))),s.offset=e,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new We(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new We(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new We(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Ze(this.start,this.end)]}getTransformedByOperations(t){const e=[new Ze(this.start,this.end)];for(const s of t)for(let t=0;t<e.length;t++){const n=e[t].getTransformedByOperation(s);e.splice(t,1,...n),t+=n.length-1}for(let t=0;t<e.length;t++){const s=e[t];for(let n=t+1;n<e.length;n++){const t=e[n];(s.containsRange(t)||t.containsRange(s)||s.isEqual(t))&&e.splice(n,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const s=t.sourcePosition,n=t.howMany,i=t.targetPosition;return this._getTransformedByMove(s,i,n,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),e.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Ze(e,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Ze(this.start);let e=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return e.root!=s.root&&(s=this.end.getShiftedBy(-1)),e.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Ge._createAt(s),e.offset=0):(t.deletionPosition.isEqual(e)||(s=t.deletionPosition),e=t.targetPosition),new Ze(e,s)):new Ze(e,s)}_getTransformedByInsertion(t,e,s=!1){if(s&&this.containsPosition(t))return[new Ze(this.start,t),new Ze(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const s=new Ze(this.start,this.end);return s.start=s.start._getTransformedByInsertion(t,e),s.end=s.end._getTransformedByInsertion(t,e),[s]}}_getTransformedByMove(t,e,s,n=!1){if(this.isCollapsed){const n=this.start._getTransformedByMove(t,e,s);return[new Ze(n)]}const i=Ze._createFromPositionAndShift(t,s),r=e._getTransformedByDeletion(t,s);if(this.containsPosition(e)&&!n&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const n=this.start._getTransformedByMove(t,e,s),i=this.end._getTransformedByMove(t,e,s);return[new Ze(n,i)]}let o;const a=this.getDifference(i);let h=null;const l=this.getIntersection(i);if(1==a.length?h=new Ze(a[0].start._getTransformedByDeletion(t,s),a[0].end._getTransformedByDeletion(t,s)):2==a.length&&(h=new Ze(this.start,this.end._getTransformedByDeletion(t,s))),o=h?h._getTransformedByInsertion(r,s,null!==l||n):[],l){const t=new Ze(l.start._getCombined(i.start,r),l.end._getCombined(i.start,r));2==o.length?o.splice(1,0,t):o.push(t)}return o}_getTransformedByDeletion(t,e){let s=this.start._getTransformedByDeletion(t,e),n=this.end._getTransformedByDeletion(t,e);return null==s&&null==n?null:(null==s&&(s=t),null==n&&(n=t),new Ze(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return new this(Ge._createAt(t,0),Ge._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Ge._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new M("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const s=t.indexOf(e),n=new this(e.start,e.end);for(let e=s-1;e>=0&&t[e].end.isEqual(n.start);e--)n.start=Ge._createAt(t[e].start);for(let e=s+1;e<t.length&&t[e].start.isEqual(n.end);e++)n.end=Ge._createAt(t[e].end);return n}static fromJSON(t,e){return new this(Ge.fromJSON(t.start,e),Ge.fromJSON(t.end,e))}}Ze.prototype.is=function(t){return"range"===t||"model:range"===t};class ts extends $e{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=Kt(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=ot(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Kt(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}ts.prototype.is=function(t){return"node"===t||"model:node"===t};class es extends(V($e)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Ze(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new Ze(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new Ze(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]);else if(e instanceof es)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Ze)this._setRanges([e],!!n&&!!n.backward);else if(e instanceof Ge)this._setRanges([new Ze(e)]);else if(e instanceof ts){const t=!!n&&!!n.backward;let i;if("in"==s)i=Ze._createIn(e);else if("on"==s)i=Ze._createOn(e);else{if(void 0===s)throw new M("model-selection-setto-required-second-parameter",[this,e]);i=new Ze(Ge._createAt(e,s))}this._setRanges([i],t)}else{if(!at(e))throw new M("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,n&&!!n.backward)}}_setRanges(t,e=!1){const s=Array.from(t),n=s.some(e=>{if(!(e instanceof Ze))throw new M("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(s.length!==this._ranges.length||n)&&(this._replaceAllRanges(s),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new M("model-selection-setfocus-no-ranges",[this,t]);const s=Ge._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.length&&this._popRange(),"before"==s.compareWith(n)?(this._pushRange(new Ze(s,n)),this._lastRangeBackward=!0):(this._pushRange(new Ze(n,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const s=is(e.start,t);os(s,e)&&(yield s);const n=e.getWalker();for(const s of n){const i=s.item;"elementEnd"==s.type&&ns(i,t,e)?yield i:"elementStart"==s.type&&i.is("model:element")&&i.root.document.model.schema.isBlock(i)&&n.jumpTo(Ge._createAt(i,"end"))}const i=is(e.end,t);as(i,e)&&(yield i)}}containsEntireContent(t=this.anchor.root){const e=Ge._createAt(t,0),s=Ge._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())},e=Object.fromEntries(this.getAttributes());return Object.keys(e).length&&(t.attributes=e),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new Ze(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new M("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function ss(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function ns(t,e,s){return ss(t,e)&&rs(t,s)}function is(t,e){const s=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const r=n.find(t=>!i&&(i=s.isLimit(t),!i&&ss(t,e)));return n.forEach(t=>e.add(t)),r}function rs(t,e){const s=function(t){const e=t.root.document.model.schema;let s=t.parent;for(;s;){if(e.isBlock(s))return s;s=s.parent}}(t);return!s||!e.containsRange(Ze._createOn(s),!0)}function os(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(Ge._createAt(t,t.maxOffset))&&rs(t,e))}function as(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(Ge._createAt(t,0))&&rs(t,e))}es.prototype.is=function(t){return"selection"===t||"model:selection"===t};class hs extends(V(Ze)){constructor(t,e){super(t,e),ls.call(this)}detach(){this.stopListening()}toRange(){return new Ze(this.start,this.end)}static fromRange(t){return new hs(t.start,t.end)}}function ls(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&cs.call(this,s)},{priority:"low"})}function cs(t){const e=this.getTransformedByOperation(t),s=Ze._createFromRanges(e),n=!s.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let r=null;if(n){"$graveyard"==s.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=s.start,this.end=s.end,this.fire("change:range",e,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}hs.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class ds extends ts{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new ds(this.data,this.getAttributes())}static fromJSON(t){return new ds(t.data,t.attributes)}}ds.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const fs="selection:";(class extends(V($e)){_selection;constructor(t){super(),this._selection=new us(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return fs+t}static _isStoreAttributeKey(t){return t.startsWith(fs)}}).prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class us extends es{markers=new Gt({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&"marker"!=s.type&&"rename"!=s.type&&"noop"!=s.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,s,n)=>{this._updateMarker(e,n)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const s=t.document.differ;for(const n of s.getChanges()){if("insert"!=n.type)continue;const s=n.position.parent;n.length===s.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(s.getAttributeKeys()).filter(t=>t.startsWith(fs));for(const n of e)t.removeAttribute(n,s)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=R();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new M("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(t=>t.toJSON())),t}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new M("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=hs.fromRange(t);return e.on("change:range",(t,s,n)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=n.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const n=e.getRange();for(const s of this.getRanges())n.containsRange(s,!s.isCollapsed)&&t.push(e)}const s=Array.from(this.markers);for(const s of t)this.markers.has(s)||(this.markers.add(s),e=!0);for(const s of Array.from(this.markers))t.includes(s)||(this.markers.remove(s),e=!0);e&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,e){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let n=!1;const i=Array.from(this.markers),r=this.markers.has(t);if(e){let s=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){s=!0;break}s&&!r?(this.markers.add(t),n=!0):!s&&r&&(this.markers.remove(t),n=!0)}else r&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=Kt(this._getSurroundingAttributes()),s=Kt(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const n=[];for(const[t,e]of this.getAttributes())s.has(t)&&s.get(t)===e||n.push(t);for(const[t]of s)this.hasAttribute(t)||n.push(t);n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1})}_setAttribute(t,e,s=!0){const n=s?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,n),!0))}_removeAttribute(t,e=!0){const s=e?"normal":"low";return!("low"==s&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,s),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[e,s]of this.getAttributes())t.get(e)!==s&&this._removeAttribute(e,!1);for(const[s,n]of t)this._setAttribute(s,n,!1)&&e.add(s);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(fs)){const s=e.substr(10);yield[s,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let s=null;if(this.isCollapsed){const n=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=gs(n,e)),s||(s=gs(i,e)),!this.isGravityOverridden&&!s){let t=n;for(;t&&!s;)t=t.previousSibling,s=gs(t,e)}if(!s){let t=i;for(;t&&!s;)t=t.nextSibling,s=gs(t,e)}s||(s=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const n of t){if(n.item.is("element")&&e.isObject(n.item)){s=gs(n.item,e);break}if("text"==n.type){s=n.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function gs(t,e){if(!t)return null;if(t instanceof ze||t instanceof ds)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const s=[];for(const[n,i]of t.getAttributes())e.checkAttribute("$text",n)&&!1!==e.getAttributeProperties(n).copyFromObject&&s.push([n,i]);return s}class ps{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new M("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new M("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const s=[];for(const t of e){if(!(t instanceof ts))throw new M("model-nodelist-insertnodes-not-node",this);s.push(t)}let n=this.indexToOffset(t);Yt(this._nodes,s,t),Yt(this._offsetToNode,function(t){const e=[];let s=0;for(const n of t)for(let t=0;t<n.offsetSize;t++)e[s++]=n;return e}(s),n);for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=n,n+=this._nodes[e].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let s=this.indexToOffset(t);const n=this._nodes.splice(t,e),i=n[n.length-1],r=i.startOffset+i.offsetSize-s;this._offsetToNode.splice(s,r);for(const t of n)t._index=null,t._startOffset=null;for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=s,s+=this._nodes[e].offsetSize;return n}_removeNodesArray(t){if(0==t.length)return;for(const e of t)e._index=null,e._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t]._index=t,this._nodes[t]._startOffset=e,e+=this._nodes[t].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}class ms extends ts{name;_children=new ps;constructor(t,e,s){super(e),this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}findAncestor(t,e={}){let s=e.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?function(t){const e=[];for(const s of t)e.push(s._clone(!0));return e}(this._children):void 0;return new ms(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){if("string"==typeof t)return[new ds(t)];at(t)||(t=[t]);const e=[];for(const s of t)"string"==typeof s?e.push(new ds(s)):s instanceof ze?e.push(new ds(s.data,s.getAttributes())):e.push(s);return e}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const s of t.children)s.name?e.push(ms.fromJSON(s)):e.push(ds.fromJSON(s))}return new ms(t.name,t.attributes,e)}}ms.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;class bs{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function _s(t,e){const s=ws(e),n=s.reduce((t,e)=>t+e.offsetSize,0),i=t.parent;Ps(t);const r=t.index;return i._insertChild(r,s),vs(i,r+s.length),vs(i,r),new Ze(t,t.getShiftedBy(n))}function ys(t,e){if(!t.isFlat)throw new M("operation-utils-move-range-not-flat",this);const s=function(t){if(!t.isFlat)throw new M("operation-utils-remove-range-not-flat",this);const e=t.start.parent;Ps(t.start),Ps(t.end);const s=e._removeChildren(t.start.index,t.end.index-t.start.index);return vs(e,t.start.index),s}(t);return _s(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),s)}function ws(t){const e=[];!function t(s){if("string"==typeof s)e.push(new ds(s));else if(s instanceof ze)e.push(new ds(s.data,s.getAttributes()));else if(s instanceof ts)e.push(s);else if(at(s))for(const e of s)t(e)}(t);for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];s instanceof ds&&n instanceof ds&&xs(s,n)&&(e.splice(t-1,2,new ds(n.data+s.data,n.getAttributes())),t--)}return e}function vs(t,e){const s=t.getChild(e-1),n=t.getChild(e);if(s&&n&&s.is("$text")&&n.is("$text")&&xs(s,n)){const i=new ds(s.data+n.data,s.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function Ps(t){const e=t.textNode,s=t.parent;if(e){const n=t.offset-e.startOffset,i=e.index;s._removeChildren(i,1);const r=new ds(e.data.substr(0,n),e.getAttributes()),o=new ds(e.data.substr(n),e.getAttributes());s._insertChild(i,[r,o])}}function xs(t,e){const s=t.getAttributes(),n=e.getAttributes();for(const t of s){if(t[1]!==e.getAttribute(t[0]))return!1;n.next()}return n.next().done}class Ss extends bs{sourcePosition;howMany;targetPosition;constructor(t,e,s,n){super(n),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[Ze._createFromPositionAndShift(this.sourcePosition,this.howMany),Ze._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Ss(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Ss(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,s=this.sourcePosition.offset,n=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new M("move-operation-nodes-do-not-exist",this);if(t===e&&s<n&&n<s+this.howMany)throw new M("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==ot(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=s&&this.targetPosition.path[t]<s+this.howMany)throw new M("move-operation-node-into-itself",this)}}_execute(){ys(Ze._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const s=Ge.fromJSON(t.sourcePosition,e),n=Ge.fromJSON(t.targetPosition,e);return new this(s,t.howMany,n,t.baseVersion)}}class As extends bs{position;nodes;shouldReceiveAttributes;constructor(t,e,s){super(s),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new ps(ws(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new ps([...this.nodes].map(t=>t._clone(!0))),e=new As(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new Ge(t,[0]);return new Ss(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new M("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new ps([...t].map(t=>t._clone(!0))),_s(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const s=[];for(const e of t.nodes)e.name?s.push(ms.fromJSON(e)):s.push(ds.fromJSON(e));const n=new As(Ge.fromJSON(t.position,e),s,t.baseVersion);return n.shouldReceiveAttributes=t.shouldReceiveAttributes,n}}class Os extends bs{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=s,this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Ge(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ze(this.splitPosition,t)}get affectedSelectable(){const t=[Ze._createFromPositionAndShift(this.splitPosition,0),Ze._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Ze._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new Os(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new Ge(t,[0]);return new ks(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new M("split-operation-position-invalid",this);if(!t.parent)throw new M("split-operation-split-in-root",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new M("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new M("split-operation-graveyard-position-invalid",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)ys(Ze._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();_s(this.insertionPosition,e)}ys(new Ze(Ge._createAt(t,this.splitPosition.offset),Ge._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new Ge(t.root,e,"toPrevious")}static fromJSON(t,e){const s=Ge.fromJSON(t.splitPosition,e),n=Ge.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?Ge.fromJSON(t.graveyardPosition,e):null;return new this(s,t.howMany,n,i,t.baseVersion)}}class ks extends bs{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new Ge(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ze(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Ze._createOn(t),Ze._createFromPositionAndShift(this.targetPosition,0),Ze._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new ks(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),s=new Ge(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new Os(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new M("merge-operation-source-position-invalid",this);if(!e.parent)throw new M("merge-operation-target-position-invalid",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new M("merge-operation-how-many-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent;ys(Ze._createIn(t),this.targetPosition),ys(Ze._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const s=Ge.fromJSON(t.sourcePosition,e),n=Ge.fromJSON(t.targetPosition,e),i=Ge.fromJSON(t.graveyardPosition,e);return new this(s,t.howMany,n,i,t.baseVersion)}}class Rs extends bs{name;oldRange;newRange;affectsData;_markers;constructor(t,e,s,n,i,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=s?s.clone():null,this.affectsData=i,this._markers=n}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new Rs(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Rs(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new Rs(t.name,t.oldRange?Ze.fromJSON(t.oldRange,e):null,t.newRange?Ze.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}function Ns(t,e){return function(t,e,s){return je(t,e,void 0,void 0,void 0,void 0,s)}(t,e,Wt)}class Es extends bs{range;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Es(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Es(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new M("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Ns(t.getAttribute(this.key),this.oldValue))throw new M("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new M("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Ns(this.oldValue,this.newValue)||function(t,e,s){Ps(t.start),Ps(t.end);for(const n of t.getItems({shallow:!0})){const t=n.is("$textProxy")?n.textNode:n;null!==s?t._setAttribute(e,s):t._removeAttribute(e),vs(t.parent,t.index)}vs(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Es(Ze.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Ms extends bs{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new Ms(this.baseVersion)}getReversed(){return new Ms(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Ts extends bs{position;oldName;newName;constructor(t,e,s,n){super(n),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Ts(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Ts(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof ms))throw new M("rename-operation-wrong-position",this);if(""!==this.oldName&&t.name!==this.oldName)throw new M("rename-operation-wrong-name",this);this.oldName=t.name}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Ts(Ge.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Bs extends bs{root;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.root=t,this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Bs(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Bs(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new M("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new M("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new M("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new M("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Bs(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Cs extends bs{rootName;elementName;isAdd;_document;constructor(t,e,s,n,i){super(i),this.rootName=t,this.elementName=e,this.isAdd=s,this._document=n,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Cs(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Cs(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new Cs(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const Is={};Is[Es.className]=Es,Is[As.className]=As,Is[Rs.className]=Rs,Is[Ss.className]=Ss,Is[Ms.className]=Ms,Is[bs.className]=bs,Is[Ts.className]=Ts,Is[Bs.className]=Bs,Is[Cs.className]=Cs,Is[Os.className]=Os,Is[ks.className]=ks;const Fs=new Map;function Js(t,e,s){let n=Fs.get(t);n||(n=new Map,Fs.set(t,n)),n.set(e,s)}function Vs(t,e,s){const n=t.nodes.getNode(0).getAttribute(e);if(n==s)return null;const i=new Ze(t.position,t.position.getShiftedBy(t.howMany));return new Es(i,e,n,s,0)}function qs(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function Ds(t,e){const s=[];for(let n=0;n<t.length;n++){const i=t[n],r=new Ss(i.start,i.end.offset-i.start.offset,e,0);s.push(r);for(let e=n+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return s}Js(Es,Es,(t,e,s)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const n=t.range.getDifference(e.range).map(e=>new Es(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&s.aIsStrong&&n.push(new Es(i,e.key,e.newValue,t.newValue,0)),0==n.length?[new Ms(0)]:n}return[t]}),Js(Es,As,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const s=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new Es(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const n=Vs(e,t.key,t.oldValue);n&&s.unshift(n)}return s}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),Js(Es,ks,(t,e)=>{const s=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&s.push(Ze._createFromPositionAndShift(e.graveyardPosition,1));const n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||s.push(n),s.map(e=>new Es(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Js(Es,Ss,(t,e)=>{const s=function(t,e){const s=Ze._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,i=[];s.containsRange(t,!0)?n=t:t.start.hasSameParentAs(s.start)?(i=t.getDifference(s),n=t.getIntersection(s)):i=[t];const r=[];for(let t of i){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const s=e.getMovedRangeStart(),n=t.start.hasSameParentAs(s),i=t._getTransformedByInsertion(s,e.howMany,n);r.push(...i)}return n&&r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}(t.range,e);return s.map(e=>new Es(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Js(Es,Os,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const s=t.clone();return s.range=new Ze(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,s]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),Js(As,Es,(t,e)=>{const s=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const n=Vs(t,e.key,e.newValue);n&&s.push(n)}return s}),Js(As,As,(t,e,s)=>(t.position.isEqual(e.position)&&s.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),Js(As,Ss,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Js(As,Os,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),Js(As,ks,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),Js(Rs,As,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),Js(Rs,Rs,(t,e,s)=>{if(t.name==e.name){if(!s.aIsStrong)return[new Ms(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),Js(Rs,ks,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),Js(Rs,Ss,(t,e)=>{const s=[t];if(t.oldRange&&(t.oldRange=Ze._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const n=t.newRange._getTransformedByMoveOperation(e);t.newRange=n[0];for(let e=1;e<n.length;e++){const i=t.clone();i.oldRange=null,i.newRange=n[e],i.baseVersion=-1,s.push(i)}}return s}),Js(Rs,Os,(t,e,s)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(s.abRelation){const n=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?s.abRelation.wasStartBeforeMergedElement?t.newRange.start=Ge._createAt(e.insertionPosition):s.abRelation.wasInLeftElement?t.newRange.start=Ge._createAt(t.newRange.start):t.newRange.start=Ge._createAt(e.moveTargetPosition):t.newRange.start=n.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&s.abRelation.wasEndBeforeMergedElement?t.newRange.end=Ge._createAt(e.insertionPosition):s.abRelation.wasInRightElement?t.newRange.end=Ge._createAt(e.moveTargetPosition):t.newRange.end=Ge._createAt(t.newRange.end):t.newRange.end=n.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),Js(ks,As,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),Js(ks,ks,(t,e,s)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(s.bWasUndone){const s=e.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new Ge(e.graveyardPosition.root,s),t.howMany=0,[t]}return[new Ms(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!s.bWasUndone&&"splitAtSource"!=s.abRelation){const n="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=e.targetPosition._getTransformedByMergeOperation(e),n=t.targetPosition._getTransformedByMergeOperation(e);return[new Ss(s,t.howMany,n,0)]}return[new Ms(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&s.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Js(ks,Ss,(t,e,s)=>{const n=Ze._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!s.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new Ms(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==s.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==s.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),Js(ks,Os,(t,e,s)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition)||"mergeTargetNotMoved"==s.abRelation))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==s.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==s.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),Js(Ss,As,(t,e)=>{const s=Ze._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),Js(Ss,Ss,(t,e,s)=>{const n=Ze._createFromPositionAndShift(t.sourcePosition,t.howMany),i=Ze._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,o=s.aIsStrong,a=!s.aIsStrong;if("insertBefore"==s.abRelation||"insertAfter"==s.baRelation?a=!0:"insertAfter"!=s.abRelation&&"insertBefore"!=s.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),qs(t,e)&&qs(e,t))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ds([n],r);if(i.containsPosition(t.targetPosition)&&i.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Ds([n],r);const h=ot(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==h||"extension"==h)return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ds([n],r);"remove"!=t.type||"remove"==e.type||s.aWasUndone||s.forceWeakRemove?"remove"==t.type||"remove"!=e.type||s.bWasUndone||s.forceWeakRemove||(o=!1):o=!0;const l=[],c=n.getDifference(i);for(const t of c){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const s="same"==ot(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,s);l.push(...n)}const d=n.getIntersection(i);return null!==d&&o&&(d.start=d.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.end=d.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(d):1==l.length?i.start.isBefore(n.start)||i.start.isEqual(n.start)?l.unshift(d):l.push(d):l.splice(1,0,d)),0===l.length?[new Ms(t.baseVersion)]:Ds(l,r)}),Js(Ss,Os,(t,e,s)=>{let n=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=s.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==s.abRelation)return t.howMany++,t.targetPosition=n,[t];const i=Ze._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=s.abRelation||t.howMany++,t.targetPosition=n,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new Ze(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),Ds([new Ze(i.start,e.splitPosition),t],n)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==s.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==s.abRelation&&(n=t.targetPosition);const r=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const n=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&n&&!s.aWasUndone&&r.push(Ze._createFromPositionAndShift(e.insertionPosition,1))}return Ds(r,n)}),Js(Ss,ks,(t,e,s)=>{const n=Ze._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||s.forceWeakRemove){if(1==t.howMany)return s.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new Ms(0)]}else if(!s.aWasUndone){const s=[];let n=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(s.push(new Ss(t.sourcePosition,t.howMany-1,r,0)),n=n._getTransformedByMove(t.sourcePosition,r,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,r),a=new Ss(n,1,o,0),h=a.getMovedRangeStart().path.slice();h.push(0);const l=new Ge(a.targetPosition.root,h);i=i._getTransformedByMove(n,o,1);const c=new Ss(i,e.howMany,l,0);return s.push(a),s.push(c),s}const i=Ze._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),Js(Ts,As,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),Js(Ts,ks,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),Js(Ts,Ss,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Js(Ts,Ts,(t,e,s)=>{if(t.position.isEqual(e.position)){if(!s.aIsStrong)return[new Ms(0)];t.oldName=e.newName}return[t]}),Js(Ts,Os,(t,e)=>{if("same"==ot(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new Ts(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),Js(Bs,Bs,(t,e,s)=>{if(t.root===e.root&&t.key===e.key){if(!s.aIsStrong||t.newValue===e.newValue)return[new Ms(0)];t.oldValue=e.newValue}return[t]}),Js(Cs,Cs,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new Ms(0)]:[t]),Js(Os,As,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),Js(Os,ks,(t,e,s)=>{if(!t.graveyardPosition&&!s.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const s=e.graveyardPosition.path.slice();s.push(0);const n=new Ge(e.graveyardPosition.root,s),i=Os.getInsertionPosition(new Ge(e.graveyardPosition.root,s)),r=new Os(n,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Os.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Os.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Js(Os,Ss,(t,e,s)=>{const n=Ze._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!s.bWasUndone&&i){const s=t.splitPosition._getTransformedByMoveOperation(e),n=t.graveyardPosition._getTransformedByMoveOperation(e),i=n.path.slice();i.push(0);const r=new Ge(n.root,i);return[new Ss(s,t.howMany,r,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==s.baRelation||"splitBefore"==s.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Os.getInsertionPosition(t.splitPosition),[t];if(i&&s.abRelation&&s.abRelation.howMany){const{howMany:e,offset:n}=s.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(n),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=s,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Os.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=Os.getInsertionPosition(t.splitPosition),[t]}),Js(Os,Os,(t,e,s)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new Ms(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new Ms(0)];if("splitBefore"==s.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const n="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=[];return e.howMany&&s.push(new Ss(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&s.push(new Ss(t.splitPosition,t.howMany,t.moveTargetPosition,0)),s}return[new Ms(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==s.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==s.baRelation){const s=e.insertionPosition.path.slice();s.push(0);const n=new Ge(e.insertionPosition.root,s);return[t,new Ss(t.insertionPosition,1,n,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Os.getInsertionPosition(t.splitPosition),[t]});function js(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Ls.call(this,s)},{priority:"low"})}function Ls(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}(class extends(V(Ge)){constructor(t,e,s="toNone"){if(super(t,e,s),!this.root.is("rootElement"))throw new M("model-liveposition-root-not-rootelement",t);js.call(this)}detach(){this.stopListening()}toPosition(){return new Ge(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}).prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};(class extends ms{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,s="main"){super(e),this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;(class extends(V($e)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,s,n){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=s,this._affectsData=n}get managedUsingOperations(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new M("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}).prototype.is=function(t){return"marker"===t||"model:marker"===t};class $s extends $e{markers=new Map;_children=new ps;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const s of t)s.name?e.push(ms.fromJSON(s)):e.push(ds.fromJSON(s));return new $s(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){return"string"==typeof t?[new ds(t)]:(at(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new ds(t):t instanceof ze?new ds(t.data,t.getAttributes()):t))}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}$s.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t},new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]),Symbol("_treeDump");class zs extends(Z()){editor;_disableStack=new Set;constructor(t){super(),this.editor=t,this.set("isEnabled",!0)}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Ws,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Ws),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function Ws(t){t.return=!1,t.stop()}class Us extends(Z()){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(t){super(),this.editor=t,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(t,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",e=>{if(!this.affectsData)return;const s=t.model.document.selection,n=!("$graveyard"==s.getFirstPosition().root.rootName)&&t.model.canEditAt(s);(t.isReadOnly||this._isEnabledBasedOnSelection&&!n)&&(e.return=!1,e.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(t){this._affectsData=t}refresh(){this.isEnabled=!0}forceDisabled(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",Gs,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",Gs),this.refresh())}execute(...t){}destroy(){this.stopListening()}}function Gs(t){t.return=!1,t.stop()}Symbol.iterator,Symbol.iterator;Symbol("MainQueueId"),Symbol.iterator;function Ks(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}Ks('"'),Ks("'"),Ks("'"),Ks('"'),Ks('"'),Ks("'"),(new DOMParser).parseFromString(Qt,"image/svg+xml").firstChild;class Ys extends Us{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}refresh(){const t=this.editor.model,e=function(t){const e=t.next();return e.done?null:e.value}(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("element","paragraph"),this.isEnabled=!!e&&Qs(e,t.schema)}execute(t={}){const e=this.editor.model,s=e.document,n=t.selection||s.selection;e.canEditAt(n)&&e.change(t=>{const s=n.getSelectedBlocks();for(const n of s)!n.is("element","paragraph")&&Qs(n,e.schema)&&t.rename(n,"paragraph")})}}function Qs(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}class Hs extends Us{constructor(t){super(t),this._isEnabledBasedOnSelection=!1}execute(t){const e=this.editor.model,s=t.attributes;let n=t.position;return e.canEditAt(n)?e.change(t=>{if(n=this._findPositionToInsertParagraph(n,t),!n)return null;const i=t.createElement("paragraph");return s&&e.schema.setAllowedAttributes(i,s,t),e.insertContent(i,n),t.setSelection(i,"in"),t.createPositionAt(i,0)}):null}_findPositionToInsertParagraph(t,e){const s=this.editor.model;if(s.schema.checkChild(t,"paragraph"))return t;const n=s.schema.findAllowedParent(t,"paragraph");if(!n)return null;const i=t.parent,r=s.schema.checkChild(i,"$text");return i.isEmpty||r&&t.isAtEnd?s.createPositionAfter(i):!i.isEmpty&&r&&t.isAtStart?s.createPositionBefore(i):e.split(t,n).position}}class Xs extends zs{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const t=this.editor,e=t.model;t.commands.add("paragraph",new Ys(t)),t.commands.add("insertParagraph",new Hs(t)),e.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:(t,{writer:e})=>Xs.paragraphLikeElements.has(t.name)?t.isEmpty?null:e.createElement("paragraph"):null,view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])}Symbol.iterator,Symbol.iterator,Symbol.iterator;const Zs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},tn={};for(const t of Object.keys(Zs))tn[Zs[t]]=t;const en={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},sn=en,nn=(6/29)**3;function rn(t){const e=t>.0031308?1.055*t**(1/2.4)-.055:12.92*t;return Math.min(Math.max(0,e),1)}function on(t){return t>.04045?((t+.055)/1.055)**2.4:t/12.92}for(const t of Object.keys(en)){if(!("channels"in en[t]))throw new Error("missing channels property: "+t);if(!("labels"in en[t]))throw new Error("missing channel labels property: "+t);if(en[t].labels.length!==en[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:s}=en[t];delete en[t].channels,delete en[t].labels,Object.defineProperty(en[t],"channels",{value:e}),Object.defineProperty(en[t],"labels",{value:s})}function an(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}function hn(t,e){return function(s){return e(t(s))}}function ln(t,e){const s=[e[t].parent,t];let n=sn[e[t].parent][t],i=e[t].parent;for(;e[i].parent;)s.unshift(e[i].parent),n=hn(sn[e[i].parent][i],n),i=e[i].parent;return n.conversion=s,n}en.rgb.hsl=function(t){const e=t[0]/255,s=t[1]/255,n=t[2]/255,i=Math.min(e,s,n),r=Math.max(e,s,n),o=r-i;let a,h;switch(r){case i:a=0;break;case e:a=(s-n)/o;break;case s:a=2+(n-e)/o;break;case n:a=4+(e-s)/o}a=Math.min(60*a,360),a<0&&(a+=360);const l=(i+r)/2;return h=r===i?0:l<=.5?o/(r+i):o/(2-r-i),[a,100*h,100*l]},en.rgb.hsv=function(t){let e,s,n,i,r;const o=t[0]/255,a=t[1]/255,h=t[2]/255,l=Math.max(o,a,h),c=l-Math.min(o,a,h),d=function(t){return(l-t)/6/c+.5};if(0===c)i=0,r=0;else{switch(r=c/l,e=d(o),s=d(a),n=d(h),l){case o:i=n-s;break;case a:i=1/3+e-n;break;case h:i=2/3+s-e}i<0?i+=1:i>1&&(i-=1)}return[360*i,100*r,100*l]},en.rgb.hwb=function(t){const e=t[0],s=t[1];let n=t[2];const i=en.rgb.hsl(t)[0],r=1/255*Math.min(e,Math.min(s,n));return n=1-1/255*Math.max(e,Math.max(s,n)),[i,100*r,100*n]},en.rgb.oklab=function(t){const e=on(t[0]/255),s=on(t[1]/255),n=on(t[2]/255),i=Math.cbrt(.4122214708*e+.5363325363*s+.0514459929*n),r=Math.cbrt(.2119034982*e+.6806995451*s+.1073969566*n),o=Math.cbrt(.0883024619*e+.2817188376*s+.6299787005*n);return[100*(.2104542553*i+.793617785*r-.0040720468*o),100*(1.9779984951*i-2.428592205*r+.4505937099*o),100*(.0259040371*i+.7827717662*r-.808675766*o)]},en.rgb.cmyk=function(t){const e=t[0]/255,s=t[1]/255,n=t[2]/255,i=Math.min(1-e,1-s,1-n);return[100*((1-e-i)/(1-i)||0),100*((1-s-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*i]},en.rgb.keyword=function(t){const e=tn[t];if(e)return e;let s,n=Number.POSITIVE_INFINITY;for(const e of Object.keys(Zs)){const i=an(t,Zs[e]);i<n&&(n=i,s=e)}return s},en.keyword.rgb=function(t){return Zs[t]},en.rgb.xyz=function(t){const e=on(t[0]/255),s=on(t[1]/255),n=on(t[2]/255);return[100*(.4124564*e+.3575761*s+.1804375*n),100*(.2126729*e+.7151522*s+.072175*n),100*(.0193339*e+.119192*s+.9503041*n)]},en.rgb.lab=function(t){const e=en.rgb.xyz(t);let s=e[0],n=e[1],i=e[2];return s/=95.047,n/=100,i/=108.883,s=s>nn?s**(1/3):7.787*s+16/116,n=n>nn?n**(1/3):7.787*n+16/116,i=i>nn?i**(1/3):7.787*i+16/116,[116*n-16,500*(s-n),200*(n-i)]},en.hsl.rgb=function(t){const e=t[0]/360,s=t[1]/100,n=t[2]/100;let i,r;if(0===s)return r=255*n,[r,r,r];const o=n<.5?n*(1+s):n+s-n*s,a=2*n-o,h=[0,0,0];for(let t=0;t<3;t++)i=e+1/3*-(t-1),i<0&&i++,i>1&&i--,r=6*i<1?a+6*(o-a)*i:2*i<1?o:3*i<2?a+(o-a)*(2/3-i)*6:a,h[t]=255*r;return h},en.hsl.hsv=function(t){const e=t[0];let s=t[1]/100,n=t[2]/100,i=s;const r=Math.max(n,.01);return n*=2,s*=n<=1?n:2-n,i*=r<=1?r:2-r,[e,100*(0===n?2*i/(r+i):2*s/(n+s)),(n+s)/2*100]},en.hsv.rgb=function(t){const e=t[0]/60,s=t[1]/100;let n=t[2]/100;const i=Math.floor(e)%6,r=e-Math.floor(e),o=255*n*(1-s),a=255*n*(1-s*r),h=255*n*(1-s*(1-r));switch(n*=255,i){case 0:return[n,h,o];case 1:return[a,n,o];case 2:return[o,n,h];case 3:return[o,a,n];case 4:return[h,o,n];case 5:return[n,o,a]}},en.hsv.hsl=function(t){const e=t[0],s=t[1]/100,n=t[2]/100,i=Math.max(n,.01);let r,o;o=(2-s)*n;const a=(2-s)*i;return r=s*i,r/=a<=1?a:2-a,r=r||0,o/=2,[e,100*r,100*o]},en.hwb.rgb=function(t){const e=t[0]/360;let s=t[1]/100,n=t[2]/100;const i=s+n;let r;i>1&&(s/=i,n/=i);const o=Math.floor(6*e),a=1-n;r=6*e-o,1&o&&(r=1-r);const h=s+r*(a-s);let l,c,d;switch(o){default:case 6:case 0:l=a,c=h,d=s;break;case 1:l=h,c=a,d=s;break;case 2:l=s,c=a,d=h;break;case 3:l=s,c=h,d=a;break;case 4:l=h,c=s,d=a;break;case 5:l=a,c=s,d=h}return[255*l,255*c,255*d]},en.cmyk.rgb=function(t){const e=t[0]/100,s=t[1]/100,n=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,s*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},en.xyz.rgb=function(t){const e=t[0]/100,s=t[1]/100,n=t[2]/100;let i,r,o;return i=3.2404542*e+-1.5371385*s+-.4985314*n,r=-.969266*e+1.8760108*s+.041556*n,o=.0556434*e+-.2040259*s+1.0572252*n,i=rn(i),r=rn(r),o=rn(o),[255*i,255*r,255*o]},en.xyz.lab=function(t){let e=t[0],s=t[1],n=t[2];return e/=95.047,s/=100,n/=108.883,e=e>nn?e**(1/3):7.787*e+16/116,s=s>nn?s**(1/3):7.787*s+16/116,n=n>nn?n**(1/3):7.787*n+16/116,[116*s-16,500*(e-s),200*(s-n)]},en.xyz.oklab=function(t){const e=t[0]/100,s=t[1]/100,n=t[2]/100,i=Math.cbrt(.8189330101*e+.3618667424*s-.1288597137*n),r=Math.cbrt(.0329845436*e+.9293118715*s+.0361456387*n),o=Math.cbrt(.0482003018*e+.2643662691*s+.633851707*n);return[100*(.2104542553*i+.793617785*r-.0040720468*o),100*(1.9779984951*i-2.428592205*r+.4505937099*o),100*(.0259040371*i+.7827717662*r-.808675766*o)]},en.oklab.oklch=function(t){return en.lab.lch(t)},en.oklab.xyz=function(t){const e=t[0]/100,s=t[1]/100,n=t[2]/100,i=(.999999998*e+.396337792*s+.215803758*n)**3,r=(1.000000008*e-.105561342*s-.063854175*n)**3,o=(1.000000055*e-.089484182*s-1.291485538*n)**3;return[100*(1.227013851*i-.55779998*r+.281256149*o),100*(-.040580178*i+1.11225687*r-.071676679*o),100*(-.076381285*i-.421481978*r+1.58616322*o)]},en.oklab.rgb=function(t){const e=t[0]/100,s=t[1]/100,n=t[2]/100,i=(e+.3963377774*s+.2158037573*n)**3,r=(e-.1055613458*s-.0638541728*n)**3,o=(e-.0894841775*s-1.291485548*n)**3;return[255*rn(4.0767416621*i-3.3077115913*r+.2309699292*o),255*rn(-1.2684380046*i+2.6097574011*r-.3413193965*o),255*rn(-.0041960863*i-.7034186147*r+1.707614701*o)]},en.oklch.oklab=function(t){return en.lch.lab(t)},en.lab.xyz=function(t){let e,s,n;s=(t[0]+16)/116,e=t[1]/500+s,n=s-t[2]/200;const i=s**3,r=e**3,o=n**3;return s=i>nn?i:(s-16/116)/7.787,e=r>nn?r:(e-16/116)/7.787,n=o>nn?o:(n-16/116)/7.787,e*=95.047,s*=100,n*=108.883,[e,s,n]},en.lab.lch=function(t){const e=t[0],s=t[1],n=t[2];let i;return i=360*Math.atan2(n,s)/2/Math.PI,i<0&&(i+=360),[e,Math.sqrt(s*s+n*n),i]},en.lch.lab=function(t){const e=t[0],s=t[1],n=t[2]/360*2*Math.PI;return[e,s*Math.cos(n),s*Math.sin(n)]},en.rgb.ansi16=function(t,e=null){const[s,n,i]=t;let r=null===e?en.rgb.hsv(t)[2]:e;if(r=Math.round(r/50),0===r)return 30;let o=30+(Math.round(i/255)<<2|Math.round(n/255)<<1|Math.round(s/255));return 2===r&&(o+=60),o},en.hsv.ansi16=function(t){return en.rgb.ansi16(en.hsv.rgb(t),t[2])},en.rgb.ansi256=function(t){const e=t[0],s=t[1],n=t[2];return e>>4==s>>4&&s>>4==n>>4?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(s/255*5)+Math.round(n/255*5)},en.ansi16.rgb=function(t){let e=(t=t[0])%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const s=.5*(Math.trunc(t>50)+1);return[(1&e)*s*255,(e>>1&1)*s*255,(e>>2&1)*s*255]},en.ansi256.rgb=function(t){if((t=t[0])>=232){const e=10*(t-232)+8;return[e,e,e]}let e;return t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},en.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".slice(e.length)+e},en.hex.rgb=function(t){const e=t.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!e)return[0,0,0];let s=e[0];3===e[0].length&&(s=[...s].map(t=>t+t).join(""));const n=Number.parseInt(s,16);return[n>>16&255,n>>8&255,255&n]},en.rgb.hcg=function(t){const e=t[0]/255,s=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,s),n),r=Math.min(Math.min(e,s),n),o=i-r;let a;return a=o<=0?0:i===e?(s-n)/o%6:i===s?2+(n-e)/o:4+(e-s)/o,a/=6,a%=1,[360*a,100*o,100*(o<1?r/(1-o):0)]},en.hsl.hcg=function(t){const e=t[1]/100,s=t[2]/100,n=s<.5?2*e*s:2*e*(1-s);let i=0;return n<1&&(i=(s-.5*n)/(1-n)),[t[0],100*n,100*i]},en.hsv.hcg=function(t){const e=t[1]/100,s=t[2]/100,n=e*s;let i=0;return n<1&&(i=(s-n)/(1-n)),[t[0],100*n,100*i]},en.hcg.rgb=function(t){const e=t[0]/360,s=t[1]/100,n=t[2]/100;if(0===s)return[255*n,255*n,255*n];const i=[0,0,0],r=e%1*6,o=r%1,a=1-o;let h=0;switch(Math.floor(r)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return h=(1-s)*n,[255*(s*i[0]+h),255*(s*i[1]+h),255*(s*i[2]+h)]},en.hcg.hsv=function(t){const e=t[1]/100,s=e+t[2]/100*(1-e);let n=0;return s>0&&(n=e/s),[t[0],100*n,100*s]},en.hcg.hsl=function(t){const e=t[1]/100,s=t[2]/100*(1-e)+.5*e;let n=0;return s>0&&s<.5?n=e/(2*s):s>=.5&&s<1&&(n=e/(2*(1-s))),[t[0],100*n,100*s]},en.hcg.hwb=function(t){const e=t[1]/100,s=e+t[2]/100*(1-e);return[t[0],100*(s-e),100*(1-s)]},en.hwb.hcg=function(t){const e=t[1]/100,s=1-t[2]/100,n=s-e;let i=0;return n<1&&(i=(s-n)/(1-n)),[t[0],100*n,100*i]},en.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},en.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},en.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},en.gray.hsl=function(t){return[0,0,t[0]]},en.gray.hsv=en.gray.hsl,en.gray.hwb=function(t){return[0,100,t[0]]},en.gray.cmyk=function(t){return[0,0,0,t[0]]},en.gray.lab=function(t){return[t[0],0,0]},en.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),s=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".slice(s.length)+s},en.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};const cn=function(t){const e=function(t){const e=function(){const t={},e=Object.keys(sn);for(let{length:s}=e,n=0;n<s;n++)t[e[n]]={distance:-1,parent:null};return t}(),s=[t];for(e[t].distance=0;s.length>0;){const t=s.pop(),n=Object.keys(sn[t]);for(let{length:i}=n,r=0;r<i;r++){const i=n[r],o=e[i];-1===o.distance&&(o.distance=e[t].distance+1,o.parent=t,s.unshift(i))}}return e}(t),s={},n=Object.keys(e);for(let{length:t}=n,i=0;i<t;i++){const t=n[i];null!==e[t].parent&&(s[t]=ln(t,e))}return s},dn={},fn=Object.keys(sn);function un(t){const e=function(...e){const s=e[0];return null==s?s:(s.length>1&&(e=s),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}function gn(t){const e=function(...e){const s=e[0];if(null==s)return s;s.length>1&&(e=s);const n=t(e);if("object"==typeof n)for(let{length:t}=n,e=0;e<t;e++)n[e]=Math.round(n[e]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}for(const t of fn){dn[t]={},Object.defineProperty(dn[t],"channels",{value:sn[t].channels}),Object.defineProperty(dn[t],"labels",{value:sn[t].labels});const e=cn(t),s=Object.keys(e);for(const n of s){const s=e[n];dn[t][n]=gn(s),dn[t][n].raw=un(s)}}Math.PI;Symbol("same"),Symbol("color"),Symbol("hsva"),Symbol("update"),Symbol("parts"),Symbol("css"),Symbol("sliders");let pn;HTMLElement,Symbol.iterator;try{pn={window,document}}catch{pn={window:{},document:{}}}class mn{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const bn=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function _n(){const[t,e,s,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+bn[255&t]+bn[t>>8&255]+bn[t>>16&255]+bn[t>>24&255]+bn[255&e]+bn[e>>8&255]+bn[e>>16&255]+bn[e>>24&255]+bn[255&s]+bn[s>>8&255]+bn[s>>16&255]+bn[s>>24&255]+bn[255&n]+bn[n>>8&255]+bn[n>>16&255]+bn[n>>24&255]}const yn={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function wn(t,e){const s=yn.get(e.priority);let n=0,i=t.length;for(;n<i;){const e=n+i>>1;yn.get(t[e].priority)<s?i=e:n=e+1}t.splice(n,0,e)}class vn extends Error{context;data;constructor(t,e,s,n){super(function(t,e,s){const n=new WeakSet;return t+(e?` ${JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e})}`:"")+xn(t)+(s?`\nOriginal error: ${s.name}: ${s.message}`:"")}(t,s,n)),this.name="CKEditorError",this.context=e,this.data=s,n&&(this.stack=n.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new vn("unexpected-error",e,void 0,t)}}function Pn(t,e){console.warn(...function(t,e){const s=xn(t);return e?[t,e,s]:[t,s]}(t,e))}function xn(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}if(new Date(2025,9,1),globalThis.CKEDITOR_VERSION)throw new vn("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION="47.0.0";const Sn=Symbol("listeningTo"),An=Symbol("emitterId"),On=Symbol("delegations"),kn=Rn(Object);function Rn(t){return t?class extends t{on(t,e,s){this.listenTo(this,t,e,s)}once(t,e,s){let n=!1;this.listenTo(this,t,(t,...s)=>{n||(n=!0,t.off(),e.call(this,t,...s))},s)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,s,n={}){let i,r;this[Sn]||(this[Sn]={});const o=this[Sn];Nn(t)||function(t,e){t[An]||(t[An]=e||_n())}(t);const a=Nn(t);(i=o[a])||(i=o[a]={emitter:t,callbacks:{}}),(r=i.callbacks[e])||(r=i.callbacks[e]=[]),r.push(s),function(t,e,s,n,i){e._addEventListener?e._addEventListener(s,n,i):t._addEventListener.call(e,s,n,i)}(this,t,e,s,n)}stopListening(t,e,s){const n=this[Sn];let i=t&&Nn(t);const r=n&&i?n[i]:void 0,o=r&&e?r.callbacks[e]:void 0;if(!(!n||t&&!r||e&&!o))if(s)Cn(this,t,e,s),-1!==o.indexOf(s)&&(1===o.length?delete r.callbacks[e]:Cn(this,t,e,s));else if(o){for(;s=o.pop();)Cn(this,t,e,s);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete n[i]}else{for(i in n)this.stopListening(n[i].emitter);delete this[Sn]}}fire(t,...e){try{const s=t instanceof mn?t:new mn(this,t),n=s.name;let i=function(t,e){if(!t._events)return null;let s=e;do{const e=t._events[s];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const n=s.lastIndexOf(":");s=n>-1?s.substring(0,n):""}while(s);return null}(this,n);if(s.path.push(this),i){i=i.slice();for(let t=0;t<i.length;t++){const r=i[t].callback;if(r.call(this,s,...e),s.off.called&&(delete s.off.called,this._removeEventListener(n,r)),s.stop.called)break}}const r=this[On];if(r){const t=r.get(n),i=r.get("*");t&&Bn(t,s,e),i&&Bn(i,s,e)}return s.return}catch(t){vn.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,s)=>{this[On]||(this[On]=new Map),t.forEach(t=>{const n=this[On].get(t);n?n.set(e,s):this[On].set(t,new Map([[e,s]]))})}}}stopDelegating(t,e){if(this[On])if(t)if(e){const s=this[On].get(t);s&&s.delete(e)}else this[On].delete(t);else this[On].clear()}_addEventListener(t,e,s){!function(t,e){const s=En(t);if(s[e])return;let n=e,i=null;const r=[];for(;""!==n&&!s[n];)s[n]=Mn(),r.push(s[n]),i&&s[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(":"));if(""!==n){for(const t of r)t.callbacks=s[n].callbacks.slice();s[n].childEvents.push(i)}}(this,t);const n=Tn(this,t),i={callback:e,priority:yn.get(s.priority)};for(const t of n)wn(t,i)}_removeEventListener(t,e){const s=Tn(this,t);for(const t of s)for(let s=0;s<t.length;s++)t[s].callback==e&&(t.splice(s,1),s--)}}:kn}function Nn(t){return t[An]}function En(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Mn(){return{callbacks:[],childEvents:[]}}function Tn(t,e){const s=En(t)[e];if(!s)return[];let n=[s.callbacks];for(let e=0;e<s.childEvents.length;e++){const i=Tn(t,s.childEvents[e]);n=n.concat(i)}return n}function Bn(t,e,s){for(let[n,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new mn(e.source,i);t.path=[...e.path],n.fire(t,...s)}}function Cn(t,e,s,n){e._removeEventListener?e._removeEventListener(s,n):t._removeEventListener.call(e,s,n)}const In=Symbol("observableProperties"),Fn=Symbol("boundObservables"),Jn=Symbol("boundProperties"),Vn=Symbol("decoratedMethods"),qn=Symbol("decoratedOriginal"),Dn=jn(Rn());function jn(t){return t?class extends t{set(t,e){if(U(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);Ln(this);const s=this[In];if(t in this&&!s.has(t))throw new vn("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>s.get(t),set(e){const n=s.get(t);let i=this.fire(`set:${t}`,t,e,n);void 0===i&&(i=e),n===i&&s.has(t)||(s.set(t,i),this.fire(`change:${t}`,t,i,n))}}),this[t]=e}bind(...t){if(!t.length||!Wn(t))throw new vn("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new vn("observable-bind-duplicate-properties",this);Ln(this);const e=this[Jn];t.forEach(t=>{if(e.has(t))throw new vn("observable-bind-rebind",this)});const s=new Map;return t.forEach(t=>{const n={property:t,to:[]};e.set(t,n),s.set(t,n)}),{to:$n,toMany:zn,_observable:this,_bindProperties:t,_to:[],_bindings:s}}unbind(...t){if(!this[In])return;const e=this[Jn],s=this[Fn];if(t.length){if(!Wn(t))throw new vn("observable-unbind-wrong-properties",this);t.forEach(t=>{const n=e.get(t);n&&(n.to.forEach(([t,e])=>{const i=s.get(t),r=i[e];r.delete(n),r.size||delete i[e],Object.keys(i).length||(s.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else s.forEach((t,e)=>{this.stopListening(e,"change")}),s.clear(),e.clear()}decorate(t){Ln(this);const e=this[t];if(!e)throw new vn("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,s)=>{t.return=e.apply(this,s)}),this[t]=function(...e){return this.fire(t,e)},this[t][qn]=e,this[Vn]||(this[Vn]=[]),this[Vn].push(t)}stopListening(t,e,s){if(!t&&this[Vn]){for(const t of this[Vn])this[t]=this[t][qn];delete this[Vn]}super.stopListening(t,e,s)}[In];[Vn];[Jn];[Fn]}:Dn}function Ln(t){t[In]||(Object.defineProperty(t,In,{value:new Map}),Object.defineProperty(t,Fn,{value:new Map}),Object.defineProperty(t,Jn,{value:new Map}))}function $n(...t){const e=function(...t){if(!t.length)throw new vn("observable-bind-to-parse-error",null);const e={to:[]};let s;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)s.properties.push(t);else{if("object"!=typeof t)throw new vn("observable-bind-to-parse-error",null);s={observable:t,properties:[]},e.to.push(s)}}),e}(...t),s=Array.from(this._bindings.keys()),n=s.length;if(!e.callback&&e.to.length>1)throw new vn("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new vn("observable-bind-to-extra-callback",this);var i;e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==n)throw new vn("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(s[0]).callback=e.callback),i=this._observable,this._to.forEach(t=>{const e=i[Fn];let s;e.get(t.observable)||i.listenTo(t.observable,"change",(n,r)=>{s=e.get(t.observable)[r],s&&s.forEach(t=>{Un(i,t.property)})})}),function(t){let e;t._bindings.forEach((s,n)=>{t._to.forEach(i=>{e=i.properties[s.callback?0:t._bindProperties.indexOf(n)],s.to.push([i.observable,e]),function(t,e,s,n){const i=t[Fn],r=i.get(s),o=r||{};o[n]||(o[n]=new Set),o[n].add(e),r||i.set(s,o)}(t._observable,s,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{Un(this._observable,t)})}function zn(t,e,s){if(this._bindings.size>1)throw new vn("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const s=t.map(t=>[t,e]);return Array.prototype.concat.apply([],s)}(t,e),s)}function Wn(t){return t.every(t=>"string"==typeof t)}function Un(t,e){const s=t[Jn].get(e);let n;s.callback?n=s.callback.apply(t,s.to.map(t=>t[0][t[1]])):(n=s.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=n:t.set(e,n)}function Gn(t){let e=0;for(const s of t)e++;return e}function Kn(t,e){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++)if(t[n]!=e[n])return n;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function Yn(t){return!(!t||!t[Symbol.iterator])}function Qn(t){return Array.isArray(t)?t:[t]}pn.window.CKEDITOR_TRANSLATIONS||(pn.window.CKEDITOR_TRANSLATIONS={});class Hn extends(Rn()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const s=Yn(t);if(s||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new vn("collection-add-item-invalid-index",this);let s=0;for(const n of t){const t=this._getItemIdBeforeAdding(n),i=e+s;this._items.splice(i,0,n),this._itemMap.set(t,n),this.fire("add",n,i),s++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new vn("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,s]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:s}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new vn("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,s=(s,n,i)=>{const r=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(n);if(r&&o)this._bindToExternalToInternalMap.set(n,o),this._bindToInternalToExternalMap.set(o,n);else{const s=t(n);if(!s)return void this._skippedIndexesFromExternal.push(i);let r=i;for(const t of this._skippedIndexesFromExternal)i>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(n,s),this._bindToInternalToExternalMap.set(s,n),this.add(s,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)s(0,t,e.getIndex(t));this.listenTo(e,"add",s),this.listenTo(e,"remove",(t,e,s)=>{const n=this._bindToExternalToInternalMap.get(e);n&&this.remove(n),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(s<e&&t.push(e-1),s>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let s;if(e in t){if(s=t[e],"string"!=typeof s)throw new vn("collection-add-invalid-id",this);if(this.get(s))throw new vn("collection-add-item-already-exists",this)}else t[e]=s=_n();return s}_remove(t){let e,s,n,i=!1;const r=this._idProperty;if("string"==typeof t?(s=t,n=this._itemMap.get(s),i=!n,n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,n=this._items[e],i=!n,n&&(s=n[r])):(n=t,s=n[r],e=this._items.indexOf(n),i=-1==e||!this._itemMap.get(s)),i)throw new vn("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(s);const o=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(o),this.fire("remove",n,e),[n,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Xn(t){return Yn(t)?new Map(t):function(t){const e=new Map;for(const s in t)e.set(s,t[s]);return e}(t)}function Zn(t,e,s){const n=t.length,i=e.length;for(let e=n-1;e>=s;e--)t[e+i]=t[e];for(let n=0;n<i;n++)t[s+n]=e[n]}Symbol.iterator,Symbol.iterator;new WeakMap;class ti{is(){throw new Error("is() method is abstract")}}class ei extends(Rn(ti)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new vn("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=Kn(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s),this.parent&&this.parent._fireChange(t,e,s)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}ei.prototype.is=function(t){return"node"===t||"view:node"===t};class si extends ei{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof si&&(this===t||this.data===t.data)}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new si(this.document,this.data)}}si.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class ni extends ti{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.data.length)throw new vn("view-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.data.length)throw new vn("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let s=t.includeSelf?this.textNode:this.parent;for(;null!==s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}}function ii(t,e,s){if("string"!=typeof e)for(const n of e)Array.isArray(n)?t.push(n):t.push(s?[s,n]:[n]);else t.push(s?[s,e]:[e])}ni.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class ri{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const s=this._isElementMatching(e,t);if(s)return{element:e,pattern:t,match:s}}return null}matchAll(...t){const e=[];for(const s of t)for(const t of this._patterns){const n=this._isElementMatching(s,t);n&&e.push({element:s,pattern:t,match:n})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const s=e(t);return s&&"object"==typeof s?function(t){const e=[];return"attributes"in t&&t.attributes&&ii(e,t.attributes),"classes"in t&&t.classes&&ii(e,t.classes,"class"),"styles"in t&&t.styles&&ii(e,t.styles,"style"),{name:t.name||!1,attributes:e}}(s):s}const s={};if(e.name&&(s.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!s.name))return null;const n=[];return e.attributes&&!function(t,e,s){let n;return"object"!=typeof t||t instanceof RegExp||Array.isArray(t)?n=["class","style"]:(void 0!==t.style&&Pn("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&Pn("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(ai(t),s,n)}(e.attributes,t,n)||e.classes&&!function(t,e,s){return e._collectAttributesMatch(ai(t,"class"),s)}(e.classes,t,n)||e.styles&&!function(t,e,s){return e._collectAttributesMatch(ai(t,"style"),s)}(e.styles,t,n)?null:(n.length&&(s.attributes=n),s)}}function oi(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function ai(t,e){if(Array.isArray(t))return t.map(t=>"object"!=typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||Pn("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!=typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const s=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.push(e?[e,n,t[n]]:[n,t[n]]);return s}class hi{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=function(t){let e=null,s=0,n=0,i=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(null===e)switch(a){case":":i||(i=t.substr(s,o-s),n=o+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(n,o-n);i&&r.set(i.trim(),e.trim()),i=null,s=o+1;break}}else a===e&&(e=null)}return r}(t);for(const[t,s]of e)this._styleProcessor.toNormalizedForm(t,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,U(t))for(const[e,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const s of Qn(t)){const t=li(s),n=ae(this._styles,t);if(n)ci(e,t,n);else{const t=this.getAsString(s);void 0!==t&&this._styleProcessor.toNormalizedForm(s,t,e)}}Object.keys(e).length&&(di(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!U(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const s of e)t.push(...this._styleProcessor.getReducedForm(s,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const s=[];for(const n of this.getStyleNames(!0))if(oi(t,n)){if(!0===e){s.push(n);continue}oi(e,this.getAsString(n))&&s.push(n)}return s.length?s:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s)}else for(const t of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s);e.push(t)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}function li(t){return t.replace("-",".")}function ci(t,e,s){let n=s;U(s)&&(n=Ut({},ae(t,e),s)),pe(t,e,n)}function di(t,e){for(const s of Object.keys(e))null===t[s]||Array.isArray(t[s])||"object"!=typeof t[s]||"object"!=typeof e[s]?delete t[s]:(di(t[s],e[s]),Object.keys(t[s]).length||delete t[s])}class fi{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Qn(t))e&&this._set.add(e)}remove(t){for(const e of Qn(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const s of t.split(/\s+/)){if(!this._set.has(s))return;e.push(s)}return e}for(const s of this._set.keys())s.match(t)&&e.push(s);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class ui extends ei{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,s,n){super(t),this.name=e,this._attrs=this._parseAttributes(s),this._children=[],n&&this._insertChild(0,n)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(pi(this.name,t)||gi(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof ui))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,s]of this._attrs){const n=t._attrs.get(e);if(void 0===n)return!1;if("string"==typeof s||"string"==typeof n){if(n!==s)return!1}else if(!s.isSimilar(n))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new ri(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(e.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==s?"":` ${s}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=[];if(t)for(const s of this.getChildren())e.push(s._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,e);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){if("string"==typeof e)return[new si(t,e)];Yn(e)||(e=[e]);const s=[];for(const n of e)"string"==typeof n?s.push(new si(t,n)):n instanceof ni?s.push(new si(t,n.data)):s.push(n);return s}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,s=!0){if(this._fireChange("attributes",this),pi(this.name,t)||gi(this.name,t)){let n=this._attrs.get(t);n||(n=pi(this.name,t)?new hi(this.document.stylesProcessor):new fi,this._attrs.set(t,n)),s?n.setTo(String(e)):pi(this.name,t)?Array.isArray(e)?n.set(e[0],e[1]):n.set(e):n.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(pi(this.name,t)||gi(this.name,t))){const s=this._attrs.get(t);return!!s&&(gi(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),s.remove(e),!!s.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,s){for(const[n,i,r]of t){let t=!1,o=!1;for(const[a,h]of this._attrs)if(!(s&&s.includes(a)||!oi(n,a)))if(t=!0,"string"==typeof h){if(oi(i,h))e.push([a]),o=!0;else if(!(n instanceof RegExp))return!1}else{const t=h._getTokensMatch(i,r||!0);if(t){o=!0;for(const s of t)e.push([a,s])}else if(!(n instanceof RegExp))return!1}if(!t||!o)return!1}return!0}_getConsumables(t,e){const s=[];if(t){const n=this._attrs.get(t);if(void 0!==n)if("string"==typeof n)s.push([t]);else for(const i of n._getConsumables(e))s.push([t,i])}else for(const[t,e]of this._attrs)if("string"==typeof e)s.push([t]);else for(const n of e._getConsumables())s.push([t,n]);return{name:!t,attributes:s}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._canMergeFrom(s))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof s?this._setAttribute(e,s):t._mergeFrom(s)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._isMatching(s))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof s?this._attrs.delete(e):(t.remove(s.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=Xn(t);for(const[t,s]of e)if(null===s)e.delete(t);else if(pi(this.name,t)){const n=s instanceof hi?s._clone():new hi(this.document.stylesProcessor).setTo(String(s));e.set(t,n)}else if(gi(this.name,t)){const n=s instanceof fi?s._clone():(new fi).setTo(String(s));e.set(t,n)}else"string"!=typeof s&&e.set(t,String(s));return e}}function gi(t,e){return"class"==e||"a"==t&&"rel"==e}function pi(t,e){return"style"==e}ui.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class mi extends ui{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=bi}toJSON(){const t=super.toJSON();return t.type="ContainerElement",t}}function bi(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}mi.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class _i extends(jn(mi)){constructor(t,e,s,n){super(t,e,s,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const t=super.toJSON();return t.type="EditableElement",t.isReadOnly=this.isReadOnly,t.isFocused=this.isFocused,t}}_i.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const yi=Symbol("rootName");(class extends _i{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(yi)}set rootName(t){this._setCustomProperty(yi,t)}toJSON(){return this.rootName}set _name(t){this.name=t}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class wi{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new vn("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new vn("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=vi._createAt(t.startPosition):this._position=vi._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s;do{s=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=s)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&t.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let n;if(s&&s.is("view:$text")){if(t.isAtEnd)return this._position=vi._createAfter(s),this._next();n=s.data[t.offset]}else n=s.getChild(t.offset);if("string"==typeof n){let n;n=this.singleCharacters?1:(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-t.offset;const i=new ni(s,t.offset,n);return t.offset+=n,this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new vi(n,0);return this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new vi(n,0),this._position=t,this._next();let s,i=n.data.length;return n==this._boundaryEndParent?(i=this.boundaries.end.offset,s=new ni(n,0,i),t=vi._createAfter(s)):(s=new ni(n,0,n.data.length),t.offset++),this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=vi._createAfter(s),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,t)}_previous(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&0===t.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let n;if(s.is("view:$text")){if(t.isAtStart)return this._position=vi._createBefore(s),this._previous();n=s.data[t.offset-1]}else n=s.getChild(t.offset-1);if("string"==typeof n){let n;if(this.singleCharacters)n=1;else{const e=s===this._boundaryStartParent?this.boundaries.start.offset:0;n=t.offset-e}t.offset-=n;const i=new ni(s,t.offset,n);return this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new vi(n,n.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new vi(n,n.data.length),this._position=t,this._previous();let s,i=n.data.length;if(n==this._boundaryStartParent){const e=this.boundaries.start.offset;s=new ni(n,e,n.data.length-e),i=s.data.length,t=vi._createBefore(s)}else s=new ni(n,0,n.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=vi._createBefore(s),this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}_formatReturnValue(t,e,s,n,i){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?s=vi._createAfter(e.textNode):(n=vi._createAfter(e.textNode),this._position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?s=vi._createBefore(e.textNode):(n=vi._createBefore(e.textNode),this._position=n))),{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}}class vi extends ti{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof _i);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=vi._createAt(this),s=e.offset+t;return e.offset=s<0?0:s,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new wi(e);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),s.push(t.offset);const n=Kn(e,s);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<s[n]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new wi(t)}clone(){return new vi(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,e){if(t instanceof vi)return new this(t.parent,t.offset);{const s=t;if("end"==e)e=s.is("$text")?s.data.length:s.childCount;else{if("before"==e)return this._createBefore(s);if("after"==e)return this._createAfter(s);if(0!==e&&!e)throw new vn("view-createpositionat-offset-required",s)}return new vi(s,e)}}static _createAfter(t){if(t.is("$textProxy"))return new vi(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new vn("view-position-after-root",t,{root:t});return new vi(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new vi(t.textNode,t.offsetInText);if(!t.parent)throw new vn("view-position-before-root",t,{root:t});return new vi(t.parent,t.index)}}vi.prototype.is=function(t){return"position"===t||"view:position"===t};class Pi extends ti{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new wi({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(xi,{direction:"backward"}),e=this.end.getLastMatchingPosition(xi);return t.parent.is("$text")&&t.isAtStart&&(t=vi._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=vi._createAfter(e.parent)),new Pi(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(xi);if(t.isAfter(this.end)||t.isEqual(this.end))return new Pi(t,t);let e=this.end.getLastMatchingPosition(xi,{direction:"backward"});const s=t.nodeAfter,n=e.nodeBefore;return s&&s.is("$text")&&(t=new vi(s,0)),n&&n.is("$text")&&(e=new vi(n,n.data.length)),new Pi(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Pi(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Pi(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Pi(e,s)}return null}getWalker(t={}){return t.boundaries=this,new wi(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Pi(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new wi(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new wi(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,e,s,n){return new this(new vi(t,e),new vi(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(vi._createBefore(t),e)}}function xi(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}Pi.prototype.is=function(t){return"range"===t||"view:range"===t};class Si extends(Rn(ti)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=Gn(this.getRanges());if(e!=Gn(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let s=!1;for(let n of t.getRanges())if(n=n.getTrimmed(),e.start.isEqual(n.start)&&e.end.isEqual(n.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]),this._setFakeOptions(n);else if(e instanceof Si||e instanceof Ai)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Pi)this._setRanges([e],n&&n.backward),this._setFakeOptions(n);else if(e instanceof vi)this._setRanges([new Pi(e)]),this._setFakeOptions(n);else if(e instanceof ei){const t=!!n&&!!n.backward;let i;if(void 0===s)throw new vn("view-selection-setto-required-second-parameter",this);i="in"==s?Pi._createIn(e):"on"==s?Pi._createOn(e):new Pi(vi._createAt(e,s)),this._setRanges([i],t),this._setFakeOptions(n)}else{if(!Yn(e))throw new vn("view-selection-setto-not-selectable",this);this._setRanges(e,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new vn("view-selection-setfocus-no-ranges",this);const s=vi._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.pop(),"before"==s.compareWith(n)?this._addRange(new Pi(s,n),!0):this._addRange(new Pi(n,s)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof Pi))throw new vn("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new vn("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new Pi(t.start,t.end))}}Si.prototype.is=function(t){return"selection"===t||"view:selection"===t};class Ai extends(Rn(ti)){_selection;constructor(...t){super(),this._selection=new Si,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}Ai.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t},Symbol("bubblingEmitter"),Symbol("bubblingCallbacks"),Symbol("bubblingContexts");function Oi(){if(ki(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(ki(t)>1)return null;t=t.parent}return!t||ki(t)>1?null:this.childCount}function ki(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}(class extends ui{static DEFAULT_PRIORITY=10;_priority=10;_id=null;_clonesGroup=null;constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Oi}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new vn("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}).prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Ri(){return null}(class extends ui{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ri}toJSON(){const t=super.toJSON();return t.type="EmptyElement",t}_insertChild(t,e){if(e&&(e instanceof ei||Array.from(e).length>0))throw new vn("view-emptyelement-cannot-add",[this,e]);return 0}}).prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Ni(){return null}(class extends ui{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ni}_insertChild(t,e){if(e&&(e instanceof ei||Array.from(e).length>0))throw new vn("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}toJSON(){const t=super.toJSON();return t.type="UIElement",t}}).prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Ei(){return null}(class extends ui{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ei}toJSON(){const t=super.toJSON();return t.type="RawElement",t}_insertChild(t,e){if(e&&(e instanceof ei||Array.from(e).length>0))throw new vn("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}).prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Mi extends(Rn(ti)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){return"string"==typeof e?[new si(t,e)]:(Yn(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new si(t,e):e instanceof ni?new si(t,e.data):e))}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}Mi.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};"".repeat(7),(t=>{const e=t.createElement("br");e.dataset.ckeFiller="true"})(pn.document),(t=>{t.createTextNode("")})(pn.document),(t=>{const e=t.createElement("span");e.dataset.ckeFiller="true",e.innerText=""})(pn.document);class Ti{is(){throw new Error("is() method is abstract")}}class Bi extends Ti{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new vn("model-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.offsetSize)throw new vn("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Bi.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class Ci{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new vn("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new vn("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=Fi._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s,n,i;do{n=this.position,i=this._visitedParent,({done:e,value:s}=this.next())}while(!e&&t(s));e||(this._position=n,this._visitedParent=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const n=Ji(e,s),i=n||Vi(e,s,n);if(i&&i.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=i;return this._position=e,Ii("elementStart",i,t,e,1)}if(i&&i.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=i.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),n=t-e.offset}const r=e.offset-i.startOffset,o=new Bi(i,r,n);return e.offset+=n,this._position=e,Ii("text",o,t,e,n)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():Ii("elementEnd",s,t,e)}_previous(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&0===e.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const n=e.parent,i=Ji(e,n),r=i||qi(e,n,i);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,Ii("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():Ii("elementEnd",r,t,e));if(r&&r.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=r.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),n=e.offset-t}const i=e.offset-r.startOffset,o=new Bi(r,i-n,n);return e.offset-=n,this._position=e,Ii("text",o,t,e,n)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,Ii("elementStart",s,t,e,1)}}function Ii(t,e,s,n,i){return{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}class Fi extends Ti{root;path;stickiness;constructor(t,e,s="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new vn("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new vn("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new vn("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new vn("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ji(this,this.parent)}get nodeAfter(){const t=this.parent;return Vi(this,t,Ji(this,t))}get nodeBefore(){const t=this.parent;return qi(this,t,Ji(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=Kn(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new Ci(e);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=Kn(this.path,t.path),s="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,s)}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}getShiftedBy(t){const e=this.clone(),s=e.offset+t;return e.offset=s<0?0:s,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let s=0;s<e;s++){const e=this.path[s]-t.path[s];if(e<-1||e>1)return!1;if(1===e)return Di(t,this,s);if(-1===e)return Di(this,t,s)}return this.path.length===t.path.length||(this.path.length>t.path.length?ji(this.path,e):ji(t.path,e))}hasSameParentAs(t){return this.root===t.root&&"same"==Kn(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Fi._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let s;return e.containsPosition(this)||e.start.isEqual(this)?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):s=this.isEqual(t.deletionPosition)?Fi._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,e){const s=Fi._createAt(this);if(this.root!=t.root)return s;if("same"==Kn(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;s.offset-=e}}else if("prefix"==Kn(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n])return null;s.path[n]-=e}}return s}_getTransformedByInsertion(t,e){const s=Fi._createAt(this);if(this.root!=t.root)return s;if("same"==Kn(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(s.offset+=e);else if("prefix"==Kn(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;t.offset<=this.path[n]&&(s.path[n]+=e)}return s}_getTransformedByMove(t,e,s){if(e=e._getTransformedByDeletion(t,s),t.isEqual(e))return Fi._createAt(this);const n=this._getTransformedByDeletion(t,s);return null===n||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(s).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):n._getTransformedByInsertion(e,s)}_getCombined(t,e){const s=t.path.length-1,n=Fi._createAt(e);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[s]-t.offset,n.path=[...n.path,...this.path.slice(s+1)],n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,s="toNone"){if(t.is("model:position"))return new Fi(t.root,t.path,t.stickiness);{const n=t;if("end"==e)e=n.maxOffset;else{if("before"==e)return this._createBefore(n,s);if("after"==e)return this._createAfter(n,s);if(0!==e&&!e)throw new vn("model-createpositionat-offset-required",[this,t])}if(!n.is("element")&&!n.is("documentFragment"))throw new vn("model-position-parent-incorrect",[this,t]);const i=n.getPath();return i.push(e),new this(n.root,i,s)}}static _createAfter(t,e){if(!t.parent)throw new vn("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new vn("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const s=new Fi(e.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!e.getRoot(t.root))throw new vn("model-position-fromjson-no-root",e,{rootName:t.root});return new Fi(e.getRoot(t.root),t.path,t.stickiness)}}function Ji(t,e){const s=e.getChildAtOffset(t.offset);return s&&s.is("$text")&&s.startOffset<t.offset?s:null}function Vi(t,e,s){return null!==s?null:e.getChildAtOffset(t.offset)}function qi(t,e,s){return null!==s?null:e.getChild(e.offsetToIndex(t.offset)-1)}function Di(t,e,s){return s+1!==t.path.length&&!!ji(e.path,s+1)&&!!function(t,e){let s=t.parent,n=t.path.length-1,i=0;for(;n>=e;){if(t.path[n]+i!==s.maxOffset)return!1;i=1,n--,s=s.parent}return!0}(t,s+1)}function ji(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}Fi.prototype.is=function(t){return"position"===t||"model:position"===t};class Li extends Ti{start;end;constructor(t,e){super(),this.start=Fi._createAt(t),this.end=e?Fi._createAt(e):Fi._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Ci({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==Kn(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}containsItem(t){const e=Fi._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Li(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Li(t.end,this.end))):e.push(new Li(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Li(e,s)}return null}getJoined(t,e=!1){let s=this.isIntersecting(t);if(s||(s=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let n=this.start,i=this.end;return t.start.isBefore(n)&&(n=t.start),t.end.isAfter(i)&&(i=t.end),new Li(n,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,s=Fi._createAt(this.start);let n=s.parent;for(;s.path.length>e+1;){const e=n.maxOffset-s.offset;0!==e&&t.push(new Li(s,s.getShiftedBy(e))),s.path=s.path.slice(0,-1),s.offset++,n=n.parent}for(;s.path.length<=this.end.path.length;){const e=this.end.path[s.path.length-1],n=e-s.offset;0!==n&&t.push(new Li(s,s.getShiftedBy(n))),s.offset=e,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new Ci(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Ci(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new Ci(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Li(this.start,this.end)]}getTransformedByOperations(t){const e=[new Li(this.start,this.end)];for(const s of t)for(let t=0;t<e.length;t++){const n=e[t].getTransformedByOperation(s);e.splice(t,1,...n),t+=n.length-1}for(let t=0;t<e.length;t++){const s=e[t];for(let n=t+1;n<e.length;n++){const t=e[n];(s.containsRange(t)||t.containsRange(s)||s.isEqual(t))&&e.splice(n,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const s=t.sourcePosition,n=t.howMany,i=t.targetPosition;return this._getTransformedByMove(s,i,n,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),e.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Li(e,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Li(this.start);let e=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return e.root!=s.root&&(s=this.end.getShiftedBy(-1)),e.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Fi._createAt(s),e.offset=0):(t.deletionPosition.isEqual(e)||(s=t.deletionPosition),e=t.targetPosition),new Li(e,s)):new Li(e,s)}_getTransformedByInsertion(t,e,s=!1){if(s&&this.containsPosition(t))return[new Li(this.start,t),new Li(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const s=new Li(this.start,this.end);return s.start=s.start._getTransformedByInsertion(t,e),s.end=s.end._getTransformedByInsertion(t,e),[s]}}_getTransformedByMove(t,e,s,n=!1){if(this.isCollapsed){const n=this.start._getTransformedByMove(t,e,s);return[new Li(n)]}const i=Li._createFromPositionAndShift(t,s),r=e._getTransformedByDeletion(t,s);if(this.containsPosition(e)&&!n&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const n=this.start._getTransformedByMove(t,e,s),i=this.end._getTransformedByMove(t,e,s);return[new Li(n,i)]}let o;const a=this.getDifference(i);let h=null;const l=this.getIntersection(i);if(1==a.length?h=new Li(a[0].start._getTransformedByDeletion(t,s),a[0].end._getTransformedByDeletion(t,s)):2==a.length&&(h=new Li(this.start,this.end._getTransformedByDeletion(t,s))),o=h?h._getTransformedByInsertion(r,s,null!==l||n):[],l){const t=new Li(l.start._getCombined(i.start,r),l.end._getCombined(i.start,r));2==o.length?o.splice(1,0,t):o.push(t)}return o}_getTransformedByDeletion(t,e){let s=this.start._getTransformedByDeletion(t,e),n=this.end._getTransformedByDeletion(t,e);return null==s&&null==n?null:(null==s&&(s=t),null==n&&(n=t),new Li(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return new this(Fi._createAt(t,0),Fi._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Fi._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new vn("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const s=t.indexOf(e),n=new this(e.start,e.end);for(let e=s-1;e>=0&&t[e].end.isEqual(n.start);e--)n.start=Fi._createAt(t[e].start);for(let e=s+1;e<t.length&&t[e].start.isEqual(n.end);e++)n.end=Fi._createAt(t[e].end);return n}static fromJSON(t,e){return new this(Fi.fromJSON(t.start,e),Fi.fromJSON(t.end,e))}}Li.prototype.is=function(t){return"range"===t||"model:range"===t};class $i extends Ti{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=Xn(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=Kn(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Xn(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}$i.prototype.is=function(t){return"node"===t||"model:node"===t};class zi extends(Rn(Ti)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Li(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new Li(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new Li(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]);else if(e instanceof zi)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Li)this._setRanges([e],!!n&&!!n.backward);else if(e instanceof Fi)this._setRanges([new Li(e)]);else if(e instanceof $i){const t=!!n&&!!n.backward;let i;if("in"==s)i=Li._createIn(e);else if("on"==s)i=Li._createOn(e);else{if(void 0===s)throw new vn("model-selection-setto-required-second-parameter",[this,e]);i=new Li(Fi._createAt(e,s))}this._setRanges([i],t)}else{if(!Yn(e))throw new vn("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,n&&!!n.backward)}}_setRanges(t,e=!1){const s=Array.from(t),n=s.some(e=>{if(!(e instanceof Li))throw new vn("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(s.length!==this._ranges.length||n)&&(this._replaceAllRanges(s),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new vn("model-selection-setfocus-no-ranges",[this,t]);const s=Fi._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.length&&this._popRange(),"before"==s.compareWith(n)?(this._pushRange(new Li(s,n)),this._lastRangeBackward=!0):(this._pushRange(new Li(n,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const s=Gi(e.start,t);Yi(s,e)&&(yield s);const n=e.getWalker();for(const s of n){const i=s.item;"elementEnd"==s.type&&Ui(i,t,e)?yield i:"elementStart"==s.type&&i.is("model:element")&&i.root.document.model.schema.isBlock(i)&&n.jumpTo(Fi._createAt(i,"end"))}const i=Gi(e.end,t);Qi(i,e)&&(yield i)}}containsEntireContent(t=this.anchor.root){const e=Fi._createAt(t,0),s=Fi._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())},e=Object.fromEntries(this.getAttributes());return Object.keys(e).length&&(t.attributes=e),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new Li(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new vn("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Wi(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Ui(t,e,s){return Wi(t,e)&&Ki(t,s)}function Gi(t,e){const s=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const r=n.find(t=>!i&&(i=s.isLimit(t),!i&&Wi(t,e)));return n.forEach(t=>e.add(t)),r}function Ki(t,e){const s=function(t){const e=t.root.document.model.schema;let s=t.parent;for(;s;){if(e.isBlock(s))return s;s=s.parent}}(t);return!s||!e.containsRange(Li._createOn(s),!0)}function Yi(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(Fi._createAt(t,t.maxOffset))&&Ki(t,e))}function Qi(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(Fi._createAt(t,0))&&Ki(t,e))}zi.prototype.is=function(t){return"selection"===t||"model:selection"===t};class Hi extends(Rn(Li)){constructor(t,e){super(t,e),Xi.call(this)}detach(){this.stopListening()}toRange(){return new Li(this.start,this.end)}static fromRange(t){return new Hi(t.start,t.end)}}function Xi(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Zi.call(this,s)},{priority:"low"})}function Zi(t){const e=this.getTransformedByOperation(t),s=Li._createFromRanges(e),n=!s.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let r=null;if(n){"$graveyard"==s.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=s.start,this.end=s.end,this.fire("change:range",e,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}Hi.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class tr extends $i{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new tr(this.data,this.getAttributes())}static fromJSON(t){return new tr(t.data,t.attributes)}}tr.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const er="selection:";(class extends(Rn(Ti)){_selection;constructor(t){super(),this._selection=new sr(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return er+t}static _isStoreAttributeKey(t){return t.startsWith(er)}}).prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class sr extends zi{markers=new Hn({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&"marker"!=s.type&&"rename"!=s.type&&"noop"!=s.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,s,n)=>{this._updateMarker(e,n)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const s=t.document.differ;for(const n of s.getChanges()){if("insert"!=n.type)continue;const s=n.position.parent;n.length===s.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(s.getAttributeKeys()).filter(t=>t.startsWith(er));for(const n of e)t.removeAttribute(n,s)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=_n();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new vn("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(t=>t.toJSON())),t}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new vn("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=Hi.fromRange(t);return e.on("change:range",(t,s,n)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=n.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const n=e.getRange();for(const s of this.getRanges())n.containsRange(s,!s.isCollapsed)&&t.push(e)}const s=Array.from(this.markers);for(const s of t)this.markers.has(s)||(this.markers.add(s),e=!0);for(const s of Array.from(this.markers))t.includes(s)||(this.markers.remove(s),e=!0);e&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,e){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let n=!1;const i=Array.from(this.markers),r=this.markers.has(t);if(e){let s=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){s=!0;break}s&&!r?(this.markers.add(t),n=!0):!s&&r&&(this.markers.remove(t),n=!0)}else r&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=Xn(this._getSurroundingAttributes()),s=Xn(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const n=[];for(const[t,e]of this.getAttributes())s.has(t)&&s.get(t)===e||n.push(t);for(const[t]of s)this.hasAttribute(t)||n.push(t);n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1})}_setAttribute(t,e,s=!0){const n=s?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,n),!0))}_removeAttribute(t,e=!0){const s=e?"normal":"low";return!("low"==s&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,s),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[e,s]of this.getAttributes())t.get(e)!==s&&this._removeAttribute(e,!1);for(const[s,n]of t)this._setAttribute(s,n,!1)&&e.add(s);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(er)){const s=e.substr(10);yield[s,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let s=null;if(this.isCollapsed){const n=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=nr(n,e)),s||(s=nr(i,e)),!this.isGravityOverridden&&!s){let t=n;for(;t&&!s;)t=t.previousSibling,s=nr(t,e)}if(!s){let t=i;for(;t&&!s;)t=t.nextSibling,s=nr(t,e)}s||(s=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const n of t){if(n.item.is("element")&&e.isObject(n.item)){s=nr(n.item,e);break}if("text"==n.type){s=n.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function nr(t,e){if(!t)return null;if(t instanceof Bi||t instanceof tr)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const s=[];for(const[n,i]of t.getAttributes())e.checkAttribute("$text",n)&&!1!==e.getAttributeProperties(n).copyFromObject&&s.push([n,i]);return s}class ir{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new vn("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new vn("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const s=[];for(const t of e){if(!(t instanceof $i))throw new vn("model-nodelist-insertnodes-not-node",this);s.push(t)}let n=this.indexToOffset(t);Zn(this._nodes,s,t),Zn(this._offsetToNode,function(t){const e=[];let s=0;for(const n of t)for(let t=0;t<n.offsetSize;t++)e[s++]=n;return e}(s),n);for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=n,n+=this._nodes[e].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let s=this.indexToOffset(t);const n=this._nodes.splice(t,e),i=n[n.length-1],r=i.startOffset+i.offsetSize-s;this._offsetToNode.splice(s,r);for(const t of n)t._index=null,t._startOffset=null;for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=s,s+=this._nodes[e].offsetSize;return n}_removeNodesArray(t){if(0==t.length)return;for(const e of t)e._index=null,e._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t]._index=t,this._nodes[t]._startOffset=e,e+=this._nodes[t].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}class rr extends $i{name;_children=new ir;constructor(t,e,s){super(e),this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}findAncestor(t,e={}){let s=e.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?function(t){const e=[];for(const s of t)e.push(s._clone(!0));return e}(this._children):void 0;return new rr(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){if("string"==typeof t)return[new tr(t)];Yn(t)||(t=[t]);const e=[];for(const s of t)"string"==typeof s?e.push(new tr(s)):s instanceof Bi?e.push(new tr(s.data,s.getAttributes())):e.push(s);return e}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const s of t.children)s.name?e.push(rr.fromJSON(s)):e.push(tr.fromJSON(s))}return new rr(t.name,t.attributes,e)}}rr.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;class or{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function ar(t,e){const s=lr(e),n=s.reduce((t,e)=>t+e.offsetSize,0),i=t.parent;dr(t);const r=t.index;return i._insertChild(r,s),cr(i,r+s.length),cr(i,r),new Li(t,t.getShiftedBy(n))}function hr(t,e){if(!t.isFlat)throw new vn("operation-utils-move-range-not-flat",this);const s=function(t){if(!t.isFlat)throw new vn("operation-utils-remove-range-not-flat",this);const e=t.start.parent;dr(t.start),dr(t.end);const s=e._removeChildren(t.start.index,t.end.index-t.start.index);return cr(e,t.start.index),s}(t);return ar(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),s)}function lr(t){const e=[];!function t(s){if("string"==typeof s)e.push(new tr(s));else if(s instanceof Bi)e.push(new tr(s.data,s.getAttributes()));else if(s instanceof $i)e.push(s);else if(Yn(s))for(const e of s)t(e)}(t);for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];s instanceof tr&&n instanceof tr&&fr(s,n)&&(e.splice(t-1,2,new tr(n.data+s.data,n.getAttributes())),t--)}return e}function cr(t,e){const s=t.getChild(e-1),n=t.getChild(e);if(s&&n&&s.is("$text")&&n.is("$text")&&fr(s,n)){const i=new tr(s.data+n.data,s.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function dr(t){const e=t.textNode,s=t.parent;if(e){const n=t.offset-e.startOffset,i=e.index;s._removeChildren(i,1);const r=new tr(e.data.substr(0,n),e.getAttributes()),o=new tr(e.data.substr(n),e.getAttributes());s._insertChild(i,[r,o])}}function fr(t,e){const s=t.getAttributes(),n=e.getAttributes();for(const t of s){if(t[1]!==e.getAttribute(t[0]))return!1;n.next()}return n.next().done}class ur extends or{sourcePosition;howMany;targetPosition;constructor(t,e,s,n){super(n),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[Li._createFromPositionAndShift(this.sourcePosition,this.howMany),Li._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new ur(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new ur(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,s=this.sourcePosition.offset,n=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new vn("move-operation-nodes-do-not-exist",this);if(t===e&&s<n&&n<s+this.howMany)throw new vn("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Kn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=s&&this.targetPosition.path[t]<s+this.howMany)throw new vn("move-operation-node-into-itself",this)}}_execute(){hr(Li._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const s=Fi.fromJSON(t.sourcePosition,e),n=Fi.fromJSON(t.targetPosition,e);return new this(s,t.howMany,n,t.baseVersion)}}class gr extends or{position;nodes;shouldReceiveAttributes;constructor(t,e,s){super(s),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new ir(lr(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new ir([...this.nodes].map(t=>t._clone(!0))),e=new gr(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new Fi(t,[0]);return new ur(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new vn("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new ir([...t].map(t=>t._clone(!0))),ar(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const s=[];for(const e of t.nodes)e.name?s.push(rr.fromJSON(e)):s.push(tr.fromJSON(e));const n=new gr(Fi.fromJSON(t.position,e),s,t.baseVersion);return n.shouldReceiveAttributes=t.shouldReceiveAttributes,n}}class pr extends or{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=s,this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Fi(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Li(this.splitPosition,t)}get affectedSelectable(){const t=[Li._createFromPositionAndShift(this.splitPosition,0),Li._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Li._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new pr(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new Fi(t,[0]);return new mr(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new vn("split-operation-position-invalid",this);if(!t.parent)throw new vn("split-operation-split-in-root",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new vn("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new vn("split-operation-graveyard-position-invalid",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)hr(Li._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();ar(this.insertionPosition,e)}hr(new Li(Fi._createAt(t,this.splitPosition.offset),Fi._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new Fi(t.root,e,"toPrevious")}static fromJSON(t,e){const s=Fi.fromJSON(t.splitPosition,e),n=Fi.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?Fi.fromJSON(t.graveyardPosition,e):null;return new this(s,t.howMany,n,i,t.baseVersion)}}class mr extends or{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new Fi(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Li(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Li._createOn(t),Li._createFromPositionAndShift(this.targetPosition,0),Li._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new mr(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),s=new Fi(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new pr(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new vn("merge-operation-source-position-invalid",this);if(!e.parent)throw new vn("merge-operation-target-position-invalid",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new vn("merge-operation-how-many-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent;hr(Li._createIn(t),this.targetPosition),hr(Li._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const s=Fi.fromJSON(t.sourcePosition,e),n=Fi.fromJSON(t.targetPosition,e),i=Fi.fromJSON(t.graveyardPosition,e);return new this(s,t.howMany,n,i,t.baseVersion)}}class br extends or{name;oldRange;newRange;affectsData;_markers;constructor(t,e,s,n,i,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=s?s.clone():null,this.affectsData=i,this._markers=n}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new br(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new br(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new br(t.name,t.oldRange?Li.fromJSON(t.oldRange,e):null,t.newRange?Li.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class _r extends or{range;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new _r(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new _r(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new vn("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Ns(t.getAttribute(this.key),this.oldValue))throw new vn("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new vn("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Ns(this.oldValue,this.newValue)||function(t,e,s){dr(t.start),dr(t.end);for(const n of t.getItems({shallow:!0})){const t=n.is("$textProxy")?n.textNode:n;null!==s?t._setAttribute(e,s):t._removeAttribute(e),cr(t.parent,t.index)}cr(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new _r(Li.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class yr extends or{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new yr(this.baseVersion)}getReversed(){return new yr(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class wr extends or{position;oldName;newName;constructor(t,e,s,n){super(n),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new wr(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new wr(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof rr))throw new vn("rename-operation-wrong-position",this);if(""!==this.oldName&&t.name!==this.oldName)throw new vn("rename-operation-wrong-name",this);this.oldName=t.name}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new wr(Fi.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class vr extends or{root;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.root=t,this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new vr(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new vr(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new vn("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new vn("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new vn("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new vn("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new vr(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class Pr extends or{rootName;elementName;isAdd;_document;constructor(t,e,s,n,i){super(i),this.rootName=t,this.elementName=e,this.isAdd=s,this._document=n,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new Pr(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new Pr(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new Pr(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const xr={};xr[_r.className]=_r,xr[gr.className]=gr,xr[br.className]=br,xr[ur.className]=ur,xr[yr.className]=yr,xr[or.className]=or,xr[wr.className]=wr,xr[vr.className]=vr,xr[Pr.className]=Pr,xr[pr.className]=pr,xr[mr.className]=mr;const Sr=new Map;function Ar(t,e,s){let n=Sr.get(t);n||(n=new Map,Sr.set(t,n)),n.set(e,s)}function Or(t,e,s){const n=t.nodes.getNode(0).getAttribute(e);if(n==s)return null;const i=new Li(t.position,t.position.getShiftedBy(t.howMany));return new _r(i,e,n,s,0)}function kr(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function Rr(t,e){const s=[];for(let n=0;n<t.length;n++){const i=t[n],r=new ur(i.start,i.end.offset-i.start.offset,e,0);s.push(r);for(let e=n+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return s}Ar(_r,_r,(t,e,s)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const n=t.range.getDifference(e.range).map(e=>new _r(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&s.aIsStrong&&n.push(new _r(i,e.key,e.newValue,t.newValue,0)),0==n.length?[new yr(0)]:n}return[t]}),Ar(_r,gr,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const s=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new _r(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const n=Or(e,t.key,t.oldValue);n&&s.unshift(n)}return s}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),Ar(_r,mr,(t,e)=>{const s=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&s.push(Li._createFromPositionAndShift(e.graveyardPosition,1));const n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||s.push(n),s.map(e=>new _r(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Ar(_r,ur,(t,e)=>{const s=function(t,e){const s=Li._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,i=[];s.containsRange(t,!0)?n=t:t.start.hasSameParentAs(s.start)?(i=t.getDifference(s),n=t.getIntersection(s)):i=[t];const r=[];for(let t of i){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const s=e.getMovedRangeStart(),n=t.start.hasSameParentAs(s),i=t._getTransformedByInsertion(s,e.howMany,n);r.push(...i)}return n&&r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}(t.range,e);return s.map(e=>new _r(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Ar(_r,pr,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const s=t.clone();return s.range=new Li(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,s]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),Ar(gr,_r,(t,e)=>{const s=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const n=Or(t,e.key,e.newValue);n&&s.push(n)}return s}),Ar(gr,gr,(t,e,s)=>(t.position.isEqual(e.position)&&s.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),Ar(gr,ur,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Ar(gr,pr,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),Ar(gr,mr,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),Ar(br,gr,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),Ar(br,br,(t,e,s)=>{if(t.name==e.name){if(!s.aIsStrong)return[new yr(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),Ar(br,mr,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),Ar(br,ur,(t,e)=>{const s=[t];if(t.oldRange&&(t.oldRange=Li._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const n=t.newRange._getTransformedByMoveOperation(e);t.newRange=n[0];for(let e=1;e<n.length;e++){const i=t.clone();i.oldRange=null,i.newRange=n[e],i.baseVersion=-1,s.push(i)}}return s}),Ar(br,pr,(t,e,s)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(s.abRelation){const n=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?s.abRelation.wasStartBeforeMergedElement?t.newRange.start=Fi._createAt(e.insertionPosition):s.abRelation.wasInLeftElement?t.newRange.start=Fi._createAt(t.newRange.start):t.newRange.start=Fi._createAt(e.moveTargetPosition):t.newRange.start=n.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&s.abRelation.wasEndBeforeMergedElement?t.newRange.end=Fi._createAt(e.insertionPosition):s.abRelation.wasInRightElement?t.newRange.end=Fi._createAt(e.moveTargetPosition):t.newRange.end=Fi._createAt(t.newRange.end):t.newRange.end=n.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),Ar(mr,gr,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),Ar(mr,mr,(t,e,s)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(s.bWasUndone){const s=e.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new Fi(e.graveyardPosition.root,s),t.howMany=0,[t]}return[new yr(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!s.bWasUndone&&"splitAtSource"!=s.abRelation){const n="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=e.targetPosition._getTransformedByMergeOperation(e),n=t.targetPosition._getTransformedByMergeOperation(e);return[new ur(s,t.howMany,n,0)]}return[new yr(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&s.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Ar(mr,ur,(t,e,s)=>{const n=Li._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!s.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new yr(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==s.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==s.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),Ar(mr,pr,(t,e,s)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition)||"mergeTargetNotMoved"==s.abRelation))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==s.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==s.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),Ar(ur,gr,(t,e)=>{const s=Li._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),Ar(ur,ur,(t,e,s)=>{const n=Li._createFromPositionAndShift(t.sourcePosition,t.howMany),i=Li._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,o=s.aIsStrong,a=!s.aIsStrong;if("insertBefore"==s.abRelation||"insertAfter"==s.baRelation?a=!0:"insertAfter"!=s.abRelation&&"insertBefore"!=s.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),kr(t,e)&&kr(e,t))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Rr([n],r);if(i.containsPosition(t.targetPosition)&&i.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Rr([n],r);const h=Kn(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==h||"extension"==h)return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Rr([n],r);"remove"!=t.type||"remove"==e.type||s.aWasUndone||s.forceWeakRemove?"remove"==t.type||"remove"!=e.type||s.bWasUndone||s.forceWeakRemove||(o=!1):o=!0;const l=[],c=n.getDifference(i);for(const t of c){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const s="same"==Kn(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,s);l.push(...n)}const d=n.getIntersection(i);return null!==d&&o&&(d.start=d.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.end=d.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(d):1==l.length?i.start.isBefore(n.start)||i.start.isEqual(n.start)?l.unshift(d):l.push(d):l.splice(1,0,d)),0===l.length?[new yr(t.baseVersion)]:Rr(l,r)}),Ar(ur,pr,(t,e,s)=>{let n=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=s.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==s.abRelation)return t.howMany++,t.targetPosition=n,[t];const i=Li._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=s.abRelation||t.howMany++,t.targetPosition=n,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new Li(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),Rr([new Li(i.start,e.splitPosition),t],n)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==s.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==s.abRelation&&(n=t.targetPosition);const r=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const n=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&n&&!s.aWasUndone&&r.push(Li._createFromPositionAndShift(e.insertionPosition,1))}return Rr(r,n)}),Ar(ur,mr,(t,e,s)=>{const n=Li._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||s.forceWeakRemove){if(1==t.howMany)return s.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new yr(0)]}else if(!s.aWasUndone){const s=[];let n=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(s.push(new ur(t.sourcePosition,t.howMany-1,r,0)),n=n._getTransformedByMove(t.sourcePosition,r,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,r),a=new ur(n,1,o,0),h=a.getMovedRangeStart().path.slice();h.push(0);const l=new Fi(a.targetPosition.root,h);i=i._getTransformedByMove(n,o,1);const c=new ur(i,e.howMany,l,0);return s.push(a),s.push(c),s}const i=Li._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),Ar(wr,gr,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),Ar(wr,mr,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),Ar(wr,ur,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Ar(wr,wr,(t,e,s)=>{if(t.position.isEqual(e.position)){if(!s.aIsStrong)return[new yr(0)];t.oldName=e.newName}return[t]}),Ar(wr,pr,(t,e)=>{if("same"==Kn(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new wr(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),Ar(vr,vr,(t,e,s)=>{if(t.root===e.root&&t.key===e.key){if(!s.aIsStrong||t.newValue===e.newValue)return[new yr(0)];t.oldValue=e.newValue}return[t]}),Ar(Pr,Pr,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new yr(0)]:[t]),Ar(pr,gr,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),Ar(pr,mr,(t,e,s)=>{if(!t.graveyardPosition&&!s.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const s=e.graveyardPosition.path.slice();s.push(0);const n=new Fi(e.graveyardPosition.root,s),i=pr.getInsertionPosition(new Fi(e.graveyardPosition.root,s)),r=new pr(n,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=pr.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=pr.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Ar(pr,ur,(t,e,s)=>{const n=Li._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!s.bWasUndone&&i){const s=t.splitPosition._getTransformedByMoveOperation(e),n=t.graveyardPosition._getTransformedByMoveOperation(e),i=n.path.slice();i.push(0);const r=new Fi(n.root,i);return[new ur(s,t.howMany,r,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==s.baRelation||"splitBefore"==s.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=pr.getInsertionPosition(t.splitPosition),[t];if(i&&s.abRelation&&s.abRelation.howMany){const{howMany:e,offset:n}=s.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(n),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=s,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=pr.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=pr.getInsertionPosition(t.splitPosition),[t]}),Ar(pr,pr,(t,e,s)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new yr(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new yr(0)];if("splitBefore"==s.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const n="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=[];return e.howMany&&s.push(new ur(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&s.push(new ur(t.splitPosition,t.howMany,t.moveTargetPosition,0)),s}return[new yr(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==s.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==s.baRelation){const s=e.insertionPosition.path.slice();s.push(0);const n=new Fi(e.insertionPosition.root,s);return[t,new ur(t.insertionPosition,1,n,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=pr.getInsertionPosition(t.splitPosition),[t]});function Nr(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Er.call(this,s)},{priority:"low"})}function Er(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}(class extends(Rn(Fi)){constructor(t,e,s="toNone"){if(super(t,e,s),!this.root.is("rootElement"))throw new vn("model-liveposition-root-not-rootelement",t);Nr.call(this)}detach(){this.stopListening()}toPosition(){return new Fi(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}).prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};(class extends rr{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,s="main"){super(e),this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;(class extends(Rn(Ti)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,s,n){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=s,this._affectsData=n}get managedUsingOperations(){if(!this._liveRange)throw new vn("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new vn("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new vn("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new vn("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new vn("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}).prototype.is=function(t){return"marker"===t||"model:marker"===t};class Mr extends Ti{markers=new Map;_children=new ir;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const s of t)s.name?e.push(rr.fromJSON(s)):e.push(tr.fromJSON(s));return new Mr(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){return"string"==typeof t?[new tr(t)]:(Yn(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new tr(t):t instanceof Bi?new tr(t.data,t.getAttributes()):t))}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}Mr.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t},new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]),Symbol("_treeDump"),Symbol("MainQueueId"),Symbol.iterator;function Tr(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}Tr('"'),Tr("'"),Tr("'"),Tr('"'),Tr('"'),Tr("'"),s(15098),s(28439),s(28004),s(2209),s(54879),s(45178),s(38418),s(59765),s(55167),s(87628),s(98181),s(67688),s(9553),s(45785),s(25743),s(34607),s(55391),s(63569),s(2522),s(94761),s(76281),s(75284),s(49027),s(4294),s(88317),s(45323),s(40840),s(70746),s(16366),s(83136),s(54166),s(40943),s(31834),s(43196),s(91936),s(39575),s(63394),s(81208),s(74571),s(82674),s(732),s(65854),s(70293),s(94457),s(76335),s(31513),s(19611),s(28317),s(94899),s(15542),s(51161),s(88793),s(89562),s(44205),s(86008),s(11004),s(54387),s(50836),s(27884),s(1105),s(33994),s(50544),s(53518),s(71952),s(17873),s(10813),s(86157),s(64990),s(86502),s(12182),s(56380),s(86354),s(90331),s(59238),s(75501),s(13052),s(78523),s(23480),s(78927),s(76297),s(34362),s(39627),s(91268),s(69285),s(33062),s(60298),s(94245),s(76217),s(47248),s(24201),s(35061),s(36761),s(32336),s(98082),s(77364),s(91122),s(99297),s(62886),s(52730),s(988),s(51130),s(70615),s(75956),s(11592),s(6984),s(62487),s(36586),s(89062),s(76444),s(74349),s(21351),s(40867),s(65781),s(43722),s(8812),s(26484),s(1322),s(79922),s(1778),s(27809),s(7965),s(52615),s(69059),s(11163),s(20380),s(47907),s(59910),s(66527),s(42755),s(15430),s(14421),s(86027),s(98105),s(18945),s(58705),s(70334),s(95893),s(13709),s(12711),s(13190),s(51638),s(63811),s(16627),s(4103),s(44145),s(87435),s(60904),s(31576),s(5206),s(8009),s(69053),s(68219),s(34859),s(54342),s(91010),s(97127),s(65186),s(70886),s(71230);var Br=s(68);let Cr;s(40730),s(3620),s(18064),s(12928),s(88369),s(98188),s(20737),s(68813),s(57225),s(55900),s(3357),s(9303),s(64754),s(12109),s(82014),s(65751),s(75205),s(54370),s(56683),s(8204),s(90633),s(97398),s(97213),s(24880),s(60920),s(84825),s(49135),s(93724),s(37726),s(80430),s(65220),s(18379),s(73207),s(67492),s(17386),s(78563),s(81446),s(37748),s(47683),s(53195),s(60700),s(4307),s(42291),s(68807),s(28406),s(68784),(new DOMParser).parseFromString(Br,"image/svg+xml").firstChild;try{Cr={window,document}}catch{Cr={window:{},document:{}}}class Ir{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const Fr=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function Jr(){const[t,e,s,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+Fr[255&t]+Fr[t>>8&255]+Fr[t>>16&255]+Fr[t>>24&255]+Fr[255&e]+Fr[e>>8&255]+Fr[e>>16&255]+Fr[e>>24&255]+Fr[255&s]+Fr[s>>8&255]+Fr[s>>16&255]+Fr[s>>24&255]+Fr[255&n]+Fr[n>>8&255]+Fr[n>>16&255]+Fr[n>>24&255]}const Vr={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function qr(t,e){const s=Vr.get(e.priority);let n=0,i=t.length;for(;n<i;){const e=n+i>>1;Vr.get(t[e].priority)<s?i=e:n=e+1}t.splice(n,0,e)}class Dr extends Error{context;data;constructor(t,e,s,n){super(function(t,e,s){const n=new WeakSet;return t+(e?` ${JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e})}`:"")+Lr(t)+(s?`\nOriginal error: ${s.name}: ${s.message}`:"")}(t,s,n)),this.name="CKEditorError",this.context=e,this.data=s,n&&(this.stack=n.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new Dr("unexpected-error",e,void 0,t)}}function jr(t,e){console.warn(...function(t,e){const s=Lr(t);return e?[t,e,s]:[t,s]}(t,e))}function Lr(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}if(new Date(2025,9,1),globalThis.CKEDITOR_VERSION)throw new Dr("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION="47.0.0";const $r=Symbol("listeningTo"),zr=Symbol("emitterId"),Wr=Symbol("delegations"),Ur=Gr(Object);function Gr(t){return t?class extends t{on(t,e,s){this.listenTo(this,t,e,s)}once(t,e,s){let n=!1;this.listenTo(this,t,(t,...s)=>{n||(n=!0,t.off(),e.call(this,t,...s))},s)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,s,n={}){let i,r;this[$r]||(this[$r]={});const o=this[$r];Kr(t)||function(t,e){t[zr]||(t[zr]=e||Jr())}(t);const a=Kr(t);(i=o[a])||(i=o[a]={emitter:t,callbacks:{}}),(r=i.callbacks[e])||(r=i.callbacks[e]=[]),r.push(s),function(t,e,s,n,i){e._addEventListener?e._addEventListener(s,n,i):t._addEventListener.call(e,s,n,i)}(this,t,e,s,n)}stopListening(t,e,s){const n=this[$r];let i=t&&Kr(t);const r=n&&i?n[i]:void 0,o=r&&e?r.callbacks[e]:void 0;if(!(!n||t&&!r||e&&!o))if(s)Zr(this,t,e,s),-1!==o.indexOf(s)&&(1===o.length?delete r.callbacks[e]:Zr(this,t,e,s));else if(o){for(;s=o.pop();)Zr(this,t,e,s);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete n[i]}else{for(i in n)this.stopListening(n[i].emitter);delete this[$r]}}fire(t,...e){try{const s=t instanceof Ir?t:new Ir(this,t),n=s.name;let i=function(t,e){if(!t._events)return null;let s=e;do{const e=t._events[s];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const n=s.lastIndexOf(":");s=n>-1?s.substring(0,n):""}while(s);return null}(this,n);if(s.path.push(this),i){i=i.slice();for(let t=0;t<i.length;t++){const r=i[t].callback;if(r.call(this,s,...e),s.off.called&&(delete s.off.called,this._removeEventListener(n,r)),s.stop.called)break}}const r=this[Wr];if(r){const t=r.get(n),i=r.get("*");t&&Xr(t,s,e),i&&Xr(i,s,e)}return s.return}catch(t){Dr.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,s)=>{this[Wr]||(this[Wr]=new Map),t.forEach(t=>{const n=this[Wr].get(t);n?n.set(e,s):this[Wr].set(t,new Map([[e,s]]))})}}}stopDelegating(t,e){if(this[Wr])if(t)if(e){const s=this[Wr].get(t);s&&s.delete(e)}else this[Wr].delete(t);else this[Wr].clear()}_addEventListener(t,e,s){!function(t,e){const s=Yr(t);if(s[e])return;let n=e,i=null;const r=[];for(;""!==n&&!s[n];)s[n]=Qr(),r.push(s[n]),i&&s[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(":"));if(""!==n){for(const t of r)t.callbacks=s[n].callbacks.slice();s[n].childEvents.push(i)}}(this,t);const n=Hr(this,t),i={callback:e,priority:Vr.get(s.priority)};for(const t of n)qr(t,i)}_removeEventListener(t,e){const s=Hr(this,t);for(const t of s)for(let s=0;s<t.length;s++)t[s].callback==e&&(t.splice(s,1),s--)}}:Ur}function Kr(t){return t[zr]}function Yr(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Qr(){return{callbacks:[],childEvents:[]}}function Hr(t,e){const s=Yr(t)[e];if(!s)return[];let n=[s.callbacks];for(let e=0;e<s.childEvents.length;e++){const i=Hr(t,s.childEvents[e]);n=n.concat(i)}return n}function Xr(t,e,s){for(let[n,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new Ir(e.source,i);t.path=[...e.path],n.fire(t,...s)}}function Zr(t,e,s,n){e._removeEventListener?e._removeEventListener(s,n):t._removeEventListener.call(e,s,n)}const to=Symbol("observableProperties"),eo=Symbol("boundObservables"),so=Symbol("boundProperties"),no=Symbol("decoratedMethods"),io=Symbol("decoratedOriginal"),ro=oo(Gr());function oo(t){return t?class extends t{set(t,e){if(U(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);ao(this);const s=this[to];if(t in this&&!s.has(t))throw new Dr("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>s.get(t),set(e){const n=s.get(t);let i=this.fire(`set:${t}`,t,e,n);void 0===i&&(i=e),n===i&&s.has(t)||(s.set(t,i),this.fire(`change:${t}`,t,i,n))}}),this[t]=e}bind(...t){if(!t.length||!co(t))throw new Dr("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new Dr("observable-bind-duplicate-properties",this);ao(this);const e=this[so];t.forEach(t=>{if(e.has(t))throw new Dr("observable-bind-rebind",this)});const s=new Map;return t.forEach(t=>{const n={property:t,to:[]};e.set(t,n),s.set(t,n)}),{to:ho,toMany:lo,_observable:this,_bindProperties:t,_to:[],_bindings:s}}unbind(...t){if(!this[to])return;const e=this[so],s=this[eo];if(t.length){if(!co(t))throw new Dr("observable-unbind-wrong-properties",this);t.forEach(t=>{const n=e.get(t);n&&(n.to.forEach(([t,e])=>{const i=s.get(t),r=i[e];r.delete(n),r.size||delete i[e],Object.keys(i).length||(s.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else s.forEach((t,e)=>{this.stopListening(e,"change")}),s.clear(),e.clear()}decorate(t){ao(this);const e=this[t];if(!e)throw new Dr("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,s)=>{t.return=e.apply(this,s)}),this[t]=function(...e){return this.fire(t,e)},this[t][io]=e,this[no]||(this[no]=[]),this[no].push(t)}stopListening(t,e,s){if(!t&&this[no]){for(const t of this[no])this[t]=this[t][io];delete this[no]}super.stopListening(t,e,s)}[to];[no];[so];[eo]}:ro}function ao(t){t[to]||(Object.defineProperty(t,to,{value:new Map}),Object.defineProperty(t,eo,{value:new Map}),Object.defineProperty(t,so,{value:new Map}))}function ho(...t){const e=function(...t){if(!t.length)throw new Dr("observable-bind-to-parse-error",null);const e={to:[]};let s;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)s.properties.push(t);else{if("object"!=typeof t)throw new Dr("observable-bind-to-parse-error",null);s={observable:t,properties:[]},e.to.push(s)}}),e}(...t),s=Array.from(this._bindings.keys()),n=s.length;if(!e.callback&&e.to.length>1)throw new Dr("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new Dr("observable-bind-to-extra-callback",this);var i;e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==n)throw new Dr("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(s[0]).callback=e.callback),i=this._observable,this._to.forEach(t=>{const e=i[eo];let s;e.get(t.observable)||i.listenTo(t.observable,"change",(n,r)=>{s=e.get(t.observable)[r],s&&s.forEach(t=>{fo(i,t.property)})})}),function(t){let e;t._bindings.forEach((s,n)=>{t._to.forEach(i=>{e=i.properties[s.callback?0:t._bindProperties.indexOf(n)],s.to.push([i.observable,e]),function(t,e,s,n){const i=t[eo],r=i.get(s),o=r||{};o[n]||(o[n]=new Set),o[n].add(e),r||i.set(s,o)}(t._observable,s,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{fo(this._observable,t)})}function lo(t,e,s){if(this._bindings.size>1)throw new Dr("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const s=t.map(t=>[t,e]);return Array.prototype.concat.apply([],s)}(t,e),s)}function co(t){return t.every(t=>"string"==typeof t)}function fo(t,e){const s=t[so].get(e);let n;s.callback?n=s.callback.apply(t,s.to.map(t=>t[0][t[1]])):(n=s.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=n:t.set(e,n)}function uo(t){let e=0;for(const s of t)e++;return e}function go(t,e){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++)if(t[n]!=e[n])return n;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function po(t){return!(!t||!t[Symbol.iterator])}function mo(t){return Array.isArray(t)?t:[t]}Cr.window.CKEDITOR_TRANSLATIONS||(Cr.window.CKEDITOR_TRANSLATIONS={});class bo extends(Gr()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const s=po(t);if(s||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new Dr("collection-add-item-invalid-index",this);let s=0;for(const n of t){const t=this._getItemIdBeforeAdding(n),i=e+s;this._items.splice(i,0,n),this._itemMap.set(t,n),this.fire("add",n,i),s++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new Dr("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,s]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:s}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new Dr("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,s=(s,n,i)=>{const r=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(n);if(r&&o)this._bindToExternalToInternalMap.set(n,o),this._bindToInternalToExternalMap.set(o,n);else{const s=t(n);if(!s)return void this._skippedIndexesFromExternal.push(i);let r=i;for(const t of this._skippedIndexesFromExternal)i>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(n,s),this._bindToInternalToExternalMap.set(s,n),this.add(s,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)s(0,t,e.getIndex(t));this.listenTo(e,"add",s),this.listenTo(e,"remove",(t,e,s)=>{const n=this._bindToExternalToInternalMap.get(e);n&&this.remove(n),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(s<e&&t.push(e-1),s>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let s;if(e in t){if(s=t[e],"string"!=typeof s)throw new Dr("collection-add-invalid-id",this);if(this.get(s))throw new Dr("collection-add-item-already-exists",this)}else t[e]=s=Jr();return s}_remove(t){let e,s,n,i=!1;const r=this._idProperty;if("string"==typeof t?(s=t,n=this._itemMap.get(s),i=!n,n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,n=this._items[e],i=!n,n&&(s=n[r])):(n=t,s=n[r],e=this._items.indexOf(n),i=-1==e||!this._itemMap.get(s)),i)throw new Dr("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(s);const o=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(o),this.fire("remove",n,e),[n,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function _o(t){return po(t)?new Map(t):function(t){const e=new Map;for(const s in t)e.set(s,t[s]);return e}(t)}function yo(t,e,s){const n=t.length,i=e.length;for(let e=n-1;e>=s;e--)t[e+i]=t[e];for(let n=0;n<i;n++)t[s+n]=e[n]}Symbol.iterator,Symbol.iterator;new WeakMap;class wo{is(){throw new Error("is() method is abstract")}}class vo extends(Gr(wo)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new Dr("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=go(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s),this.parent&&this.parent._fireChange(t,e,s)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}vo.prototype.is=function(t){return"node"===t||"view:node"===t};class Po extends vo{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof Po&&(this===t||this.data===t.data)}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new Po(this.document,this.data)}}Po.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class xo extends wo{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.data.length)throw new Dr("view-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.data.length)throw new Dr("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let s=t.includeSelf?this.textNode:this.parent;for(;null!==s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}}function So(t,e,s){if("string"!=typeof e)for(const n of e)Array.isArray(n)?t.push(n):t.push(s?[s,n]:[n]);else t.push(s?[s,e]:[e])}xo.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class Ao{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const s=this._isElementMatching(e,t);if(s)return{element:e,pattern:t,match:s}}return null}matchAll(...t){const e=[];for(const s of t)for(const t of this._patterns){const n=this._isElementMatching(s,t);n&&e.push({element:s,pattern:t,match:n})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const s=e(t);return s&&"object"==typeof s?function(t){const e=[];return"attributes"in t&&t.attributes&&So(e,t.attributes),"classes"in t&&t.classes&&So(e,t.classes,"class"),"styles"in t&&t.styles&&So(e,t.styles,"style"),{name:t.name||!1,attributes:e}}(s):s}const s={};if(e.name&&(s.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!s.name))return null;const n=[];return e.attributes&&!function(t,e,s){let n;return"object"!=typeof t||t instanceof RegExp||Array.isArray(t)?n=["class","style"]:(void 0!==t.style&&jr("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&jr("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(ko(t),s,n)}(e.attributes,t,n)||e.classes&&!function(t,e,s){return e._collectAttributesMatch(ko(t,"class"),s)}(e.classes,t,n)||e.styles&&!function(t,e,s){return e._collectAttributesMatch(ko(t,"style"),s)}(e.styles,t,n)?null:(n.length&&(s.attributes=n),s)}}function Oo(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function ko(t,e){if(Array.isArray(t))return t.map(t=>"object"!=typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||jr("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!=typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const s=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.push(e?[e,n,t[n]]:[n,t[n]]);return s}class Ro{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=function(t){let e=null,s=0,n=0,i=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(null===e)switch(a){case":":i||(i=t.substr(s,o-s),n=o+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(n,o-n);i&&r.set(i.trim(),e.trim()),i=null,s=o+1;break}}else a===e&&(e=null)}return r}(t);for(const[t,s]of e)this._styleProcessor.toNormalizedForm(t,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,U(t))for(const[e,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const s of mo(t)){const t=No(s),n=ae(this._styles,t);if(n)Eo(e,t,n);else{const t=this.getAsString(s);void 0!==t&&this._styleProcessor.toNormalizedForm(s,t,e)}}Object.keys(e).length&&(Mo(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!U(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const s of e)t.push(...this._styleProcessor.getReducedForm(s,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const s=[];for(const n of this.getStyleNames(!0))if(Oo(t,n)){if(!0===e){s.push(n);continue}Oo(e,this.getAsString(n))&&s.push(n)}return s.length?s:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s)}else for(const t of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s);e.push(t)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}function No(t){return t.replace("-",".")}function Eo(t,e,s){let n=s;U(s)&&(n=Ut({},ae(t,e),s)),pe(t,e,n)}function Mo(t,e){for(const s of Object.keys(e))null===t[s]||Array.isArray(t[s])||"object"!=typeof t[s]||"object"!=typeof e[s]?delete t[s]:(Mo(t[s],e[s]),Object.keys(t[s]).length||delete t[s])}class To{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of mo(t))e&&this._set.add(e)}remove(t){for(const e of mo(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const s of t.split(/\s+/)){if(!this._set.has(s))return;e.push(s)}return e}for(const s of this._set.keys())s.match(t)&&e.push(s);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class Bo extends vo{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,s,n){super(t),this.name=e,this._attrs=this._parseAttributes(s),this._children=[],n&&this._insertChild(0,n)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(Io(this.name,t)||Co(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof Bo))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,s]of this._attrs){const n=t._attrs.get(e);if(void 0===n)return!1;if("string"==typeof s||"string"==typeof n){if(n!==s)return!1}else if(!s.isSimilar(n))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new Ao(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(e.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==s?"":` ${s}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=[];if(t)for(const s of this.getChildren())e.push(s._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,e);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){if("string"==typeof e)return[new Po(t,e)];po(e)||(e=[e]);const s=[];for(const n of e)"string"==typeof n?s.push(new Po(t,n)):n instanceof xo?s.push(new Po(t,n.data)):s.push(n);return s}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,s=!0){if(this._fireChange("attributes",this),Io(this.name,t)||Co(this.name,t)){let n=this._attrs.get(t);n||(n=Io(this.name,t)?new Ro(this.document.stylesProcessor):new To,this._attrs.set(t,n)),s?n.setTo(String(e)):Io(this.name,t)?Array.isArray(e)?n.set(e[0],e[1]):n.set(e):n.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(Io(this.name,t)||Co(this.name,t))){const s=this._attrs.get(t);return!!s&&(Co(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),s.remove(e),!!s.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,s){for(const[n,i,r]of t){let t=!1,o=!1;for(const[a,h]of this._attrs)if(!(s&&s.includes(a)||!Oo(n,a)))if(t=!0,"string"==typeof h){if(Oo(i,h))e.push([a]),o=!0;else if(!(n instanceof RegExp))return!1}else{const t=h._getTokensMatch(i,r||!0);if(t){o=!0;for(const s of t)e.push([a,s])}else if(!(n instanceof RegExp))return!1}if(!t||!o)return!1}return!0}_getConsumables(t,e){const s=[];if(t){const n=this._attrs.get(t);if(void 0!==n)if("string"==typeof n)s.push([t]);else for(const i of n._getConsumables(e))s.push([t,i])}else for(const[t,e]of this._attrs)if("string"==typeof e)s.push([t]);else for(const n of e._getConsumables())s.push([t,n]);return{name:!t,attributes:s}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._canMergeFrom(s))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof s?this._setAttribute(e,s):t._mergeFrom(s)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._isMatching(s))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof s?this._attrs.delete(e):(t.remove(s.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=_o(t);for(const[t,s]of e)if(null===s)e.delete(t);else if(Io(this.name,t)){const n=s instanceof Ro?s._clone():new Ro(this.document.stylesProcessor).setTo(String(s));e.set(t,n)}else if(Co(this.name,t)){const n=s instanceof To?s._clone():(new To).setTo(String(s));e.set(t,n)}else"string"!=typeof s&&e.set(t,String(s));return e}}function Co(t,e){return"class"==e||"a"==t&&"rel"==e}function Io(t,e){return"style"==e}Bo.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Fo extends Bo{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Jo}toJSON(){const t=super.toJSON();return t.type="ContainerElement",t}}function Jo(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}Fo.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Vo extends(oo(Fo)){constructor(t,e,s,n){super(t,e,s,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const t=super.toJSON();return t.type="EditableElement",t.isReadOnly=this.isReadOnly,t.isFocused=this.isFocused,t}}Vo.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const qo=Symbol("rootName");(class extends Vo{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(qo)}set rootName(t){this._setCustomProperty(qo,t)}toJSON(){return this.rootName}set _name(t){this.name=t}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Do{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new Dr("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new Dr("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=jo._createAt(t.startPosition):this._position=jo._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s;do{s=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=s)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&t.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let n;if(s&&s.is("view:$text")){if(t.isAtEnd)return this._position=jo._createAfter(s),this._next();n=s.data[t.offset]}else n=s.getChild(t.offset);if("string"==typeof n){let n;n=this.singleCharacters?1:(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-t.offset;const i=new xo(s,t.offset,n);return t.offset+=n,this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new jo(n,0);return this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new jo(n,0),this._position=t,this._next();let s,i=n.data.length;return n==this._boundaryEndParent?(i=this.boundaries.end.offset,s=new xo(n,0,i),t=jo._createAfter(s)):(s=new xo(n,0,n.data.length),t.offset++),this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=jo._createAfter(s),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,t)}_previous(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&0===t.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let n;if(s.is("view:$text")){if(t.isAtStart)return this._position=jo._createBefore(s),this._previous();n=s.data[t.offset-1]}else n=s.getChild(t.offset-1);if("string"==typeof n){let n;if(this.singleCharacters)n=1;else{const e=s===this._boundaryStartParent?this.boundaries.start.offset:0;n=t.offset-e}t.offset-=n;const i=new xo(s,t.offset,n);return this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new jo(n,n.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new jo(n,n.data.length),this._position=t,this._previous();let s,i=n.data.length;if(n==this._boundaryStartParent){const e=this.boundaries.start.offset;s=new xo(n,e,n.data.length-e),i=s.data.length,t=jo._createBefore(s)}else s=new xo(n,0,n.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=jo._createBefore(s),this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}_formatReturnValue(t,e,s,n,i){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?s=jo._createAfter(e.textNode):(n=jo._createAfter(e.textNode),this._position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?s=jo._createBefore(e.textNode):(n=jo._createBefore(e.textNode),this._position=n))),{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}}class jo extends wo{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof Vo);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=jo._createAt(this),s=e.offset+t;return e.offset=s<0?0:s,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new Do(e);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),s.push(t.offset);const n=go(e,s);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<s[n]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new Do(t)}clone(){return new jo(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,e){if(t instanceof jo)return new this(t.parent,t.offset);{const s=t;if("end"==e)e=s.is("$text")?s.data.length:s.childCount;else{if("before"==e)return this._createBefore(s);if("after"==e)return this._createAfter(s);if(0!==e&&!e)throw new Dr("view-createpositionat-offset-required",s)}return new jo(s,e)}}static _createAfter(t){if(t.is("$textProxy"))return new jo(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new Dr("view-position-after-root",t,{root:t});return new jo(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new jo(t.textNode,t.offsetInText);if(!t.parent)throw new Dr("view-position-before-root",t,{root:t});return new jo(t.parent,t.index)}}jo.prototype.is=function(t){return"position"===t||"view:position"===t};class Lo extends wo{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new Do({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition($o,{direction:"backward"}),e=this.end.getLastMatchingPosition($o);return t.parent.is("$text")&&t.isAtStart&&(t=jo._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=jo._createAfter(e.parent)),new Lo(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition($o);if(t.isAfter(this.end)||t.isEqual(this.end))return new Lo(t,t);let e=this.end.getLastMatchingPosition($o,{direction:"backward"});const s=t.nodeAfter,n=e.nodeBefore;return s&&s.is("$text")&&(t=new jo(s,0)),n&&n.is("$text")&&(e=new jo(n,n.data.length)),new Lo(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Lo(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Lo(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Lo(e,s)}return null}getWalker(t={}){return t.boundaries=this,new Do(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Lo(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Do(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new Do(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,e,s,n){return new this(new jo(t,e),new jo(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(jo._createBefore(t),e)}}function $o(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}Lo.prototype.is=function(t){return"range"===t||"view:range"===t};class zo extends(Gr(wo)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=uo(this.getRanges());if(e!=uo(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let s=!1;for(let n of t.getRanges())if(n=n.getTrimmed(),e.start.isEqual(n.start)&&e.end.isEqual(n.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]),this._setFakeOptions(n);else if(e instanceof zo||e instanceof Wo)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Lo)this._setRanges([e],n&&n.backward),this._setFakeOptions(n);else if(e instanceof jo)this._setRanges([new Lo(e)]),this._setFakeOptions(n);else if(e instanceof vo){const t=!!n&&!!n.backward;let i;if(void 0===s)throw new Dr("view-selection-setto-required-second-parameter",this);i="in"==s?Lo._createIn(e):"on"==s?Lo._createOn(e):new Lo(jo._createAt(e,s)),this._setRanges([i],t),this._setFakeOptions(n)}else{if(!po(e))throw new Dr("view-selection-setto-not-selectable",this);this._setRanges(e,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new Dr("view-selection-setfocus-no-ranges",this);const s=jo._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.pop(),"before"==s.compareWith(n)?this._addRange(new Lo(s,n),!0):this._addRange(new Lo(n,s)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof Lo))throw new Dr("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new Dr("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new Lo(t.start,t.end))}}zo.prototype.is=function(t){return"selection"===t||"view:selection"===t};class Wo extends(Gr(wo)){_selection;constructor(...t){super(),this._selection=new zo,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}Wo.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t},Symbol("bubblingEmitter"),Symbol("bubblingCallbacks"),Symbol("bubblingContexts");function Uo(){if(Go(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(Go(t)>1)return null;t=t.parent}return!t||Go(t)>1?null:this.childCount}function Go(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}(class extends Bo{static DEFAULT_PRIORITY=10;_priority=10;_id=null;_clonesGroup=null;constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Uo}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new Dr("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}).prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Ko(){return null}(class extends Bo{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ko}toJSON(){const t=super.toJSON();return t.type="EmptyElement",t}_insertChild(t,e){if(e&&(e instanceof vo||Array.from(e).length>0))throw new Dr("view-emptyelement-cannot-add",[this,e]);return 0}}).prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Yo(){return null}(class extends Bo{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Yo}_insertChild(t,e){if(e&&(e instanceof vo||Array.from(e).length>0))throw new Dr("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}toJSON(){const t=super.toJSON();return t.type="UIElement",t}}).prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Qo(){return null}(class extends Bo{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Qo}toJSON(){const t=super.toJSON();return t.type="RawElement",t}_insertChild(t,e){if(e&&(e instanceof vo||Array.from(e).length>0))throw new Dr("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}).prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Ho extends(Gr(wo)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){return"string"==typeof e?[new Po(t,e)]:(po(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new Po(t,e):e instanceof xo?new Po(t,e.data):e))}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}Ho.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};"".repeat(7),(t=>{const e=t.createElement("br");e.dataset.ckeFiller="true"})(Cr.document),(t=>{t.createTextNode("")})(Cr.document),(t=>{const e=t.createElement("span");e.dataset.ckeFiller="true",e.innerText=""})(Cr.document);class Xo{is(){throw new Error("is() method is abstract")}}class Zo extends Xo{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new Dr("model-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.offsetSize)throw new Dr("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Zo.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class ta{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new Dr("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new Dr("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=sa._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s,n,i;do{n=this.position,i=this._visitedParent,({done:e,value:s}=this.next())}while(!e&&t(s));e||(this._position=n,this._visitedParent=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const n=na(e,s),i=n||ia(e,s,n);if(i&&i.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=i;return this._position=e,ea("elementStart",i,t,e,1)}if(i&&i.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=i.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),n=t-e.offset}const r=e.offset-i.startOffset,o=new Zo(i,r,n);return e.offset+=n,this._position=e,ea("text",o,t,e,n)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():ea("elementEnd",s,t,e)}_previous(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&0===e.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const n=e.parent,i=na(e,n),r=i||ra(e,n,i);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,ea("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():ea("elementEnd",r,t,e));if(r&&r.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=r.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),n=e.offset-t}const i=e.offset-r.startOffset,o=new Zo(r,i-n,n);return e.offset-=n,this._position=e,ea("text",o,t,e,n)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,ea("elementStart",s,t,e,1)}}function ea(t,e,s,n,i){return{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}class sa extends Xo{root;path;stickiness;constructor(t,e,s="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new Dr("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new Dr("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new Dr("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new Dr("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return na(this,this.parent)}get nodeAfter(){const t=this.parent;return ia(this,t,na(this,t))}get nodeBefore(){const t=this.parent;return ra(this,t,na(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=go(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new ta(e);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=go(this.path,t.path),s="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,s)}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}getShiftedBy(t){const e=this.clone(),s=e.offset+t;return e.offset=s<0?0:s,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let s=0;s<e;s++){const e=this.path[s]-t.path[s];if(e<-1||e>1)return!1;if(1===e)return oa(t,this,s);if(-1===e)return oa(this,t,s)}return this.path.length===t.path.length||(this.path.length>t.path.length?aa(this.path,e):aa(t.path,e))}hasSameParentAs(t){return this.root===t.root&&"same"==go(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=sa._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let s;return e.containsPosition(this)||e.start.isEqual(this)?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):s=this.isEqual(t.deletionPosition)?sa._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,e){const s=sa._createAt(this);if(this.root!=t.root)return s;if("same"==go(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;s.offset-=e}}else if("prefix"==go(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n])return null;s.path[n]-=e}}return s}_getTransformedByInsertion(t,e){const s=sa._createAt(this);if(this.root!=t.root)return s;if("same"==go(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(s.offset+=e);else if("prefix"==go(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;t.offset<=this.path[n]&&(s.path[n]+=e)}return s}_getTransformedByMove(t,e,s){if(e=e._getTransformedByDeletion(t,s),t.isEqual(e))return sa._createAt(this);const n=this._getTransformedByDeletion(t,s);return null===n||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(s).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):n._getTransformedByInsertion(e,s)}_getCombined(t,e){const s=t.path.length-1,n=sa._createAt(e);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[s]-t.offset,n.path=[...n.path,...this.path.slice(s+1)],n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,s="toNone"){if(t.is("model:position"))return new sa(t.root,t.path,t.stickiness);{const n=t;if("end"==e)e=n.maxOffset;else{if("before"==e)return this._createBefore(n,s);if("after"==e)return this._createAfter(n,s);if(0!==e&&!e)throw new Dr("model-createpositionat-offset-required",[this,t])}if(!n.is("element")&&!n.is("documentFragment"))throw new Dr("model-position-parent-incorrect",[this,t]);const i=n.getPath();return i.push(e),new this(n.root,i,s)}}static _createAfter(t,e){if(!t.parent)throw new Dr("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new Dr("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const s=new sa(e.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!e.getRoot(t.root))throw new Dr("model-position-fromjson-no-root",e,{rootName:t.root});return new sa(e.getRoot(t.root),t.path,t.stickiness)}}function na(t,e){const s=e.getChildAtOffset(t.offset);return s&&s.is("$text")&&s.startOffset<t.offset?s:null}function ia(t,e,s){return null!==s?null:e.getChildAtOffset(t.offset)}function ra(t,e,s){return null!==s?null:e.getChild(e.offsetToIndex(t.offset)-1)}function oa(t,e,s){return s+1!==t.path.length&&!!aa(e.path,s+1)&&!!function(t,e){let s=t.parent,n=t.path.length-1,i=0;for(;n>=e;){if(t.path[n]+i!==s.maxOffset)return!1;i=1,n--,s=s.parent}return!0}(t,s+1)}function aa(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}sa.prototype.is=function(t){return"position"===t||"model:position"===t};class ha extends Xo{start;end;constructor(t,e){super(),this.start=sa._createAt(t),this.end=e?sa._createAt(e):sa._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new ta({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==go(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}containsItem(t){const e=sa._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new ha(this.start,t.start)),this.containsPosition(t.end)&&e.push(new ha(t.end,this.end))):e.push(new ha(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new ha(e,s)}return null}getJoined(t,e=!1){let s=this.isIntersecting(t);if(s||(s=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let n=this.start,i=this.end;return t.start.isBefore(n)&&(n=t.start),t.end.isAfter(i)&&(i=t.end),new ha(n,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,s=sa._createAt(this.start);let n=s.parent;for(;s.path.length>e+1;){const e=n.maxOffset-s.offset;0!==e&&t.push(new ha(s,s.getShiftedBy(e))),s.path=s.path.slice(0,-1),s.offset++,n=n.parent}for(;s.path.length<=this.end.path.length;){const e=this.end.path[s.path.length-1],n=e-s.offset;0!==n&&t.push(new ha(s,s.getShiftedBy(n))),s.offset=e,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new ta(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new ta(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new ta(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new ha(this.start,this.end)]}getTransformedByOperations(t){const e=[new ha(this.start,this.end)];for(const s of t)for(let t=0;t<e.length;t++){const n=e[t].getTransformedByOperation(s);e.splice(t,1,...n),t+=n.length-1}for(let t=0;t<e.length;t++){const s=e[t];for(let n=t+1;n<e.length;n++){const t=e[n];(s.containsRange(t)||t.containsRange(s)||s.isEqual(t))&&e.splice(n,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const s=t.sourcePosition,n=t.howMany,i=t.targetPosition;return this._getTransformedByMove(s,i,n,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),e.root!=s.root&&(s=this.end.getShiftedBy(-1)),new ha(e,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new ha(this.start);let e=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return e.root!=s.root&&(s=this.end.getShiftedBy(-1)),e.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(e=sa._createAt(s),e.offset=0):(t.deletionPosition.isEqual(e)||(s=t.deletionPosition),e=t.targetPosition),new ha(e,s)):new ha(e,s)}_getTransformedByInsertion(t,e,s=!1){if(s&&this.containsPosition(t))return[new ha(this.start,t),new ha(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const s=new ha(this.start,this.end);return s.start=s.start._getTransformedByInsertion(t,e),s.end=s.end._getTransformedByInsertion(t,e),[s]}}_getTransformedByMove(t,e,s,n=!1){if(this.isCollapsed){const n=this.start._getTransformedByMove(t,e,s);return[new ha(n)]}const i=ha._createFromPositionAndShift(t,s),r=e._getTransformedByDeletion(t,s);if(this.containsPosition(e)&&!n&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const n=this.start._getTransformedByMove(t,e,s),i=this.end._getTransformedByMove(t,e,s);return[new ha(n,i)]}let o;const a=this.getDifference(i);let h=null;const l=this.getIntersection(i);if(1==a.length?h=new ha(a[0].start._getTransformedByDeletion(t,s),a[0].end._getTransformedByDeletion(t,s)):2==a.length&&(h=new ha(this.start,this.end._getTransformedByDeletion(t,s))),o=h?h._getTransformedByInsertion(r,s,null!==l||n):[],l){const t=new ha(l.start._getCombined(i.start,r),l.end._getCombined(i.start,r));2==o.length?o.splice(1,0,t):o.push(t)}return o}_getTransformedByDeletion(t,e){let s=this.start._getTransformedByDeletion(t,e),n=this.end._getTransformedByDeletion(t,e);return null==s&&null==n?null:(null==s&&(s=t),null==n&&(n=t),new ha(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return new this(sa._createAt(t,0),sa._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(sa._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new Dr("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const s=t.indexOf(e),n=new this(e.start,e.end);for(let e=s-1;e>=0&&t[e].end.isEqual(n.start);e--)n.start=sa._createAt(t[e].start);for(let e=s+1;e<t.length&&t[e].start.isEqual(n.end);e++)n.end=sa._createAt(t[e].end);return n}static fromJSON(t,e){return new this(sa.fromJSON(t.start,e),sa.fromJSON(t.end,e))}}ha.prototype.is=function(t){return"range"===t||"model:range"===t};class la extends Xo{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=_o(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=go(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=_o(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}la.prototype.is=function(t){return"node"===t||"model:node"===t};class ca extends(Gr(Xo)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new ha(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new ha(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new ha(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]);else if(e instanceof ca)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof ha)this._setRanges([e],!!n&&!!n.backward);else if(e instanceof sa)this._setRanges([new ha(e)]);else if(e instanceof la){const t=!!n&&!!n.backward;let i;if("in"==s)i=ha._createIn(e);else if("on"==s)i=ha._createOn(e);else{if(void 0===s)throw new Dr("model-selection-setto-required-second-parameter",[this,e]);i=new ha(sa._createAt(e,s))}this._setRanges([i],t)}else{if(!po(e))throw new Dr("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,n&&!!n.backward)}}_setRanges(t,e=!1){const s=Array.from(t),n=s.some(e=>{if(!(e instanceof ha))throw new Dr("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(s.length!==this._ranges.length||n)&&(this._replaceAllRanges(s),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new Dr("model-selection-setfocus-no-ranges",[this,t]);const s=sa._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.length&&this._popRange(),"before"==s.compareWith(n)?(this._pushRange(new ha(s,n)),this._lastRangeBackward=!0):(this._pushRange(new ha(n,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const s=ua(e.start,t);pa(s,e)&&(yield s);const n=e.getWalker();for(const s of n){const i=s.item;"elementEnd"==s.type&&fa(i,t,e)?yield i:"elementStart"==s.type&&i.is("model:element")&&i.root.document.model.schema.isBlock(i)&&n.jumpTo(sa._createAt(i,"end"))}const i=ua(e.end,t);ma(i,e)&&(yield i)}}containsEntireContent(t=this.anchor.root){const e=sa._createAt(t,0),s=sa._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())},e=Object.fromEntries(this.getAttributes());return Object.keys(e).length&&(t.attributes=e),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new ha(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new Dr("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function da(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function fa(t,e,s){return da(t,e)&&ga(t,s)}function ua(t,e){const s=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const r=n.find(t=>!i&&(i=s.isLimit(t),!i&&da(t,e)));return n.forEach(t=>e.add(t)),r}function ga(t,e){const s=function(t){const e=t.root.document.model.schema;let s=t.parent;for(;s;){if(e.isBlock(s))return s;s=s.parent}}(t);return!s||!e.containsRange(ha._createOn(s),!0)}function pa(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(sa._createAt(t,t.maxOffset))&&ga(t,e))}function ma(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(sa._createAt(t,0))&&ga(t,e))}ca.prototype.is=function(t){return"selection"===t||"model:selection"===t};class ba extends(Gr(ha)){constructor(t,e){super(t,e),_a.call(this)}detach(){this.stopListening()}toRange(){return new ha(this.start,this.end)}static fromRange(t){return new ba(t.start,t.end)}}function _a(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&ya.call(this,s)},{priority:"low"})}function ya(t){const e=this.getTransformedByOperation(t),s=ha._createFromRanges(e),n=!s.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let r=null;if(n){"$graveyard"==s.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=s.start,this.end=s.end,this.fire("change:range",e,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}ba.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class wa extends la{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new wa(this.data,this.getAttributes())}static fromJSON(t){return new wa(t.data,t.attributes)}}wa.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const va="selection:";(class extends(Gr(Xo)){_selection;constructor(t){super(),this._selection=new Pa(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return va+t}static _isStoreAttributeKey(t){return t.startsWith(va)}}).prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class Pa extends ca{markers=new bo({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&"marker"!=s.type&&"rename"!=s.type&&"noop"!=s.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,s,n)=>{this._updateMarker(e,n)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const s=t.document.differ;for(const n of s.getChanges()){if("insert"!=n.type)continue;const s=n.position.parent;n.length===s.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(s.getAttributeKeys()).filter(t=>t.startsWith(va));for(const n of e)t.removeAttribute(n,s)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=Jr();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new Dr("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(t=>t.toJSON())),t}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new Dr("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=ba.fromRange(t);return e.on("change:range",(t,s,n)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=n.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const n=e.getRange();for(const s of this.getRanges())n.containsRange(s,!s.isCollapsed)&&t.push(e)}const s=Array.from(this.markers);for(const s of t)this.markers.has(s)||(this.markers.add(s),e=!0);for(const s of Array.from(this.markers))t.includes(s)||(this.markers.remove(s),e=!0);e&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,e){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let n=!1;const i=Array.from(this.markers),r=this.markers.has(t);if(e){let s=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){s=!0;break}s&&!r?(this.markers.add(t),n=!0):!s&&r&&(this.markers.remove(t),n=!0)}else r&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=_o(this._getSurroundingAttributes()),s=_o(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const n=[];for(const[t,e]of this.getAttributes())s.has(t)&&s.get(t)===e||n.push(t);for(const[t]of s)this.hasAttribute(t)||n.push(t);n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1})}_setAttribute(t,e,s=!0){const n=s?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,n),!0))}_removeAttribute(t,e=!0){const s=e?"normal":"low";return!("low"==s&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,s),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[e,s]of this.getAttributes())t.get(e)!==s&&this._removeAttribute(e,!1);for(const[s,n]of t)this._setAttribute(s,n,!1)&&e.add(s);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(va)){const s=e.substr(10);yield[s,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let s=null;if(this.isCollapsed){const n=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=xa(n,e)),s||(s=xa(i,e)),!this.isGravityOverridden&&!s){let t=n;for(;t&&!s;)t=t.previousSibling,s=xa(t,e)}if(!s){let t=i;for(;t&&!s;)t=t.nextSibling,s=xa(t,e)}s||(s=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const n of t){if(n.item.is("element")&&e.isObject(n.item)){s=xa(n.item,e);break}if("text"==n.type){s=n.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function xa(t,e){if(!t)return null;if(t instanceof Zo||t instanceof wa)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const s=[];for(const[n,i]of t.getAttributes())e.checkAttribute("$text",n)&&!1!==e.getAttributeProperties(n).copyFromObject&&s.push([n,i]);return s}class Sa{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new Dr("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new Dr("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const s=[];for(const t of e){if(!(t instanceof la))throw new Dr("model-nodelist-insertnodes-not-node",this);s.push(t)}let n=this.indexToOffset(t);yo(this._nodes,s,t),yo(this._offsetToNode,function(t){const e=[];let s=0;for(const n of t)for(let t=0;t<n.offsetSize;t++)e[s++]=n;return e}(s),n);for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=n,n+=this._nodes[e].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let s=this.indexToOffset(t);const n=this._nodes.splice(t,e),i=n[n.length-1],r=i.startOffset+i.offsetSize-s;this._offsetToNode.splice(s,r);for(const t of n)t._index=null,t._startOffset=null;for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=s,s+=this._nodes[e].offsetSize;return n}_removeNodesArray(t){if(0==t.length)return;for(const e of t)e._index=null,e._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t]._index=t,this._nodes[t]._startOffset=e,e+=this._nodes[t].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}class Aa extends la{name;_children=new Sa;constructor(t,e,s){super(e),this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}findAncestor(t,e={}){let s=e.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?function(t){const e=[];for(const s of t)e.push(s._clone(!0));return e}(this._children):void 0;return new Aa(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){if("string"==typeof t)return[new wa(t)];po(t)||(t=[t]);const e=[];for(const s of t)"string"==typeof s?e.push(new wa(s)):s instanceof Zo?e.push(new wa(s.data,s.getAttributes())):e.push(s);return e}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const s of t.children)s.name?e.push(Aa.fromJSON(s)):e.push(wa.fromJSON(s))}return new Aa(t.name,t.attributes,e)}}Aa.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;class Oa{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function ka(t,e){const s=Na(e),n=s.reduce((t,e)=>t+e.offsetSize,0),i=t.parent;Ma(t);const r=t.index;return i._insertChild(r,s),Ea(i,r+s.length),Ea(i,r),new ha(t,t.getShiftedBy(n))}function Ra(t,e){if(!t.isFlat)throw new Dr("operation-utils-move-range-not-flat",this);const s=function(t){if(!t.isFlat)throw new Dr("operation-utils-remove-range-not-flat",this);const e=t.start.parent;Ma(t.start),Ma(t.end);const s=e._removeChildren(t.start.index,t.end.index-t.start.index);return Ea(e,t.start.index),s}(t);return ka(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),s)}function Na(t){const e=[];!function t(s){if("string"==typeof s)e.push(new wa(s));else if(s instanceof Zo)e.push(new wa(s.data,s.getAttributes()));else if(s instanceof la)e.push(s);else if(po(s))for(const e of s)t(e)}(t);for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];s instanceof wa&&n instanceof wa&&Ta(s,n)&&(e.splice(t-1,2,new wa(n.data+s.data,n.getAttributes())),t--)}return e}function Ea(t,e){const s=t.getChild(e-1),n=t.getChild(e);if(s&&n&&s.is("$text")&&n.is("$text")&&Ta(s,n)){const i=new wa(s.data+n.data,s.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function Ma(t){const e=t.textNode,s=t.parent;if(e){const n=t.offset-e.startOffset,i=e.index;s._removeChildren(i,1);const r=new wa(e.data.substr(0,n),e.getAttributes()),o=new wa(e.data.substr(n),e.getAttributes());s._insertChild(i,[r,o])}}function Ta(t,e){const s=t.getAttributes(),n=e.getAttributes();for(const t of s){if(t[1]!==e.getAttribute(t[0]))return!1;n.next()}return n.next().done}class Ba extends Oa{sourcePosition;howMany;targetPosition;constructor(t,e,s,n){super(n),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[ha._createFromPositionAndShift(this.sourcePosition,this.howMany),ha._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Ba(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Ba(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,s=this.sourcePosition.offset,n=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new Dr("move-operation-nodes-do-not-exist",this);if(t===e&&s<n&&n<s+this.howMany)throw new Dr("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==go(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=s&&this.targetPosition.path[t]<s+this.howMany)throw new Dr("move-operation-node-into-itself",this)}}_execute(){Ra(ha._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const s=sa.fromJSON(t.sourcePosition,e),n=sa.fromJSON(t.targetPosition,e);return new this(s,t.howMany,n,t.baseVersion)}}class Ca extends Oa{position;nodes;shouldReceiveAttributes;constructor(t,e,s){super(s),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new Sa(Na(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new Sa([...this.nodes].map(t=>t._clone(!0))),e=new Ca(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new sa(t,[0]);return new Ba(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new Dr("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new Sa([...t].map(t=>t._clone(!0))),ka(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const s=[];for(const e of t.nodes)e.name?s.push(Aa.fromJSON(e)):s.push(wa.fromJSON(e));const n=new Ca(sa.fromJSON(t.position,e),s,t.baseVersion);return n.shouldReceiveAttributes=t.shouldReceiveAttributes,n}}class Ia extends Oa{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=s,this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new sa(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ha(this.splitPosition,t)}get affectedSelectable(){const t=[ha._createFromPositionAndShift(this.splitPosition,0),ha._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(ha._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new Ia(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new sa(t,[0]);return new Fa(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new Dr("split-operation-position-invalid",this);if(!t.parent)throw new Dr("split-operation-split-in-root",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new Dr("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new Dr("split-operation-graveyard-position-invalid",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)Ra(ha._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();ka(this.insertionPosition,e)}Ra(new ha(sa._createAt(t,this.splitPosition.offset),sa._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new sa(t.root,e,"toPrevious")}static fromJSON(t,e){const s=sa.fromJSON(t.splitPosition,e),n=sa.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?sa.fromJSON(t.graveyardPosition,e):null;return new this(s,t.howMany,n,i,t.baseVersion)}}class Fa extends Oa{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new sa(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new ha(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[ha._createOn(t),ha._createFromPositionAndShift(this.targetPosition,0),ha._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Fa(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),s=new sa(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new Ia(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new Dr("merge-operation-source-position-invalid",this);if(!e.parent)throw new Dr("merge-operation-target-position-invalid",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new Dr("merge-operation-how-many-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent;Ra(ha._createIn(t),this.targetPosition),Ra(ha._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const s=sa.fromJSON(t.sourcePosition,e),n=sa.fromJSON(t.targetPosition,e),i=sa.fromJSON(t.graveyardPosition,e);return new this(s,t.howMany,n,i,t.baseVersion)}}class Ja extends Oa{name;oldRange;newRange;affectsData;_markers;constructor(t,e,s,n,i,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=s?s.clone():null,this.affectsData=i,this._markers=n}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new Ja(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new Ja(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new Ja(t.name,t.oldRange?ha.fromJSON(t.oldRange,e):null,t.newRange?ha.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class Va extends Oa{range;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new Va(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Va(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new Dr("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Ns(t.getAttribute(this.key),this.oldValue))throw new Dr("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new Dr("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Ns(this.oldValue,this.newValue)||function(t,e,s){Ma(t.start),Ma(t.end);for(const n of t.getItems({shallow:!0})){const t=n.is("$textProxy")?n.textNode:n;null!==s?t._setAttribute(e,s):t._removeAttribute(e),Ea(t.parent,t.index)}Ea(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new Va(ha.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class qa extends Oa{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new qa(this.baseVersion)}getReversed(){return new qa(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class Da extends Oa{position;oldName;newName;constructor(t,e,s,n){super(n),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new Da(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new Da(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof Aa))throw new Dr("rename-operation-wrong-position",this);if(""!==this.oldName&&t.name!==this.oldName)throw new Dr("rename-operation-wrong-name",this);this.oldName=t.name}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new Da(sa.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class ja extends Oa{root;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.root=t,this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new ja(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ja(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new Dr("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new Dr("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new Dr("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new Dr("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new ja(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class La extends Oa{rootName;elementName;isAdd;_document;constructor(t,e,s,n,i){super(i),this.rootName=t,this.elementName=e,this.isAdd=s,this._document=n,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new La(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new La(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new La(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const $a={};$a[Va.className]=Va,$a[Ca.className]=Ca,$a[Ja.className]=Ja,$a[Ba.className]=Ba,$a[qa.className]=qa,$a[Oa.className]=Oa,$a[Da.className]=Da,$a[ja.className]=ja,$a[La.className]=La,$a[Ia.className]=Ia,$a[Fa.className]=Fa;const za=new Map;function Wa(t,e,s){let n=za.get(t);n||(n=new Map,za.set(t,n)),n.set(e,s)}function Ua(t,e,s){const n=t.nodes.getNode(0).getAttribute(e);if(n==s)return null;const i=new ha(t.position,t.position.getShiftedBy(t.howMany));return new Va(i,e,n,s,0)}function Ga(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function Ka(t,e){const s=[];for(let n=0;n<t.length;n++){const i=t[n],r=new Ba(i.start,i.end.offset-i.start.offset,e,0);s.push(r);for(let e=n+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return s}Wa(Va,Va,(t,e,s)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const n=t.range.getDifference(e.range).map(e=>new Va(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&s.aIsStrong&&n.push(new Va(i,e.key,e.newValue,t.newValue,0)),0==n.length?[new qa(0)]:n}return[t]}),Wa(Va,Ca,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const s=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new Va(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const n=Ua(e,t.key,t.oldValue);n&&s.unshift(n)}return s}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),Wa(Va,Fa,(t,e)=>{const s=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&s.push(ha._createFromPositionAndShift(e.graveyardPosition,1));const n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||s.push(n),s.map(e=>new Va(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Wa(Va,Ba,(t,e)=>{const s=function(t,e){const s=ha._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,i=[];s.containsRange(t,!0)?n=t:t.start.hasSameParentAs(s.start)?(i=t.getDifference(s),n=t.getIntersection(s)):i=[t];const r=[];for(let t of i){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const s=e.getMovedRangeStart(),n=t.start.hasSameParentAs(s),i=t._getTransformedByInsertion(s,e.howMany,n);r.push(...i)}return n&&r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}(t.range,e);return s.map(e=>new Va(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Wa(Va,Ia,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const s=t.clone();return s.range=new ha(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,s]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),Wa(Ca,Va,(t,e)=>{const s=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const n=Ua(t,e.key,e.newValue);n&&s.push(n)}return s}),Wa(Ca,Ca,(t,e,s)=>(t.position.isEqual(e.position)&&s.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),Wa(Ca,Ba,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Wa(Ca,Ia,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),Wa(Ca,Fa,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),Wa(Ja,Ca,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),Wa(Ja,Ja,(t,e,s)=>{if(t.name==e.name){if(!s.aIsStrong)return[new qa(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),Wa(Ja,Fa,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),Wa(Ja,Ba,(t,e)=>{const s=[t];if(t.oldRange&&(t.oldRange=ha._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const n=t.newRange._getTransformedByMoveOperation(e);t.newRange=n[0];for(let e=1;e<n.length;e++){const i=t.clone();i.oldRange=null,i.newRange=n[e],i.baseVersion=-1,s.push(i)}}return s}),Wa(Ja,Ia,(t,e,s)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(s.abRelation){const n=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?s.abRelation.wasStartBeforeMergedElement?t.newRange.start=sa._createAt(e.insertionPosition):s.abRelation.wasInLeftElement?t.newRange.start=sa._createAt(t.newRange.start):t.newRange.start=sa._createAt(e.moveTargetPosition):t.newRange.start=n.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&s.abRelation.wasEndBeforeMergedElement?t.newRange.end=sa._createAt(e.insertionPosition):s.abRelation.wasInRightElement?t.newRange.end=sa._createAt(e.moveTargetPosition):t.newRange.end=sa._createAt(t.newRange.end):t.newRange.end=n.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),Wa(Fa,Ca,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),Wa(Fa,Fa,(t,e,s)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(s.bWasUndone){const s=e.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new sa(e.graveyardPosition.root,s),t.howMany=0,[t]}return[new qa(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!s.bWasUndone&&"splitAtSource"!=s.abRelation){const n="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=e.targetPosition._getTransformedByMergeOperation(e),n=t.targetPosition._getTransformedByMergeOperation(e);return[new Ba(s,t.howMany,n,0)]}return[new qa(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&s.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Wa(Fa,Ba,(t,e,s)=>{const n=ha._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!s.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new qa(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==s.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==s.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),Wa(Fa,Ia,(t,e,s)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition)||"mergeTargetNotMoved"==s.abRelation))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==s.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==s.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),Wa(Ba,Ca,(t,e)=>{const s=ha._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),Wa(Ba,Ba,(t,e,s)=>{const n=ha._createFromPositionAndShift(t.sourcePosition,t.howMany),i=ha._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,o=s.aIsStrong,a=!s.aIsStrong;if("insertBefore"==s.abRelation||"insertAfter"==s.baRelation?a=!0:"insertAfter"!=s.abRelation&&"insertBefore"!=s.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ga(t,e)&&Ga(e,t))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ka([n],r);if(i.containsPosition(t.targetPosition)&&i.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Ka([n],r);const h=go(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==h||"extension"==h)return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Ka([n],r);"remove"!=t.type||"remove"==e.type||s.aWasUndone||s.forceWeakRemove?"remove"==t.type||"remove"!=e.type||s.bWasUndone||s.forceWeakRemove||(o=!1):o=!0;const l=[],c=n.getDifference(i);for(const t of c){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const s="same"==go(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,s);l.push(...n)}const d=n.getIntersection(i);return null!==d&&o&&(d.start=d.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.end=d.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(d):1==l.length?i.start.isBefore(n.start)||i.start.isEqual(n.start)?l.unshift(d):l.push(d):l.splice(1,0,d)),0===l.length?[new qa(t.baseVersion)]:Ka(l,r)}),Wa(Ba,Ia,(t,e,s)=>{let n=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=s.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==s.abRelation)return t.howMany++,t.targetPosition=n,[t];const i=ha._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=s.abRelation||t.howMany++,t.targetPosition=n,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new ha(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),Ka([new ha(i.start,e.splitPosition),t],n)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==s.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==s.abRelation&&(n=t.targetPosition);const r=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const n=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&n&&!s.aWasUndone&&r.push(ha._createFromPositionAndShift(e.insertionPosition,1))}return Ka(r,n)}),Wa(Ba,Fa,(t,e,s)=>{const n=ha._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||s.forceWeakRemove){if(1==t.howMany)return s.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new qa(0)]}else if(!s.aWasUndone){const s=[];let n=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(s.push(new Ba(t.sourcePosition,t.howMany-1,r,0)),n=n._getTransformedByMove(t.sourcePosition,r,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,r),a=new Ba(n,1,o,0),h=a.getMovedRangeStart().path.slice();h.push(0);const l=new sa(a.targetPosition.root,h);i=i._getTransformedByMove(n,o,1);const c=new Ba(i,e.howMany,l,0);return s.push(a),s.push(c),s}const i=ha._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),Wa(Da,Ca,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),Wa(Da,Fa,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),Wa(Da,Ba,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Wa(Da,Da,(t,e,s)=>{if(t.position.isEqual(e.position)){if(!s.aIsStrong)return[new qa(0)];t.oldName=e.newName}return[t]}),Wa(Da,Ia,(t,e)=>{if("same"==go(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new Da(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),Wa(ja,ja,(t,e,s)=>{if(t.root===e.root&&t.key===e.key){if(!s.aIsStrong||t.newValue===e.newValue)return[new qa(0)];t.oldValue=e.newValue}return[t]}),Wa(La,La,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new qa(0)]:[t]),Wa(Ia,Ca,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),Wa(Ia,Fa,(t,e,s)=>{if(!t.graveyardPosition&&!s.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const s=e.graveyardPosition.path.slice();s.push(0);const n=new sa(e.graveyardPosition.root,s),i=Ia.getInsertionPosition(new sa(e.graveyardPosition.root,s)),r=new Ia(n,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Ia.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Ia.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Wa(Ia,Ba,(t,e,s)=>{const n=ha._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!s.bWasUndone&&i){const s=t.splitPosition._getTransformedByMoveOperation(e),n=t.graveyardPosition._getTransformedByMoveOperation(e),i=n.path.slice();i.push(0);const r=new sa(n.root,i);return[new Ba(s,t.howMany,r,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==s.baRelation||"splitBefore"==s.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Ia.getInsertionPosition(t.splitPosition),[t];if(i&&s.abRelation&&s.abRelation.howMany){const{howMany:e,offset:n}=s.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(n),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=s,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Ia.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=Ia.getInsertionPosition(t.splitPosition),[t]}),Wa(Ia,Ia,(t,e,s)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new qa(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new qa(0)];if("splitBefore"==s.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const n="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=[];return e.howMany&&s.push(new Ba(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&s.push(new Ba(t.splitPosition,t.howMany,t.moveTargetPosition,0)),s}return[new qa(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==s.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==s.baRelation){const s=e.insertionPosition.path.slice();s.push(0);const n=new sa(e.insertionPosition.root,s);return[t,new Ba(t.insertionPosition,1,n,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Ia.getInsertionPosition(t.splitPosition),[t]});function Ya(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Qa.call(this,s)},{priority:"low"})}function Qa(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}(class extends(Gr(sa)){constructor(t,e,s="toNone"){if(super(t,e,s),!this.root.is("rootElement"))throw new Dr("model-liveposition-root-not-rootelement",t);Ya.call(this)}detach(){this.stopListening()}toPosition(){return new sa(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}).prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};(class extends Aa{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,s="main"){super(e),this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;(class extends(Gr(Xo)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,s,n){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=s,this._affectsData=n}get managedUsingOperations(){if(!this._liveRange)throw new Dr("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new Dr("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new Dr("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new Dr("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new Dr("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}).prototype.is=function(t){return"marker"===t||"model:marker"===t};class Ha extends Xo{markers=new Map;_children=new Sa;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const s of t)s.name?e.push(Aa.fromJSON(s)):e.push(wa.fromJSON(s));return new Ha(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){return"string"==typeof t?[new wa(t)]:(po(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new wa(t):t instanceof Zo?new wa(t.data,t.getAttributes()):t))}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}let Xa;Ha.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t},new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]),Symbol("_treeDump"),Symbol("MainQueueId"),Symbol.iterator,s(57734),s(72227),s(84704),s(97261),s(74355),s(47534),s(77406),s(44409),s(38987),s(70264),s(78401),s(39108),s(53885),s(11109),s(19491),s(39427),s(14947),s(38701),s(48358),s(4341),s(4397),s(11e3),s(40839),s(16986),s(21897),s(63567),s(26588),s(11486),s(73498),s(7684),s(68522),s(49739),s(86830),s(60960),s(44060),s(45955),s(78606),s(13356),s(4903),s(44990),s(9984),s(38666),s(39441),s(32333),s(77139),s(59813),s(91087),s(43713),s(94679),s(15642),s(96365),s(11645),s(24950),s(86705),s(73380),s(39112),s(21871),s(49864),s(35448),s(14069),s(5718),s(91420),s(63290),s(67956),s(20461),s(8873),s(37265),s(30498),s(70194),s(29866),s(54944),s(97030),s(16887),s(83642),s(3761),s(92376),s(46855),s(97572),s(18547),s(26853),s(27718),s(98903),s(79096),s(13961),s(15226),s(41262),s(94481),s(89917),s(39852),s(61829),s(3713),s(18925),s(35884),s(74894),s(42552),s(63782),s(40549),s(61282),s(61998),s(42600),s(7142),s(76931),s(33896),s(38508),s(85996),s(67371),s(85470),s(37506),s(9760),s(93041),s(97187),s(24903),s(72169),s(54886),s(28008),s(13640),s(46126),s(48942),s(30270),s(89701),s(28201),s(47051),s(52207),s(95551),s(30064),s(63287),s(2738),s(89347),s(26391),s(42450),s(79505),s(16279),s(26997),s(63093),s(93085),s(71530),s(48337),s(69465),s(56547),s(43986),s(7618),s(967),s(77959),s(96720),s(68853),s(60495),s(64036),s(88668),s(35586),s(66933),s(64833),s(10751),s(20199),s(23146),s(29446),s(68291),s(5950),s(5914),s(87058),s(50424),s(70862),s(42536),s(99684),s(30500),s(16133),s(7704),s(57709),s(73497),s(60765),s(2064),s(73510),s(91835),s(24694),s(57393),s(41338),s(18091),s(313),s(15006),s(7287),s(33048),s(7357),s(79138),s(18249),s(61684),s(42996),s(89597),s(84979),s(4296),s(66074),s(20802),s(69416),s(983),s(49459),s(42800),s(43982),s(23295),s(69042),s(55488),s(17151),s(45063),s(21200),s(49063),s(8719),s(65251),s(65978),s(84868);try{Xa={window,document}}catch{Xa={window:{},document:{}}}class Za{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const th=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function eh(){const[t,e,s,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+th[255&t]+th[t>>8&255]+th[t>>16&255]+th[t>>24&255]+th[255&e]+th[e>>8&255]+th[e>>16&255]+th[e>>24&255]+th[255&s]+th[s>>8&255]+th[s>>16&255]+th[s>>24&255]+th[255&n]+th[n>>8&255]+th[n>>16&255]+th[n>>24&255]}const sh={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function nh(t,e){const s=sh.get(e.priority);let n=0,i=t.length;for(;n<i;){const e=n+i>>1;sh.get(t[e].priority)<s?i=e:n=e+1}t.splice(n,0,e)}class ih extends Error{context;data;constructor(t,e,s,n){super(function(t,e,s){const n=new WeakSet;return t+(e?` ${JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e})}`:"")+oh(t)+(s?`\nOriginal error: ${s.name}: ${s.message}`:"")}(t,s,n)),this.name="CKEditorError",this.context=e,this.data=s,n&&(this.stack=n.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new ih("unexpected-error",e,void 0,t)}}function rh(t,e){console.warn(...function(t,e){const s=oh(t);return e?[t,e,s]:[t,s]}(t,e))}function oh(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}if(new Date(2025,9,1),globalThis.CKEDITOR_VERSION)throw new ih("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION="47.0.0";const ah=Symbol("listeningTo"),hh=Symbol("emitterId"),lh=Symbol("delegations"),ch=dh(Object);function dh(t){return t?class extends t{on(t,e,s){this.listenTo(this,t,e,s)}once(t,e,s){let n=!1;this.listenTo(this,t,(t,...s)=>{n||(n=!0,t.off(),e.call(this,t,...s))},s)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,s,n={}){let i,r;this[ah]||(this[ah]={});const o=this[ah];fh(t)||function(t,e){t[hh]||(t[hh]=e||eh())}(t);const a=fh(t);(i=o[a])||(i=o[a]={emitter:t,callbacks:{}}),(r=i.callbacks[e])||(r=i.callbacks[e]=[]),r.push(s),function(t,e,s,n,i){e._addEventListener?e._addEventListener(s,n,i):t._addEventListener.call(e,s,n,i)}(this,t,e,s,n)}stopListening(t,e,s){const n=this[ah];let i=t&&fh(t);const r=n&&i?n[i]:void 0,o=r&&e?r.callbacks[e]:void 0;if(!(!n||t&&!r||e&&!o))if(s)bh(this,t,e,s),-1!==o.indexOf(s)&&(1===o.length?delete r.callbacks[e]:bh(this,t,e,s));else if(o){for(;s=o.pop();)bh(this,t,e,s);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete n[i]}else{for(i in n)this.stopListening(n[i].emitter);delete this[ah]}}fire(t,...e){try{const s=t instanceof Za?t:new Za(this,t),n=s.name;let i=function(t,e){if(!t._events)return null;let s=e;do{const e=t._events[s];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const n=s.lastIndexOf(":");s=n>-1?s.substring(0,n):""}while(s);return null}(this,n);if(s.path.push(this),i){i=i.slice();for(let t=0;t<i.length;t++){const r=i[t].callback;if(r.call(this,s,...e),s.off.called&&(delete s.off.called,this._removeEventListener(n,r)),s.stop.called)break}}const r=this[lh];if(r){const t=r.get(n),i=r.get("*");t&&mh(t,s,e),i&&mh(i,s,e)}return s.return}catch(t){ih.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,s)=>{this[lh]||(this[lh]=new Map),t.forEach(t=>{const n=this[lh].get(t);n?n.set(e,s):this[lh].set(t,new Map([[e,s]]))})}}}stopDelegating(t,e){if(this[lh])if(t)if(e){const s=this[lh].get(t);s&&s.delete(e)}else this[lh].delete(t);else this[lh].clear()}_addEventListener(t,e,s){!function(t,e){const s=uh(t);if(s[e])return;let n=e,i=null;const r=[];for(;""!==n&&!s[n];)s[n]=gh(),r.push(s[n]),i&&s[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(":"));if(""!==n){for(const t of r)t.callbacks=s[n].callbacks.slice();s[n].childEvents.push(i)}}(this,t);const n=ph(this,t),i={callback:e,priority:sh.get(s.priority)};for(const t of n)nh(t,i)}_removeEventListener(t,e){const s=ph(this,t);for(const t of s)for(let s=0;s<t.length;s++)t[s].callback==e&&(t.splice(s,1),s--)}}:ch}function fh(t){return t[hh]}function uh(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function gh(){return{callbacks:[],childEvents:[]}}function ph(t,e){const s=uh(t)[e];if(!s)return[];let n=[s.callbacks];for(let e=0;e<s.childEvents.length;e++){const i=ph(t,s.childEvents[e]);n=n.concat(i)}return n}function mh(t,e,s){for(let[n,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new Za(e.source,i);t.path=[...e.path],n.fire(t,...s)}}function bh(t,e,s,n){e._removeEventListener?e._removeEventListener(s,n):t._removeEventListener.call(e,s,n)}const _h=Symbol("observableProperties"),yh=Symbol("boundObservables"),wh=Symbol("boundProperties"),vh=Symbol("decoratedMethods"),Ph=Symbol("decoratedOriginal"),xh=Sh(dh());function Sh(t){return t?class extends t{set(t,e){if(U(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);Ah(this);const s=this[_h];if(t in this&&!s.has(t))throw new ih("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>s.get(t),set(e){const n=s.get(t);let i=this.fire(`set:${t}`,t,e,n);void 0===i&&(i=e),n===i&&s.has(t)||(s.set(t,i),this.fire(`change:${t}`,t,i,n))}}),this[t]=e}bind(...t){if(!t.length||!Rh(t))throw new ih("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new ih("observable-bind-duplicate-properties",this);Ah(this);const e=this[wh];t.forEach(t=>{if(e.has(t))throw new ih("observable-bind-rebind",this)});const s=new Map;return t.forEach(t=>{const n={property:t,to:[]};e.set(t,n),s.set(t,n)}),{to:Oh,toMany:kh,_observable:this,_bindProperties:t,_to:[],_bindings:s}}unbind(...t){if(!this[_h])return;const e=this[wh],s=this[yh];if(t.length){if(!Rh(t))throw new ih("observable-unbind-wrong-properties",this);t.forEach(t=>{const n=e.get(t);n&&(n.to.forEach(([t,e])=>{const i=s.get(t),r=i[e];r.delete(n),r.size||delete i[e],Object.keys(i).length||(s.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else s.forEach((t,e)=>{this.stopListening(e,"change")}),s.clear(),e.clear()}decorate(t){Ah(this);const e=this[t];if(!e)throw new ih("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,s)=>{t.return=e.apply(this,s)}),this[t]=function(...e){return this.fire(t,e)},this[t][Ph]=e,this[vh]||(this[vh]=[]),this[vh].push(t)}stopListening(t,e,s){if(!t&&this[vh]){for(const t of this[vh])this[t]=this[t][Ph];delete this[vh]}super.stopListening(t,e,s)}[_h];[vh];[wh];[yh]}:xh}function Ah(t){t[_h]||(Object.defineProperty(t,_h,{value:new Map}),Object.defineProperty(t,yh,{value:new Map}),Object.defineProperty(t,wh,{value:new Map}))}function Oh(...t){const e=function(...t){if(!t.length)throw new ih("observable-bind-to-parse-error",null);const e={to:[]};let s;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)s.properties.push(t);else{if("object"!=typeof t)throw new ih("observable-bind-to-parse-error",null);s={observable:t,properties:[]},e.to.push(s)}}),e}(...t),s=Array.from(this._bindings.keys()),n=s.length;if(!e.callback&&e.to.length>1)throw new ih("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new ih("observable-bind-to-extra-callback",this);var i;e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==n)throw new ih("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(s[0]).callback=e.callback),i=this._observable,this._to.forEach(t=>{const e=i[yh];let s;e.get(t.observable)||i.listenTo(t.observable,"change",(n,r)=>{s=e.get(t.observable)[r],s&&s.forEach(t=>{Nh(i,t.property)})})}),function(t){let e;t._bindings.forEach((s,n)=>{t._to.forEach(i=>{e=i.properties[s.callback?0:t._bindProperties.indexOf(n)],s.to.push([i.observable,e]),function(t,e,s,n){const i=t[yh],r=i.get(s),o=r||{};o[n]||(o[n]=new Set),o[n].add(e),r||i.set(s,o)}(t._observable,s,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{Nh(this._observable,t)})}function kh(t,e,s){if(this._bindings.size>1)throw new ih("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const s=t.map(t=>[t,e]);return Array.prototype.concat.apply([],s)}(t,e),s)}function Rh(t){return t.every(t=>"string"==typeof t)}function Nh(t,e){const s=t[wh].get(e);let n;s.callback?n=s.callback.apply(t,s.to.map(t=>t[0][t[1]])):(n=s.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=n:t.set(e,n)}function Eh(t){let e=0;for(const s of t)e++;return e}function Mh(t,e){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++)if(t[n]!=e[n])return n;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function Th(t){return!(!t||!t[Symbol.iterator])}function Bh(t){return Array.isArray(t)?t:[t]}Xa.window.CKEDITOR_TRANSLATIONS||(Xa.window.CKEDITOR_TRANSLATIONS={});class Ch extends(dh()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const s=Th(t);if(s||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new ih("collection-add-item-invalid-index",this);let s=0;for(const n of t){const t=this._getItemIdBeforeAdding(n),i=e+s;this._items.splice(i,0,n),this._itemMap.set(t,n),this.fire("add",n,i),s++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new ih("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,s]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:s}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new ih("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,s=(s,n,i)=>{const r=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(n);if(r&&o)this._bindToExternalToInternalMap.set(n,o),this._bindToInternalToExternalMap.set(o,n);else{const s=t(n);if(!s)return void this._skippedIndexesFromExternal.push(i);let r=i;for(const t of this._skippedIndexesFromExternal)i>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(n,s),this._bindToInternalToExternalMap.set(s,n),this.add(s,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)s(0,t,e.getIndex(t));this.listenTo(e,"add",s),this.listenTo(e,"remove",(t,e,s)=>{const n=this._bindToExternalToInternalMap.get(e);n&&this.remove(n),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(s<e&&t.push(e-1),s>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let s;if(e in t){if(s=t[e],"string"!=typeof s)throw new ih("collection-add-invalid-id",this);if(this.get(s))throw new ih("collection-add-item-already-exists",this)}else t[e]=s=eh();return s}_remove(t){let e,s,n,i=!1;const r=this._idProperty;if("string"==typeof t?(s=t,n=this._itemMap.get(s),i=!n,n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,n=this._items[e],i=!n,n&&(s=n[r])):(n=t,s=n[r],e=this._items.indexOf(n),i=-1==e||!this._itemMap.get(s)),i)throw new ih("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(s);const o=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(o),this.fire("remove",n,e),[n,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Ih(t){return Th(t)?new Map(t):function(t){const e=new Map;for(const s in t)e.set(s,t[s]);return e}(t)}function Fh(t,e,s){const n=t.length,i=e.length;for(let e=n-1;e>=s;e--)t[e+i]=t[e];for(let n=0;n<i;n++)t[s+n]=e[n]}Symbol.iterator,Symbol.iterator;new WeakMap;class Jh{is(){throw new Error("is() method is abstract")}}class Vh extends(dh(Jh)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new ih("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=Mh(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s),this.parent&&this.parent._fireChange(t,e,s)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}Vh.prototype.is=function(t){return"node"===t||"view:node"===t};class qh extends Vh{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof qh&&(this===t||this.data===t.data)}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new qh(this.document,this.data)}}qh.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class Dh extends Jh{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.data.length)throw new ih("view-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.data.length)throw new ih("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let s=t.includeSelf?this.textNode:this.parent;for(;null!==s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}}function jh(t,e,s){if("string"!=typeof e)for(const n of e)Array.isArray(n)?t.push(n):t.push(s?[s,n]:[n]);else t.push(s?[s,e]:[e])}Dh.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class Lh{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const s=this._isElementMatching(e,t);if(s)return{element:e,pattern:t,match:s}}return null}matchAll(...t){const e=[];for(const s of t)for(const t of this._patterns){const n=this._isElementMatching(s,t);n&&e.push({element:s,pattern:t,match:n})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const s=e(t);return s&&"object"==typeof s?function(t){const e=[];return"attributes"in t&&t.attributes&&jh(e,t.attributes),"classes"in t&&t.classes&&jh(e,t.classes,"class"),"styles"in t&&t.styles&&jh(e,t.styles,"style"),{name:t.name||!1,attributes:e}}(s):s}const s={};if(e.name&&(s.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!s.name))return null;const n=[];return e.attributes&&!function(t,e,s){let n;return"object"!=typeof t||t instanceof RegExp||Array.isArray(t)?n=["class","style"]:(void 0!==t.style&&rh("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&rh("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(zh(t),s,n)}(e.attributes,t,n)||e.classes&&!function(t,e,s){return e._collectAttributesMatch(zh(t,"class"),s)}(e.classes,t,n)||e.styles&&!function(t,e,s){return e._collectAttributesMatch(zh(t,"style"),s)}(e.styles,t,n)?null:(n.length&&(s.attributes=n),s)}}function $h(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function zh(t,e){if(Array.isArray(t))return t.map(t=>"object"!=typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||rh("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!=typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const s=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.push(e?[e,n,t[n]]:[n,t[n]]);return s}class Wh{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=function(t){let e=null,s=0,n=0,i=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(null===e)switch(a){case":":i||(i=t.substr(s,o-s),n=o+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(n,o-n);i&&r.set(i.trim(),e.trim()),i=null,s=o+1;break}}else a===e&&(e=null)}return r}(t);for(const[t,s]of e)this._styleProcessor.toNormalizedForm(t,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,U(t))for(const[e,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const s of Bh(t)){const t=Uh(s),n=ae(this._styles,t);if(n)Gh(e,t,n);else{const t=this.getAsString(s);void 0!==t&&this._styleProcessor.toNormalizedForm(s,t,e)}}Object.keys(e).length&&(Kh(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!U(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const s of e)t.push(...this._styleProcessor.getReducedForm(s,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const s=[];for(const n of this.getStyleNames(!0))if($h(t,n)){if(!0===e){s.push(n);continue}$h(e,this.getAsString(n))&&s.push(n)}return s.length?s:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s)}else for(const t of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s);e.push(t)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}function Uh(t){return t.replace("-",".")}function Gh(t,e,s){let n=s;U(s)&&(n=Ut({},ae(t,e),s)),pe(t,e,n)}function Kh(t,e){for(const s of Object.keys(e))null===t[s]||Array.isArray(t[s])||"object"!=typeof t[s]||"object"!=typeof e[s]?delete t[s]:(Kh(t[s],e[s]),Object.keys(t[s]).length||delete t[s])}class Yh{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Bh(t))e&&this._set.add(e)}remove(t){for(const e of Bh(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const s of t.split(/\s+/)){if(!this._set.has(s))return;e.push(s)}return e}for(const s of this._set.keys())s.match(t)&&e.push(s);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class Qh extends Vh{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,s,n){super(t),this.name=e,this._attrs=this._parseAttributes(s),this._children=[],n&&this._insertChild(0,n)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(Xh(this.name,t)||Hh(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof Qh))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,s]of this._attrs){const n=t._attrs.get(e);if(void 0===n)return!1;if("string"==typeof s||"string"==typeof n){if(n!==s)return!1}else if(!s.isSimilar(n))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new Lh(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(e.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==s?"":` ${s}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=[];if(t)for(const s of this.getChildren())e.push(s._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,e);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){if("string"==typeof e)return[new qh(t,e)];Th(e)||(e=[e]);const s=[];for(const n of e)"string"==typeof n?s.push(new qh(t,n)):n instanceof Dh?s.push(new qh(t,n.data)):s.push(n);return s}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,s=!0){if(this._fireChange("attributes",this),Xh(this.name,t)||Hh(this.name,t)){let n=this._attrs.get(t);n||(n=Xh(this.name,t)?new Wh(this.document.stylesProcessor):new Yh,this._attrs.set(t,n)),s?n.setTo(String(e)):Xh(this.name,t)?Array.isArray(e)?n.set(e[0],e[1]):n.set(e):n.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(Xh(this.name,t)||Hh(this.name,t))){const s=this._attrs.get(t);return!!s&&(Hh(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),s.remove(e),!!s.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,s){for(const[n,i,r]of t){let t=!1,o=!1;for(const[a,h]of this._attrs)if(!(s&&s.includes(a)||!$h(n,a)))if(t=!0,"string"==typeof h){if($h(i,h))e.push([a]),o=!0;else if(!(n instanceof RegExp))return!1}else{const t=h._getTokensMatch(i,r||!0);if(t){o=!0;for(const s of t)e.push([a,s])}else if(!(n instanceof RegExp))return!1}if(!t||!o)return!1}return!0}_getConsumables(t,e){const s=[];if(t){const n=this._attrs.get(t);if(void 0!==n)if("string"==typeof n)s.push([t]);else for(const i of n._getConsumables(e))s.push([t,i])}else for(const[t,e]of this._attrs)if("string"==typeof e)s.push([t]);else for(const n of e._getConsumables())s.push([t,n]);return{name:!t,attributes:s}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._canMergeFrom(s))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof s?this._setAttribute(e,s):t._mergeFrom(s)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._isMatching(s))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof s?this._attrs.delete(e):(t.remove(s.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=Ih(t);for(const[t,s]of e)if(null===s)e.delete(t);else if(Xh(this.name,t)){const n=s instanceof Wh?s._clone():new Wh(this.document.stylesProcessor).setTo(String(s));e.set(t,n)}else if(Hh(this.name,t)){const n=s instanceof Yh?s._clone():(new Yh).setTo(String(s));e.set(t,n)}else"string"!=typeof s&&e.set(t,String(s));return e}}function Hh(t,e){return"class"==e||"a"==t&&"rel"==e}function Xh(t,e){return"style"==e}Qh.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Zh extends Qh{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=tl}toJSON(){const t=super.toJSON();return t.type="ContainerElement",t}}function tl(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}Zh.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class el extends(Sh(Zh)){constructor(t,e,s,n){super(t,e,s,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const t=super.toJSON();return t.type="EditableElement",t.isReadOnly=this.isReadOnly,t.isFocused=this.isFocused,t}}el.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const sl=Symbol("rootName");(class extends el{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(sl)}set rootName(t){this._setCustomProperty(sl,t)}toJSON(){return this.rootName}set _name(t){this.name=t}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class nl{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new ih("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new ih("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=il._createAt(t.startPosition):this._position=il._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s;do{s=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=s)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&t.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let n;if(s&&s.is("view:$text")){if(t.isAtEnd)return this._position=il._createAfter(s),this._next();n=s.data[t.offset]}else n=s.getChild(t.offset);if("string"==typeof n){let n;n=this.singleCharacters?1:(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-t.offset;const i=new Dh(s,t.offset,n);return t.offset+=n,this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new il(n,0);return this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new il(n,0),this._position=t,this._next();let s,i=n.data.length;return n==this._boundaryEndParent?(i=this.boundaries.end.offset,s=new Dh(n,0,i),t=il._createAfter(s)):(s=new Dh(n,0,n.data.length),t.offset++),this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=il._createAfter(s),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,t)}_previous(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&0===t.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let n;if(s.is("view:$text")){if(t.isAtStart)return this._position=il._createBefore(s),this._previous();n=s.data[t.offset-1]}else n=s.getChild(t.offset-1);if("string"==typeof n){let n;if(this.singleCharacters)n=1;else{const e=s===this._boundaryStartParent?this.boundaries.start.offset:0;n=t.offset-e}t.offset-=n;const i=new Dh(s,t.offset,n);return this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new il(n,n.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new il(n,n.data.length),this._position=t,this._previous();let s,i=n.data.length;if(n==this._boundaryStartParent){const e=this.boundaries.start.offset;s=new Dh(n,e,n.data.length-e),i=s.data.length,t=il._createBefore(s)}else s=new Dh(n,0,n.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=il._createBefore(s),this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}_formatReturnValue(t,e,s,n,i){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?s=il._createAfter(e.textNode):(n=il._createAfter(e.textNode),this._position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?s=il._createBefore(e.textNode):(n=il._createBefore(e.textNode),this._position=n))),{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}}class il extends Jh{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof el);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=il._createAt(this),s=e.offset+t;return e.offset=s<0?0:s,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new nl(e);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),s.push(t.offset);const n=Mh(e,s);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<s[n]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new nl(t)}clone(){return new il(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,e){if(t instanceof il)return new this(t.parent,t.offset);{const s=t;if("end"==e)e=s.is("$text")?s.data.length:s.childCount;else{if("before"==e)return this._createBefore(s);if("after"==e)return this._createAfter(s);if(0!==e&&!e)throw new ih("view-createpositionat-offset-required",s)}return new il(s,e)}}static _createAfter(t){if(t.is("$textProxy"))return new il(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new ih("view-position-after-root",t,{root:t});return new il(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new il(t.textNode,t.offsetInText);if(!t.parent)throw new ih("view-position-before-root",t,{root:t});return new il(t.parent,t.index)}}il.prototype.is=function(t){return"position"===t||"view:position"===t};class rl extends Jh{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new nl({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(ol,{direction:"backward"}),e=this.end.getLastMatchingPosition(ol);return t.parent.is("$text")&&t.isAtStart&&(t=il._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=il._createAfter(e.parent)),new rl(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(ol);if(t.isAfter(this.end)||t.isEqual(this.end))return new rl(t,t);let e=this.end.getLastMatchingPosition(ol,{direction:"backward"});const s=t.nodeAfter,n=e.nodeBefore;return s&&s.is("$text")&&(t=new il(s,0)),n&&n.is("$text")&&(e=new il(n,n.data.length)),new rl(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new rl(this.start,t.start)),this.containsPosition(t.end)&&e.push(new rl(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new rl(e,s)}return null}getWalker(t={}){return t.boundaries=this,new nl(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new rl(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new nl(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new nl(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,e,s,n){return new this(new il(t,e),new il(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(il._createBefore(t),e)}}function ol(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}rl.prototype.is=function(t){return"range"===t||"view:range"===t};class al extends(dh(Jh)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=Eh(this.getRanges());if(e!=Eh(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let s=!1;for(let n of t.getRanges())if(n=n.getTrimmed(),e.start.isEqual(n.start)&&e.end.isEqual(n.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]),this._setFakeOptions(n);else if(e instanceof al||e instanceof hl)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof rl)this._setRanges([e],n&&n.backward),this._setFakeOptions(n);else if(e instanceof il)this._setRanges([new rl(e)]),this._setFakeOptions(n);else if(e instanceof Vh){const t=!!n&&!!n.backward;let i;if(void 0===s)throw new ih("view-selection-setto-required-second-parameter",this);i="in"==s?rl._createIn(e):"on"==s?rl._createOn(e):new rl(il._createAt(e,s)),this._setRanges([i],t),this._setFakeOptions(n)}else{if(!Th(e))throw new ih("view-selection-setto-not-selectable",this);this._setRanges(e,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new ih("view-selection-setfocus-no-ranges",this);const s=il._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.pop(),"before"==s.compareWith(n)?this._addRange(new rl(s,n),!0):this._addRange(new rl(n,s)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof rl))throw new ih("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new ih("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new rl(t.start,t.end))}}al.prototype.is=function(t){return"selection"===t||"view:selection"===t};class hl extends(dh(Jh)){_selection;constructor(...t){super(),this._selection=new al,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}hl.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t},Symbol("bubblingEmitter"),Symbol("bubblingCallbacks"),Symbol("bubblingContexts");function ll(){if(cl(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(cl(t)>1)return null;t=t.parent}return!t||cl(t)>1?null:this.childCount}function cl(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}(class extends Qh{static DEFAULT_PRIORITY=10;_priority=10;_id=null;_clonesGroup=null;constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=ll}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new ih("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}).prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function dl(){return null}(class extends Qh{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=dl}toJSON(){const t=super.toJSON();return t.type="EmptyElement",t}_insertChild(t,e){if(e&&(e instanceof Vh||Array.from(e).length>0))throw new ih("view-emptyelement-cannot-add",[this,e]);return 0}}).prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function fl(){return null}(class extends Qh{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=fl}_insertChild(t,e){if(e&&(e instanceof Vh||Array.from(e).length>0))throw new ih("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}toJSON(){const t=super.toJSON();return t.type="UIElement",t}}).prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function ul(){return null}(class extends Qh{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=ul}toJSON(){const t=super.toJSON();return t.type="RawElement",t}_insertChild(t,e){if(e&&(e instanceof Vh||Array.from(e).length>0))throw new ih("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}).prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class gl extends(dh(Jh)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){return"string"==typeof e?[new qh(t,e)]:(Th(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new qh(t,e):e instanceof Dh?new qh(t,e.data):e))}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}gl.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};"".repeat(7),(t=>{const e=t.createElement("br");e.dataset.ckeFiller="true"})(Xa.document),(t=>{t.createTextNode("")})(Xa.document),(t=>{const e=t.createElement("span");e.dataset.ckeFiller="true",e.innerText=""})(Xa.document);class pl{is(){throw new Error("is() method is abstract")}}class ml extends pl{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new ih("model-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.offsetSize)throw new ih("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}ml.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class bl{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new ih("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new ih("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=yl._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s,n,i;do{n=this.position,i=this._visitedParent,({done:e,value:s}=this.next())}while(!e&&t(s));e||(this._position=n,this._visitedParent=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const n=wl(e,s),i=n||vl(e,s,n);if(i&&i.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=i;return this._position=e,_l("elementStart",i,t,e,1)}if(i&&i.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=i.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),n=t-e.offset}const r=e.offset-i.startOffset,o=new ml(i,r,n);return e.offset+=n,this._position=e,_l("text",o,t,e,n)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():_l("elementEnd",s,t,e)}_previous(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&0===e.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const n=e.parent,i=wl(e,n),r=i||Pl(e,n,i);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,_l("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():_l("elementEnd",r,t,e));if(r&&r.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=r.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),n=e.offset-t}const i=e.offset-r.startOffset,o=new ml(r,i-n,n);return e.offset-=n,this._position=e,_l("text",o,t,e,n)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,_l("elementStart",s,t,e,1)}}function _l(t,e,s,n,i){return{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}class yl extends pl{root;path;stickiness;constructor(t,e,s="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new ih("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new ih("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new ih("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new ih("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return wl(this,this.parent)}get nodeAfter(){const t=this.parent;return vl(this,t,wl(this,t))}get nodeBefore(){const t=this.parent;return Pl(this,t,wl(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=Mh(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new bl(e);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=Mh(this.path,t.path),s="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,s)}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}getShiftedBy(t){const e=this.clone(),s=e.offset+t;return e.offset=s<0?0:s,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let s=0;s<e;s++){const e=this.path[s]-t.path[s];if(e<-1||e>1)return!1;if(1===e)return xl(t,this,s);if(-1===e)return xl(this,t,s)}return this.path.length===t.path.length||(this.path.length>t.path.length?Sl(this.path,e):Sl(t.path,e))}hasSameParentAs(t){return this.root===t.root&&"same"==Mh(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=yl._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let s;return e.containsPosition(this)||e.start.isEqual(this)?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):s=this.isEqual(t.deletionPosition)?yl._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,e){const s=yl._createAt(this);if(this.root!=t.root)return s;if("same"==Mh(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;s.offset-=e}}else if("prefix"==Mh(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n])return null;s.path[n]-=e}}return s}_getTransformedByInsertion(t,e){const s=yl._createAt(this);if(this.root!=t.root)return s;if("same"==Mh(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(s.offset+=e);else if("prefix"==Mh(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;t.offset<=this.path[n]&&(s.path[n]+=e)}return s}_getTransformedByMove(t,e,s){if(e=e._getTransformedByDeletion(t,s),t.isEqual(e))return yl._createAt(this);const n=this._getTransformedByDeletion(t,s);return null===n||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(s).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):n._getTransformedByInsertion(e,s)}_getCombined(t,e){const s=t.path.length-1,n=yl._createAt(e);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[s]-t.offset,n.path=[...n.path,...this.path.slice(s+1)],n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,s="toNone"){if(t.is("model:position"))return new yl(t.root,t.path,t.stickiness);{const n=t;if("end"==e)e=n.maxOffset;else{if("before"==e)return this._createBefore(n,s);if("after"==e)return this._createAfter(n,s);if(0!==e&&!e)throw new ih("model-createpositionat-offset-required",[this,t])}if(!n.is("element")&&!n.is("documentFragment"))throw new ih("model-position-parent-incorrect",[this,t]);const i=n.getPath();return i.push(e),new this(n.root,i,s)}}static _createAfter(t,e){if(!t.parent)throw new ih("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new ih("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const s=new yl(e.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!e.getRoot(t.root))throw new ih("model-position-fromjson-no-root",e,{rootName:t.root});return new yl(e.getRoot(t.root),t.path,t.stickiness)}}function wl(t,e){const s=e.getChildAtOffset(t.offset);return s&&s.is("$text")&&s.startOffset<t.offset?s:null}function vl(t,e,s){return null!==s?null:e.getChildAtOffset(t.offset)}function Pl(t,e,s){return null!==s?null:e.getChild(e.offsetToIndex(t.offset)-1)}function xl(t,e,s){return s+1!==t.path.length&&!!Sl(e.path,s+1)&&!!function(t,e){let s=t.parent,n=t.path.length-1,i=0;for(;n>=e;){if(t.path[n]+i!==s.maxOffset)return!1;i=1,n--,s=s.parent}return!0}(t,s+1)}function Sl(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}yl.prototype.is=function(t){return"position"===t||"model:position"===t};class Al extends pl{start;end;constructor(t,e){super(),this.start=yl._createAt(t),this.end=e?yl._createAt(e):yl._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new bl({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==Mh(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}containsItem(t){const e=yl._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Al(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Al(t.end,this.end))):e.push(new Al(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Al(e,s)}return null}getJoined(t,e=!1){let s=this.isIntersecting(t);if(s||(s=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let n=this.start,i=this.end;return t.start.isBefore(n)&&(n=t.start),t.end.isAfter(i)&&(i=t.end),new Al(n,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,s=yl._createAt(this.start);let n=s.parent;for(;s.path.length>e+1;){const e=n.maxOffset-s.offset;0!==e&&t.push(new Al(s,s.getShiftedBy(e))),s.path=s.path.slice(0,-1),s.offset++,n=n.parent}for(;s.path.length<=this.end.path.length;){const e=this.end.path[s.path.length-1],n=e-s.offset;0!==n&&t.push(new Al(s,s.getShiftedBy(n))),s.offset=e,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new bl(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new bl(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new bl(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Al(this.start,this.end)]}getTransformedByOperations(t){const e=[new Al(this.start,this.end)];for(const s of t)for(let t=0;t<e.length;t++){const n=e[t].getTransformedByOperation(s);e.splice(t,1,...n),t+=n.length-1}for(let t=0;t<e.length;t++){const s=e[t];for(let n=t+1;n<e.length;n++){const t=e[n];(s.containsRange(t)||t.containsRange(s)||s.isEqual(t))&&e.splice(n,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const s=t.sourcePosition,n=t.howMany,i=t.targetPosition;return this._getTransformedByMove(s,i,n,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),e.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Al(e,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Al(this.start);let e=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return e.root!=s.root&&(s=this.end.getShiftedBy(-1)),e.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(e=yl._createAt(s),e.offset=0):(t.deletionPosition.isEqual(e)||(s=t.deletionPosition),e=t.targetPosition),new Al(e,s)):new Al(e,s)}_getTransformedByInsertion(t,e,s=!1){if(s&&this.containsPosition(t))return[new Al(this.start,t),new Al(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const s=new Al(this.start,this.end);return s.start=s.start._getTransformedByInsertion(t,e),s.end=s.end._getTransformedByInsertion(t,e),[s]}}_getTransformedByMove(t,e,s,n=!1){if(this.isCollapsed){const n=this.start._getTransformedByMove(t,e,s);return[new Al(n)]}const i=Al._createFromPositionAndShift(t,s),r=e._getTransformedByDeletion(t,s);if(this.containsPosition(e)&&!n&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const n=this.start._getTransformedByMove(t,e,s),i=this.end._getTransformedByMove(t,e,s);return[new Al(n,i)]}let o;const a=this.getDifference(i);let h=null;const l=this.getIntersection(i);if(1==a.length?h=new Al(a[0].start._getTransformedByDeletion(t,s),a[0].end._getTransformedByDeletion(t,s)):2==a.length&&(h=new Al(this.start,this.end._getTransformedByDeletion(t,s))),o=h?h._getTransformedByInsertion(r,s,null!==l||n):[],l){const t=new Al(l.start._getCombined(i.start,r),l.end._getCombined(i.start,r));2==o.length?o.splice(1,0,t):o.push(t)}return o}_getTransformedByDeletion(t,e){let s=this.start._getTransformedByDeletion(t,e),n=this.end._getTransformedByDeletion(t,e);return null==s&&null==n?null:(null==s&&(s=t),null==n&&(n=t),new Al(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return new this(yl._createAt(t,0),yl._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(yl._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new ih("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const s=t.indexOf(e),n=new this(e.start,e.end);for(let e=s-1;e>=0&&t[e].end.isEqual(n.start);e--)n.start=yl._createAt(t[e].start);for(let e=s+1;e<t.length&&t[e].start.isEqual(n.end);e++)n.end=yl._createAt(t[e].end);return n}static fromJSON(t,e){return new this(yl.fromJSON(t.start,e),yl.fromJSON(t.end,e))}}Al.prototype.is=function(t){return"range"===t||"model:range"===t};class Ol extends pl{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=Ih(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=Mh(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Ih(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}Ol.prototype.is=function(t){return"node"===t||"model:node"===t};class kl extends(dh(pl)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Al(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new Al(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new Al(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]);else if(e instanceof kl)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Al)this._setRanges([e],!!n&&!!n.backward);else if(e instanceof yl)this._setRanges([new Al(e)]);else if(e instanceof Ol){const t=!!n&&!!n.backward;let i;if("in"==s)i=Al._createIn(e);else if("on"==s)i=Al._createOn(e);else{if(void 0===s)throw new ih("model-selection-setto-required-second-parameter",[this,e]);i=new Al(yl._createAt(e,s))}this._setRanges([i],t)}else{if(!Th(e))throw new ih("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,n&&!!n.backward)}}_setRanges(t,e=!1){const s=Array.from(t),n=s.some(e=>{if(!(e instanceof Al))throw new ih("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(s.length!==this._ranges.length||n)&&(this._replaceAllRanges(s),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new ih("model-selection-setfocus-no-ranges",[this,t]);const s=yl._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.length&&this._popRange(),"before"==s.compareWith(n)?(this._pushRange(new Al(s,n)),this._lastRangeBackward=!0):(this._pushRange(new Al(n,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const s=El(e.start,t);Tl(s,e)&&(yield s);const n=e.getWalker();for(const s of n){const i=s.item;"elementEnd"==s.type&&Nl(i,t,e)?yield i:"elementStart"==s.type&&i.is("model:element")&&i.root.document.model.schema.isBlock(i)&&n.jumpTo(yl._createAt(i,"end"))}const i=El(e.end,t);Bl(i,e)&&(yield i)}}containsEntireContent(t=this.anchor.root){const e=yl._createAt(t,0),s=yl._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())},e=Object.fromEntries(this.getAttributes());return Object.keys(e).length&&(t.attributes=e),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new Al(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new ih("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Rl(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Nl(t,e,s){return Rl(t,e)&&Ml(t,s)}function El(t,e){const s=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const r=n.find(t=>!i&&(i=s.isLimit(t),!i&&Rl(t,e)));return n.forEach(t=>e.add(t)),r}function Ml(t,e){const s=function(t){const e=t.root.document.model.schema;let s=t.parent;for(;s;){if(e.isBlock(s))return s;s=s.parent}}(t);return!s||!e.containsRange(Al._createOn(s),!0)}function Tl(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(yl._createAt(t,t.maxOffset))&&Ml(t,e))}function Bl(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(yl._createAt(t,0))&&Ml(t,e))}kl.prototype.is=function(t){return"selection"===t||"model:selection"===t};class Cl extends(dh(Al)){constructor(t,e){super(t,e),Il.call(this)}detach(){this.stopListening()}toRange(){return new Al(this.start,this.end)}static fromRange(t){return new Cl(t.start,t.end)}}function Il(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Fl.call(this,s)},{priority:"low"})}function Fl(t){const e=this.getTransformedByOperation(t),s=Al._createFromRanges(e),n=!s.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let r=null;if(n){"$graveyard"==s.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=s.start,this.end=s.end,this.fire("change:range",e,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}Cl.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class Jl extends Ol{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new Jl(this.data,this.getAttributes())}static fromJSON(t){return new Jl(t.data,t.attributes)}}Jl.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const Vl="selection:";(class extends(dh(pl)){_selection;constructor(t){super(),this._selection=new ql(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return Vl+t}static _isStoreAttributeKey(t){return t.startsWith(Vl)}}).prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class ql extends kl{markers=new Ch({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&"marker"!=s.type&&"rename"!=s.type&&"noop"!=s.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,s,n)=>{this._updateMarker(e,n)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const s=t.document.differ;for(const n of s.getChanges()){if("insert"!=n.type)continue;const s=n.position.parent;n.length===s.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(s.getAttributeKeys()).filter(t=>t.startsWith(Vl));for(const n of e)t.removeAttribute(n,s)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=eh();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new ih("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(t=>t.toJSON())),t}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new ih("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=Cl.fromRange(t);return e.on("change:range",(t,s,n)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=n.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const n=e.getRange();for(const s of this.getRanges())n.containsRange(s,!s.isCollapsed)&&t.push(e)}const s=Array.from(this.markers);for(const s of t)this.markers.has(s)||(this.markers.add(s),e=!0);for(const s of Array.from(this.markers))t.includes(s)||(this.markers.remove(s),e=!0);e&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,e){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let n=!1;const i=Array.from(this.markers),r=this.markers.has(t);if(e){let s=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){s=!0;break}s&&!r?(this.markers.add(t),n=!0):!s&&r&&(this.markers.remove(t),n=!0)}else r&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=Ih(this._getSurroundingAttributes()),s=Ih(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const n=[];for(const[t,e]of this.getAttributes())s.has(t)&&s.get(t)===e||n.push(t);for(const[t]of s)this.hasAttribute(t)||n.push(t);n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1})}_setAttribute(t,e,s=!0){const n=s?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,n),!0))}_removeAttribute(t,e=!0){const s=e?"normal":"low";return!("low"==s&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,s),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[e,s]of this.getAttributes())t.get(e)!==s&&this._removeAttribute(e,!1);for(const[s,n]of t)this._setAttribute(s,n,!1)&&e.add(s);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(Vl)){const s=e.substr(10);yield[s,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let s=null;if(this.isCollapsed){const n=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=Dl(n,e)),s||(s=Dl(i,e)),!this.isGravityOverridden&&!s){let t=n;for(;t&&!s;)t=t.previousSibling,s=Dl(t,e)}if(!s){let t=i;for(;t&&!s;)t=t.nextSibling,s=Dl(t,e)}s||(s=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const n of t){if(n.item.is("element")&&e.isObject(n.item)){s=Dl(n.item,e);break}if("text"==n.type){s=n.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function Dl(t,e){if(!t)return null;if(t instanceof ml||t instanceof Jl)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const s=[];for(const[n,i]of t.getAttributes())e.checkAttribute("$text",n)&&!1!==e.getAttributeProperties(n).copyFromObject&&s.push([n,i]);return s}class jl{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new ih("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new ih("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const s=[];for(const t of e){if(!(t instanceof Ol))throw new ih("model-nodelist-insertnodes-not-node",this);s.push(t)}let n=this.indexToOffset(t);Fh(this._nodes,s,t),Fh(this._offsetToNode,function(t){const e=[];let s=0;for(const n of t)for(let t=0;t<n.offsetSize;t++)e[s++]=n;return e}(s),n);for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=n,n+=this._nodes[e].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let s=this.indexToOffset(t);const n=this._nodes.splice(t,e),i=n[n.length-1],r=i.startOffset+i.offsetSize-s;this._offsetToNode.splice(s,r);for(const t of n)t._index=null,t._startOffset=null;for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=s,s+=this._nodes[e].offsetSize;return n}_removeNodesArray(t){if(0==t.length)return;for(const e of t)e._index=null,e._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t]._index=t,this._nodes[t]._startOffset=e,e+=this._nodes[t].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}class Ll extends Ol{name;_children=new jl;constructor(t,e,s){super(e),this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}findAncestor(t,e={}){let s=e.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?function(t){const e=[];for(const s of t)e.push(s._clone(!0));return e}(this._children):void 0;return new Ll(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){if("string"==typeof t)return[new Jl(t)];Th(t)||(t=[t]);const e=[];for(const s of t)"string"==typeof s?e.push(new Jl(s)):s instanceof ml?e.push(new Jl(s.data,s.getAttributes())):e.push(s);return e}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const s of t.children)s.name?e.push(Ll.fromJSON(s)):e.push(Jl.fromJSON(s))}return new Ll(t.name,t.attributes,e)}}Ll.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;class $l{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function zl(t,e){const s=Ul(e),n=s.reduce((t,e)=>t+e.offsetSize,0),i=t.parent;Kl(t);const r=t.index;return i._insertChild(r,s),Gl(i,r+s.length),Gl(i,r),new Al(t,t.getShiftedBy(n))}function Wl(t,e){if(!t.isFlat)throw new ih("operation-utils-move-range-not-flat",this);const s=function(t){if(!t.isFlat)throw new ih("operation-utils-remove-range-not-flat",this);const e=t.start.parent;Kl(t.start),Kl(t.end);const s=e._removeChildren(t.start.index,t.end.index-t.start.index);return Gl(e,t.start.index),s}(t);return zl(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),s)}function Ul(t){const e=[];!function t(s){if("string"==typeof s)e.push(new Jl(s));else if(s instanceof ml)e.push(new Jl(s.data,s.getAttributes()));else if(s instanceof Ol)e.push(s);else if(Th(s))for(const e of s)t(e)}(t);for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];s instanceof Jl&&n instanceof Jl&&Yl(s,n)&&(e.splice(t-1,2,new Jl(n.data+s.data,n.getAttributes())),t--)}return e}function Gl(t,e){const s=t.getChild(e-1),n=t.getChild(e);if(s&&n&&s.is("$text")&&n.is("$text")&&Yl(s,n)){const i=new Jl(s.data+n.data,s.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function Kl(t){const e=t.textNode,s=t.parent;if(e){const n=t.offset-e.startOffset,i=e.index;s._removeChildren(i,1);const r=new Jl(e.data.substr(0,n),e.getAttributes()),o=new Jl(e.data.substr(n),e.getAttributes());s._insertChild(i,[r,o])}}function Yl(t,e){const s=t.getAttributes(),n=e.getAttributes();for(const t of s){if(t[1]!==e.getAttribute(t[0]))return!1;n.next()}return n.next().done}class Ql extends $l{sourcePosition;howMany;targetPosition;constructor(t,e,s,n){super(n),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[Al._createFromPositionAndShift(this.sourcePosition,this.howMany),Al._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new Ql(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new Ql(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,s=this.sourcePosition.offset,n=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new ih("move-operation-nodes-do-not-exist",this);if(t===e&&s<n&&n<s+this.howMany)throw new ih("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Mh(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=s&&this.targetPosition.path[t]<s+this.howMany)throw new ih("move-operation-node-into-itself",this)}}_execute(){Wl(Al._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const s=yl.fromJSON(t.sourcePosition,e),n=yl.fromJSON(t.targetPosition,e);return new this(s,t.howMany,n,t.baseVersion)}}class Hl extends $l{position;nodes;shouldReceiveAttributes;constructor(t,e,s){super(s),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new jl(Ul(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new jl([...this.nodes].map(t=>t._clone(!0))),e=new Hl(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new yl(t,[0]);return new Ql(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new ih("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new jl([...t].map(t=>t._clone(!0))),zl(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const s=[];for(const e of t.nodes)e.name?s.push(Ll.fromJSON(e)):s.push(Jl.fromJSON(e));const n=new Hl(yl.fromJSON(t.position,e),s,t.baseVersion);return n.shouldReceiveAttributes=t.shouldReceiveAttributes,n}}class Xl extends $l{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=s,this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new yl(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Al(this.splitPosition,t)}get affectedSelectable(){const t=[Al._createFromPositionAndShift(this.splitPosition,0),Al._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Al._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new Xl(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new yl(t,[0]);return new Zl(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new ih("split-operation-position-invalid",this);if(!t.parent)throw new ih("split-operation-split-in-root",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new ih("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new ih("split-operation-graveyard-position-invalid",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)Wl(Al._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();zl(this.insertionPosition,e)}Wl(new Al(yl._createAt(t,this.splitPosition.offset),yl._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new yl(t.root,e,"toPrevious")}static fromJSON(t,e){const s=yl.fromJSON(t.splitPosition,e),n=yl.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?yl.fromJSON(t.graveyardPosition,e):null;return new this(s,t.howMany,n,i,t.baseVersion)}}class Zl extends $l{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new yl(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Al(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Al._createOn(t),Al._createFromPositionAndShift(this.targetPosition,0),Al._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new Zl(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),s=new yl(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new Xl(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new ih("merge-operation-source-position-invalid",this);if(!e.parent)throw new ih("merge-operation-target-position-invalid",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new ih("merge-operation-how-many-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent;Wl(Al._createIn(t),this.targetPosition),Wl(Al._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const s=yl.fromJSON(t.sourcePosition,e),n=yl.fromJSON(t.targetPosition,e),i=yl.fromJSON(t.graveyardPosition,e);return new this(s,t.howMany,n,i,t.baseVersion)}}class tc extends $l{name;oldRange;newRange;affectsData;_markers;constructor(t,e,s,n,i,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=s?s.clone():null,this.affectsData=i,this._markers=n}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new tc(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new tc(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new tc(t.name,t.oldRange?Al.fromJSON(t.oldRange,e):null,t.newRange?Al.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class ec extends $l{range;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new ec(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ec(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new ih("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Ns(t.getAttribute(this.key),this.oldValue))throw new ih("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new ih("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Ns(this.oldValue,this.newValue)||function(t,e,s){Kl(t.start),Kl(t.end);for(const n of t.getItems({shallow:!0})){const t=n.is("$textProxy")?n.textNode:n;null!==s?t._setAttribute(e,s):t._removeAttribute(e),Gl(t.parent,t.index)}Gl(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new ec(Al.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class sc extends $l{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new sc(this.baseVersion)}getReversed(){return new sc(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class nc extends $l{position;oldName;newName;constructor(t,e,s,n){super(n),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new nc(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new nc(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof Ll))throw new ih("rename-operation-wrong-position",this);if(""!==this.oldName&&t.name!==this.oldName)throw new ih("rename-operation-wrong-name",this);this.oldName=t.name}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new nc(yl.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class ic extends $l{root;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.root=t,this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new ic(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new ic(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new ih("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new ih("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new ih("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new ih("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new ic(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class rc extends $l{rootName;elementName;isAdd;_document;constructor(t,e,s,n,i){super(i),this.rootName=t,this.elementName=e,this.isAdd=s,this._document=n,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new rc(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new rc(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new rc(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const oc={};oc[ec.className]=ec,oc[Hl.className]=Hl,oc[tc.className]=tc,oc[Ql.className]=Ql,oc[sc.className]=sc,oc[$l.className]=$l,oc[nc.className]=nc,oc[ic.className]=ic,oc[rc.className]=rc,oc[Xl.className]=Xl,oc[Zl.className]=Zl;const ac=new Map;function hc(t,e,s){let n=ac.get(t);n||(n=new Map,ac.set(t,n)),n.set(e,s)}function lc(t,e,s){const n=t.nodes.getNode(0).getAttribute(e);if(n==s)return null;const i=new Al(t.position,t.position.getShiftedBy(t.howMany));return new ec(i,e,n,s,0)}function cc(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function dc(t,e){const s=[];for(let n=0;n<t.length;n++){const i=t[n],r=new Ql(i.start,i.end.offset-i.start.offset,e,0);s.push(r);for(let e=n+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return s}hc(ec,ec,(t,e,s)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const n=t.range.getDifference(e.range).map(e=>new ec(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&s.aIsStrong&&n.push(new ec(i,e.key,e.newValue,t.newValue,0)),0==n.length?[new sc(0)]:n}return[t]}),hc(ec,Hl,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const s=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new ec(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const n=lc(e,t.key,t.oldValue);n&&s.unshift(n)}return s}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),hc(ec,Zl,(t,e)=>{const s=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&s.push(Al._createFromPositionAndShift(e.graveyardPosition,1));const n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||s.push(n),s.map(e=>new ec(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),hc(ec,Ql,(t,e)=>{const s=function(t,e){const s=Al._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,i=[];s.containsRange(t,!0)?n=t:t.start.hasSameParentAs(s.start)?(i=t.getDifference(s),n=t.getIntersection(s)):i=[t];const r=[];for(let t of i){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const s=e.getMovedRangeStart(),n=t.start.hasSameParentAs(s),i=t._getTransformedByInsertion(s,e.howMany,n);r.push(...i)}return n&&r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}(t.range,e);return s.map(e=>new ec(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),hc(ec,Xl,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const s=t.clone();return s.range=new Al(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,s]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),hc(Hl,ec,(t,e)=>{const s=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const n=lc(t,e.key,e.newValue);n&&s.push(n)}return s}),hc(Hl,Hl,(t,e,s)=>(t.position.isEqual(e.position)&&s.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),hc(Hl,Ql,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),hc(Hl,Xl,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),hc(Hl,Zl,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),hc(tc,Hl,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),hc(tc,tc,(t,e,s)=>{if(t.name==e.name){if(!s.aIsStrong)return[new sc(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),hc(tc,Zl,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),hc(tc,Ql,(t,e)=>{const s=[t];if(t.oldRange&&(t.oldRange=Al._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const n=t.newRange._getTransformedByMoveOperation(e);t.newRange=n[0];for(let e=1;e<n.length;e++){const i=t.clone();i.oldRange=null,i.newRange=n[e],i.baseVersion=-1,s.push(i)}}return s}),hc(tc,Xl,(t,e,s)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(s.abRelation){const n=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?s.abRelation.wasStartBeforeMergedElement?t.newRange.start=yl._createAt(e.insertionPosition):s.abRelation.wasInLeftElement?t.newRange.start=yl._createAt(t.newRange.start):t.newRange.start=yl._createAt(e.moveTargetPosition):t.newRange.start=n.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&s.abRelation.wasEndBeforeMergedElement?t.newRange.end=yl._createAt(e.insertionPosition):s.abRelation.wasInRightElement?t.newRange.end=yl._createAt(e.moveTargetPosition):t.newRange.end=yl._createAt(t.newRange.end):t.newRange.end=n.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),hc(Zl,Hl,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),hc(Zl,Zl,(t,e,s)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(s.bWasUndone){const s=e.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new yl(e.graveyardPosition.root,s),t.howMany=0,[t]}return[new sc(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!s.bWasUndone&&"splitAtSource"!=s.abRelation){const n="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=e.targetPosition._getTransformedByMergeOperation(e),n=t.targetPosition._getTransformedByMergeOperation(e);return[new Ql(s,t.howMany,n,0)]}return[new sc(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&s.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),hc(Zl,Ql,(t,e,s)=>{const n=Al._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!s.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new sc(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==s.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==s.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),hc(Zl,Xl,(t,e,s)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition)||"mergeTargetNotMoved"==s.abRelation))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==s.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==s.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),hc(Ql,Hl,(t,e)=>{const s=Al._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),hc(Ql,Ql,(t,e,s)=>{const n=Al._createFromPositionAndShift(t.sourcePosition,t.howMany),i=Al._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,o=s.aIsStrong,a=!s.aIsStrong;if("insertBefore"==s.abRelation||"insertAfter"==s.baRelation?a=!0:"insertAfter"!=s.abRelation&&"insertBefore"!=s.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),cc(t,e)&&cc(e,t))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),dc([n],r);if(i.containsPosition(t.targetPosition)&&i.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),dc([n],r);const h=Mh(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==h||"extension"==h)return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),dc([n],r);"remove"!=t.type||"remove"==e.type||s.aWasUndone||s.forceWeakRemove?"remove"==t.type||"remove"!=e.type||s.bWasUndone||s.forceWeakRemove||(o=!1):o=!0;const l=[],c=n.getDifference(i);for(const t of c){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const s="same"==Mh(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,s);l.push(...n)}const d=n.getIntersection(i);return null!==d&&o&&(d.start=d.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.end=d.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(d):1==l.length?i.start.isBefore(n.start)||i.start.isEqual(n.start)?l.unshift(d):l.push(d):l.splice(1,0,d)),0===l.length?[new sc(t.baseVersion)]:dc(l,r)}),hc(Ql,Xl,(t,e,s)=>{let n=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=s.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==s.abRelation)return t.howMany++,t.targetPosition=n,[t];const i=Al._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=s.abRelation||t.howMany++,t.targetPosition=n,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new Al(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),dc([new Al(i.start,e.splitPosition),t],n)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==s.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==s.abRelation&&(n=t.targetPosition);const r=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const n=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&n&&!s.aWasUndone&&r.push(Al._createFromPositionAndShift(e.insertionPosition,1))}return dc(r,n)}),hc(Ql,Zl,(t,e,s)=>{const n=Al._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||s.forceWeakRemove){if(1==t.howMany)return s.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new sc(0)]}else if(!s.aWasUndone){const s=[];let n=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(s.push(new Ql(t.sourcePosition,t.howMany-1,r,0)),n=n._getTransformedByMove(t.sourcePosition,r,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,r),a=new Ql(n,1,o,0),h=a.getMovedRangeStart().path.slice();h.push(0);const l=new yl(a.targetPosition.root,h);i=i._getTransformedByMove(n,o,1);const c=new Ql(i,e.howMany,l,0);return s.push(a),s.push(c),s}const i=Al._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),hc(nc,Hl,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),hc(nc,Zl,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),hc(nc,Ql,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),hc(nc,nc,(t,e,s)=>{if(t.position.isEqual(e.position)){if(!s.aIsStrong)return[new sc(0)];t.oldName=e.newName}return[t]}),hc(nc,Xl,(t,e)=>{if("same"==Mh(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new nc(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),hc(ic,ic,(t,e,s)=>{if(t.root===e.root&&t.key===e.key){if(!s.aIsStrong||t.newValue===e.newValue)return[new sc(0)];t.oldValue=e.newValue}return[t]}),hc(rc,rc,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new sc(0)]:[t]),hc(Xl,Hl,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),hc(Xl,Zl,(t,e,s)=>{if(!t.graveyardPosition&&!s.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const s=e.graveyardPosition.path.slice();s.push(0);const n=new yl(e.graveyardPosition.root,s),i=Xl.getInsertionPosition(new yl(e.graveyardPosition.root,s)),r=new Xl(n,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Xl.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Xl.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),hc(Xl,Ql,(t,e,s)=>{const n=Al._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!s.bWasUndone&&i){const s=t.splitPosition._getTransformedByMoveOperation(e),n=t.graveyardPosition._getTransformedByMoveOperation(e),i=n.path.slice();i.push(0);const r=new yl(n.root,i);return[new Ql(s,t.howMany,r,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==s.baRelation||"splitBefore"==s.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Xl.getInsertionPosition(t.splitPosition),[t];if(i&&s.abRelation&&s.abRelation.howMany){const{howMany:e,offset:n}=s.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(n),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=s,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Xl.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=Xl.getInsertionPosition(t.splitPosition),[t]}),hc(Xl,Xl,(t,e,s)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new sc(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new sc(0)];if("splitBefore"==s.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const n="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=[];return e.howMany&&s.push(new Ql(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&s.push(new Ql(t.splitPosition,t.howMany,t.moveTargetPosition,0)),s}return[new sc(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==s.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==s.baRelation){const s=e.insertionPosition.path.slice();s.push(0);const n=new yl(e.insertionPosition.root,s);return[t,new Ql(t.insertionPosition,1,n,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Xl.getInsertionPosition(t.splitPosition),[t]});function fc(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&uc.call(this,s)},{priority:"low"})}function uc(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}(class extends(dh(yl)){constructor(t,e,s="toNone"){if(super(t,e,s),!this.root.is("rootElement"))throw new ih("model-liveposition-root-not-rootelement",t);fc.call(this)}detach(){this.stopListening()}toPosition(){return new yl(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}).prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};(class extends Ll{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,s="main"){super(e),this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;(class extends(dh(pl)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,s,n){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=s,this._affectsData=n}get managedUsingOperations(){if(!this._liveRange)throw new ih("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new ih("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new ih("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new ih("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new ih("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}).prototype.is=function(t){return"marker"===t||"model:marker"===t};class gc extends pl{markers=new Map;_children=new jl;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const s of t)s.name?e.push(Ll.fromJSON(s)):e.push(Jl.fromJSON(s));return new gc(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){return"string"==typeof t?[new Jl(t)]:(Th(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new Jl(t):t instanceof ml?new Jl(t.data,t.getAttributes()):t))}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}let pc;gc.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t},new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]),Symbol("_treeDump"),Symbol("MainQueueId"),Symbol.iterator,s(90491),s(93018),s(2483),s(2698),s(49058),s(85853),s(99057),s(7048),s(7696),s(62411),s(34122),s(96443),s(97728),s(87230),s(80774),s(70892),s(53172),s(45834),s(86615),s(11262),s(59330),s(7997),s(88494),s(1181),s(26914),s(14584),s(92645),s(16545),s(36067),s(25843),s(40565),s(52084),s(12215),s(77667),s(40237),s(29706),s(54427),s(81719),s(39496),s(57591),s(10475),s(81967),s(61274),s(50042),s(30654),s(33460),s(54256),s(11366),s(53352),s(26069),s(26618),s(81878),s(42471),s(59796),s(5285),s(19591),s(49490),s(36523),s(26465),s(37038),s(26821),s(98673),s(52305),s(25613),s(76154),s(55776),s(88448),s(18479),s(73481),s(50879),s(81615),s(13115),s(40004),s(96647),s(74096),s(66971),s(26900),s(16759),s(54706),s(53866),s(14617),s(6696),s(26503),s(39382),s(80629),s(8408),s(42716),s(39662),s(24157),s(65236),s(71050),s(42508),s(90349),s(25299),s(64927),s(9241),s(68434),s(50897),s(78945),s(86105),s(97185),s(68254),s(43365),s(99707),s(44277),s(80896),s(64177),s(80307),s(39799),s(43146),s(93866),s(61226),s(74970),s(88125),s(5415),s(999),s(58651),s(60715),s(41485),s(78334),s(99070),s(89328),s(69230),s(25874),s(61345),s(68160),s(7759),s(76790),s(94662),s(14277),s(20466),s(3460),s(63580),s(9354),s(56468),s(21533),s(94428),s(55658),s(50828),s(92519),s(87285),s(85576),s(2788),s(39225),s(43458),s(20510),s(33125),s(34775),s(31569),s(4074),s(97578),s(18386),s(86004),s(36147),s(56681),s(68814),s(22037),s(76768),s(98385),s(76371),s(91545),s(96695),s(57935),s(83609),s(66558),s(98121),s(11694),s(50232),s(1990),s(94455),s(97669),s(79078),s(81349),s(1092),s(10771),s(45730),s(77426),s(44641),s(27862),s(95139),s(96128),s(34299),s(6),s(49543),s(92167),s(5574),s(19576),s(95761),s(86275),s(68419),s(71439),s(5172),s(22622),s(64503),s(38567),s(6570),s(98827),s(60307),s(15888),s(68286),s(59249),s(2774),s(98812),s(61442),s(55811),s(42269);try{pc={window,document}}catch{pc={window:{},document:{}}}class mc{source;name;path;stop;off;return;constructor(t,e){this.source=t,this.name=e,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}}}const bc=new Array(256).fill("").map((t,e)=>("0"+e.toString(16)).slice(-2));function _c(){const[t,e,s,n]=crypto.getRandomValues(new Uint32Array(4));return"e"+bc[255&t]+bc[t>>8&255]+bc[t>>16&255]+bc[t>>24&255]+bc[255&e]+bc[e>>8&255]+bc[e>>16&255]+bc[e>>24&255]+bc[255&s]+bc[s>>8&255]+bc[s>>16&255]+bc[s>>24&255]+bc[255&n]+bc[n>>8&255]+bc[n>>16&255]+bc[n>>24&255]}const yc={get(t="normal"){return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function wc(t,e){const s=yc.get(e.priority);let n=0,i=t.length;for(;n<i;){const e=n+i>>1;yc.get(t[e].priority)<s?i=e:n=e+1}t.splice(n,0,e)}class vc extends Error{context;data;constructor(t,e,s,n){super(function(t,e,s){const n=new WeakSet;return t+(e?` ${JSON.stringify(e,(t,e)=>{if("object"==typeof e&&null!==e){if(n.has(e))return`[object ${e.constructor.name}]`;n.add(e)}return e})}`:"")+xc(t)+(s?`\nOriginal error: ${s.name}: ${s.message}`:"")}(t,s,n)),this.name="CKEditorError",this.context=e,this.data=s,n&&(this.stack=n.stack)}is(t){return"CKEditorError"===t}static rethrowUnexpectedError(t,e){if(t.is&&t.is("CKEditorError"))throw t;throw new vc("unexpected-error",e,void 0,t)}}function Pc(t,e){console.warn(...function(t,e){const s=xc(t);return e?[t,e,s]:[t,s]}(t,e))}function xc(t){return`\nRead more: https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html#error-${t}`}if(new Date(2025,9,1),globalThis.CKEDITOR_VERSION)throw new vc("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION="47.0.0";const Sc=Symbol("listeningTo"),Ac=Symbol("emitterId"),Oc=Symbol("delegations"),kc=Rc(Object);function Rc(t){return t?class extends t{on(t,e,s){this.listenTo(this,t,e,s)}once(t,e,s){let n=!1;this.listenTo(this,t,(t,...s)=>{n||(n=!0,t.off(),e.call(this,t,...s))},s)}off(t,e){this.stopListening(this,t,e)}listenTo(t,e,s,n={}){let i,r;this[Sc]||(this[Sc]={});const o=this[Sc];Nc(t)||function(t,e){t[Ac]||(t[Ac]=e||_c())}(t);const a=Nc(t);(i=o[a])||(i=o[a]={emitter:t,callbacks:{}}),(r=i.callbacks[e])||(r=i.callbacks[e]=[]),r.push(s),function(t,e,s,n,i){e._addEventListener?e._addEventListener(s,n,i):t._addEventListener.call(e,s,n,i)}(this,t,e,s,n)}stopListening(t,e,s){const n=this[Sc];let i=t&&Nc(t);const r=n&&i?n[i]:void 0,o=r&&e?r.callbacks[e]:void 0;if(!(!n||t&&!r||e&&!o))if(s)Cc(this,t,e,s),-1!==o.indexOf(s)&&(1===o.length?delete r.callbacks[e]:Cc(this,t,e,s));else if(o){for(;s=o.pop();)Cc(this,t,e,s);delete r.callbacks[e]}else if(r){for(e in r.callbacks)this.stopListening(t,e);delete n[i]}else{for(i in n)this.stopListening(n[i].emitter);delete this[Sc]}}fire(t,...e){try{const s=t instanceof mc?t:new mc(this,t),n=s.name;let i=function(t,e){if(!t._events)return null;let s=e;do{const e=t._events[s];if(e&&e.callbacks&&e.callbacks.length)return e.callbacks;const n=s.lastIndexOf(":");s=n>-1?s.substring(0,n):""}while(s);return null}(this,n);if(s.path.push(this),i){i=i.slice();for(let t=0;t<i.length;t++){const r=i[t].callback;if(r.call(this,s,...e),s.off.called&&(delete s.off.called,this._removeEventListener(n,r)),s.stop.called)break}}const r=this[Oc];if(r){const t=r.get(n),i=r.get("*");t&&Bc(t,s,e),i&&Bc(i,s,e)}return s.return}catch(t){vc.rethrowUnexpectedError(t,this)}}delegate(...t){return{to:(e,s)=>{this[Oc]||(this[Oc]=new Map),t.forEach(t=>{const n=this[Oc].get(t);n?n.set(e,s):this[Oc].set(t,new Map([[e,s]]))})}}}stopDelegating(t,e){if(this[Oc])if(t)if(e){const s=this[Oc].get(t);s&&s.delete(e)}else this[Oc].delete(t);else this[Oc].clear()}_addEventListener(t,e,s){!function(t,e){const s=Ec(t);if(s[e])return;let n=e,i=null;const r=[];for(;""!==n&&!s[n];)s[n]=Mc(),r.push(s[n]),i&&s[n].childEvents.push(i),i=n,n=n.substr(0,n.lastIndexOf(":"));if(""!==n){for(const t of r)t.callbacks=s[n].callbacks.slice();s[n].childEvents.push(i)}}(this,t);const n=Tc(this,t),i={callback:e,priority:yc.get(s.priority)};for(const t of n)wc(t,i)}_removeEventListener(t,e){const s=Tc(this,t);for(const t of s)for(let s=0;s<t.length;s++)t[s].callback==e&&(t.splice(s,1),s--)}}:kc}function Nc(t){return t[Ac]}function Ec(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function Mc(){return{callbacks:[],childEvents:[]}}function Tc(t,e){const s=Ec(t)[e];if(!s)return[];let n=[s.callbacks];for(let e=0;e<s.childEvents.length;e++){const i=Tc(t,s.childEvents[e]);n=n.concat(i)}return n}function Bc(t,e,s){for(let[n,i]of t){i?"function"==typeof i&&(i=i(e.name)):i=e.name;const t=new mc(e.source,i);t.path=[...e.path],n.fire(t,...s)}}function Cc(t,e,s,n){e._removeEventListener?e._removeEventListener(s,n):t._removeEventListener.call(e,s,n)}const Ic=Symbol("observableProperties"),Fc=Symbol("boundObservables"),Jc=Symbol("boundProperties"),Vc=Symbol("decoratedMethods"),qc=Symbol("decoratedOriginal"),Dc=jc(Rc());function jc(t){return t?class extends t{set(t,e){if(U(t))return void Object.keys(t).forEach(e=>{this.set(e,t[e])},this);Lc(this);const s=this[Ic];if(t in this&&!s.has(t))throw new vc("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:()=>s.get(t),set(e){const n=s.get(t);let i=this.fire(`set:${t}`,t,e,n);void 0===i&&(i=e),n===i&&s.has(t)||(s.set(t,i),this.fire(`change:${t}`,t,i,n))}}),this[t]=e}bind(...t){if(!t.length||!Wc(t))throw new vc("observable-bind-wrong-properties",this);if(new Set(t).size!==t.length)throw new vc("observable-bind-duplicate-properties",this);Lc(this);const e=this[Jc];t.forEach(t=>{if(e.has(t))throw new vc("observable-bind-rebind",this)});const s=new Map;return t.forEach(t=>{const n={property:t,to:[]};e.set(t,n),s.set(t,n)}),{to:$c,toMany:zc,_observable:this,_bindProperties:t,_to:[],_bindings:s}}unbind(...t){if(!this[Ic])return;const e=this[Jc],s=this[Fc];if(t.length){if(!Wc(t))throw new vc("observable-unbind-wrong-properties",this);t.forEach(t=>{const n=e.get(t);n&&(n.to.forEach(([t,e])=>{const i=s.get(t),r=i[e];r.delete(n),r.size||delete i[e],Object.keys(i).length||(s.delete(t),this.stopListening(t,"change"))}),e.delete(t))})}else s.forEach((t,e)=>{this.stopListening(e,"change")}),s.clear(),e.clear()}decorate(t){Lc(this);const e=this[t];if(!e)throw new vc("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(t,s)=>{t.return=e.apply(this,s)}),this[t]=function(...e){return this.fire(t,e)},this[t][qc]=e,this[Vc]||(this[Vc]=[]),this[Vc].push(t)}stopListening(t,e,s){if(!t&&this[Vc]){for(const t of this[Vc])this[t]=this[t][qc];delete this[Vc]}super.stopListening(t,e,s)}[Ic];[Vc];[Jc];[Fc]}:Dc}function Lc(t){t[Ic]||(Object.defineProperty(t,Ic,{value:new Map}),Object.defineProperty(t,Fc,{value:new Map}),Object.defineProperty(t,Jc,{value:new Map}))}function $c(...t){const e=function(...t){if(!t.length)throw new vc("observable-bind-to-parse-error",null);const e={to:[]};let s;return"function"==typeof t[t.length-1]&&(e.callback=t.pop()),t.forEach(t=>{if("string"==typeof t)s.properties.push(t);else{if("object"!=typeof t)throw new vc("observable-bind-to-parse-error",null);s={observable:t,properties:[]},e.to.push(s)}}),e}(...t),s=Array.from(this._bindings.keys()),n=s.length;if(!e.callback&&e.to.length>1)throw new vc("observable-bind-to-no-callback",this);if(n>1&&e.callback)throw new vc("observable-bind-to-extra-callback",this);var i;e.to.forEach(t=>{if(t.properties.length&&t.properties.length!==n)throw new vc("observable-bind-to-properties-length",this);t.properties.length||(t.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(s[0]).callback=e.callback),i=this._observable,this._to.forEach(t=>{const e=i[Fc];let s;e.get(t.observable)||i.listenTo(t.observable,"change",(n,r)=>{s=e.get(t.observable)[r],s&&s.forEach(t=>{Uc(i,t.property)})})}),function(t){let e;t._bindings.forEach((s,n)=>{t._to.forEach(i=>{e=i.properties[s.callback?0:t._bindProperties.indexOf(n)],s.to.push([i.observable,e]),function(t,e,s,n){const i=t[Fc],r=i.get(s),o=r||{};o[n]||(o[n]=new Set),o[n].add(e),r||i.set(s,o)}(t._observable,s,i.observable,e)})})}(this),this._bindProperties.forEach(t=>{Uc(this._observable,t)})}function zc(t,e,s){if(this._bindings.size>1)throw new vc("observable-bind-to-many-not-one-binding",this);this.to(...function(t,e){const s=t.map(t=>[t,e]);return Array.prototype.concat.apply([],s)}(t,e),s)}function Wc(t){return t.every(t=>"string"==typeof t)}function Uc(t,e){const s=t[Jc].get(e);let n;s.callback?n=s.callback.apply(t,s.to.map(t=>t[0][t[1]])):(n=s.to[0],n=n[0][n[1]]),Object.prototype.hasOwnProperty.call(t,e)?t[e]=n:t.set(e,n)}function Gc(t){let e=0;for(const s of t)e++;return e}function Kc(t,e){const s=Math.min(t.length,e.length);for(let n=0;n<s;n++)if(t[n]!=e[n])return n;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function Yc(t){return!(!t||!t[Symbol.iterator])}function Qc(t){return Array.isArray(t)?t:[t]}pc.window.CKEDITOR_TRANSLATIONS||(pc.window.CKEDITOR_TRANSLATIONS={});class Hc extends(Rc()){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(t={},e={}){super();const s=Yc(t);if(s||(e=t),this._items=[],this._itemMap=new Map,this._idProperty=e.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],s)for(const e of t)this._items.push(e),this._itemMap.set(this._getItemIdBeforeAdding(e),e)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,e){return this.addMany([t],e)}addMany(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new vc("collection-add-item-invalid-index",this);let s=0;for(const n of t){const t=this._getItemIdBeforeAdding(n),i=e+s;this._items.splice(i,0,n),this._itemMap.set(t,n),this.fire("add",n,i),s++}return this.fire("change",{added:t,removed:[],index:e}),this}get(t){let e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new vc("collection-get-invalid-arg",this);e=this._items[t]}return e||null}has(t){if("string"==typeof t)return this._itemMap.has(t);{const e=t[this._idProperty];return e&&this._itemMap.has(e)}}getIndex(t){let e;return e="string"==typeof t?this._itemMap.get(t):t,e?this._items.indexOf(e):-1}remove(t){const[e,s]=this._remove(t);return this.fire("change",{added:[],removed:[e],index:s}),e}map(t,e){return this._items.map(t,e)}forEach(t,e){this._items.forEach(t,e)}find(t,e){return this._items.find(t,e)}filter(t,e){return this._items.filter(t,e)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new vc("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:t=>{this._setUpBindToBinding(e=>new t(e))},using:t=>{"function"==typeof t?this._setUpBindToBinding(t):this._setUpBindToBinding(e=>e[t])}}}_setUpBindToBinding(t){const e=this._bindToCollection,s=(s,n,i)=>{const r=e._bindToCollection==this,o=e._bindToInternalToExternalMap.get(n);if(r&&o)this._bindToExternalToInternalMap.set(n,o),this._bindToInternalToExternalMap.set(o,n);else{const s=t(n);if(!s)return void this._skippedIndexesFromExternal.push(i);let r=i;for(const t of this._skippedIndexesFromExternal)i>t&&r--;for(const t of e._skippedIndexesFromExternal)r>=t&&r++;this._bindToExternalToInternalMap.set(n,s),this._bindToInternalToExternalMap.set(s,n),this.add(s,r);for(let t=0;t<e._skippedIndexesFromExternal.length;t++)r<=e._skippedIndexesFromExternal[t]&&e._skippedIndexesFromExternal[t]++}};for(const t of e)s(0,t,e.getIndex(t));this.listenTo(e,"add",s),this.listenTo(e,"remove",(t,e,s)=>{const n=this._bindToExternalToInternalMap.get(e);n&&this.remove(n),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((t,e)=>(s<e&&t.push(e-1),s>e&&t.push(e),t),[])})}_getItemIdBeforeAdding(t){const e=this._idProperty;let s;if(e in t){if(s=t[e],"string"!=typeof s)throw new vc("collection-add-invalid-id",this);if(this.get(s))throw new vc("collection-add-item-already-exists",this)}else t[e]=s=_c();return s}_remove(t){let e,s,n,i=!1;const r=this._idProperty;if("string"==typeof t?(s=t,n=this._itemMap.get(s),i=!n,n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,n=this._items[e],i=!n,n&&(s=n[r])):(n=t,s=n[r],e=this._items.indexOf(n),i=-1==e||!this._itemMap.get(s)),i)throw new vc("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(s);const o=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(o),this.fire("remove",n,e),[n,e]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}function Xc(t){return Yc(t)?new Map(t):function(t){const e=new Map;for(const s in t)e.set(s,t[s]);return e}(t)}function Zc(t,e,s){const n=t.length,i=e.length;for(let e=n-1;e>=s;e--)t[e+i]=t[e];for(let n=0;n<i;n++)t[s+n]=e[n]}Symbol.iterator,Symbol.iterator;new WeakMap;class td{is(){throw new Error("is() method is abstract")}}class ed extends(Rc(td)){document;parent;constructor(t){super(),this.document=t,this.parent=null}get index(){let t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new vc("view-node-not-found-in-parent",this);return t}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return this.root.is("rootElement")}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.index),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=Kc(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}_remove(){this.parent._removeChildren(this.index)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s),this.parent&&this.parent._fireChange(t,e,s)}toJSON(){const t={path:this.getPath(),type:"Node"};return this!==this.root&&this.root.is("rootElement")&&(t.root=this.root.toJSON()),t}}ed.prototype.is=function(t){return"node"===t||"view:node"===t};class sd extends ed{_textData;constructor(t,e){super(t),this._textData=e}get data(){return this._textData}get _data(){return this.data}set _data(t){this._fireChange("text",this),this._textData=t}isSimilar(t){return t instanceof sd&&(this===t||this.data===t.data)}toJSON(){const t=super.toJSON();return t.type="Text",t.data=this.data,t}_clone(){return new sd(this.document,this.data)}}sd.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};class nd extends td{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.data.length)throw new vc("view-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.data.length)throw new vc("view-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(t={}){const e=[];let s=t.includeSelf?this.textNode:this.parent;for(;null!==s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}}function id(t,e,s){if("string"!=typeof e)for(const n of e)Array.isArray(n)?t.push(n):t.push(s?[s,n]:[n]);else t.push(s?[s,e]:[e])}nd.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};class rd{_patterns=[];constructor(...t){this.add(...t)}add(...t){for(let e of t)("string"==typeof e||e instanceof RegExp)&&(e={name:e}),this._patterns.push(e)}match(...t){for(const e of t)for(const t of this._patterns){const s=this._isElementMatching(e,t);if(s)return{element:e,pattern:t,match:s}}return null}matchAll(...t){const e=[];for(const s of t)for(const t of this._patterns){const n=this._isElementMatching(s,t);n&&e.push({element:s,pattern:t,match:n})}return e.length>0?e:null}getElementName(){if(1!==this._patterns.length)return null;const t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}_isElementMatching(t,e){if("function"==typeof e){const s=e(t);return s&&"object"==typeof s?function(t){const e=[];return"attributes"in t&&t.attributes&&id(e,t.attributes),"classes"in t&&t.classes&&id(e,t.classes,"class"),"styles"in t&&t.styles&&id(e,t.styles,"style"),{name:t.name||!1,attributes:e}}(s):s}const s={};if(e.name&&(s.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!s.name))return null;const n=[];return e.attributes&&!function(t,e,s){let n;return"object"!=typeof t||t instanceof RegExp||Array.isArray(t)?n=["class","style"]:(void 0!==t.style&&Pc("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&Pc("matcher-pattern-deprecated-attributes-class-key",t)),e._collectAttributesMatch(ad(t),s,n)}(e.attributes,t,n)||e.classes&&!function(t,e,s){return e._collectAttributesMatch(ad(t,"class"),s)}(e.classes,t,n)||e.styles&&!function(t,e,s){return e._collectAttributesMatch(ad(t,"style"),s)}(e.styles,t,n)?null:(n.length&&(s.attributes=n),s)}}function od(t,e){return!0===t||t===e||t instanceof RegExp&&!!String(e).match(t)}function ad(t,e){if(Array.isArray(t))return t.map(t=>"object"!=typeof t||t instanceof RegExp?e?[e,t,!0]:[t,!0]:(void 0!==t.key&&void 0!==t.value||Pc("matcher-pattern-missing-key-or-value",t),e?[e,t.key,t.value]:[t.key,t.value]));if("object"!=typeof t||t instanceof RegExp)return[e?[e,t,!0]:[t,!0]];const s=[];for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&s.push(e?[e,n,t[n]]:[n,t[n]]);return s}class hd{_styles;_cachedStyleNames=null;_cachedExpandedStyleNames=null;_styleProcessor;constructor(t){this._styles={},this._styleProcessor=t}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(t){this.clear();const e=function(t){let e=null,s=0,n=0,i=null;const r=new Map;if(""===t)return r;";"!=t.charAt(t.length-1)&&(t+=";");for(let o=0;o<t.length;o++){const a=t.charAt(o);if(null===e)switch(a){case":":i||(i=t.substr(s,o-s),n=o+1);break;case'"':case"'":e=a;break;case";":{const e=t.substr(n,o-n);i&&r.set(i.trim(),e.trim()),i=null,s=o+1;break}}else a===e&&(e=null)}return r}(t);for(const[t,s]of e)this._styleProcessor.toNormalizedForm(t,s,this._styles);return this}has(t){if(this.isEmpty)return!1;const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)}set(t,e){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,U(t))for(const[e,s]of Object.entries(t))this._styleProcessor.toNormalizedForm(e,s,this._styles);else this._styleProcessor.toNormalizedForm(t,e,this._styles)}remove(t){const e={};for(const s of Qc(t)){const t=ld(s),n=ae(this._styles,t);if(n)cd(e,t,n);else{const t=this.getAsString(s);void 0!==t&&this._styleProcessor.toNormalizedForm(s,t,e)}}Object.keys(e).length&&(dd(this._styles,e),this._cachedStyleNames=null,this._cachedExpandedStyleNames=null)}getNormalized(t){return this._styleProcessor.getNormalized(t,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(t=>t.join(":")).sort().join(";")+";"}getAsString(t){if(this.isEmpty)return;if(this._styles[t]&&!U(this._styles[t]))return this._styles[t];const e=this._styleProcessor.getReducedForm(t,this._styles).find(([e])=>e===t);return Array.isArray(e)?e[1]:void 0}getStyleNames(t=!1){return this.isEmpty?[]:t?(this._cachedExpandedStyleNames||=this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames||=this.getStylesEntries().map(([t])=>t),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.getStyleNames())if(!t.has(e)||t.getAsString(e)!==this.getAsString(e))return!1;return!0}getStylesEntries(){const t=[],e=Object.keys(this._styles);for(const s of e)t.push(...this._styleProcessor.getReducedForm(s,this._styles));return t}_clone(){const t=new this.constructor(this._styleProcessor);return t.set(this.getNormalized()),t}_getTokensMatch(t,e){const s=[];for(const n of this.getStyleNames(!0))if(od(t,n)){if(!0===e){s.push(n);continue}od(e,this.getAsString(n))&&s.push(n)}return s.length?s:void 0}_getConsumables(t){const e=[];if(t){e.push(t);for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s)}else for(const t of this.getStyleNames()){for(const s of this._styleProcessor.getRelatedStyles(t))e.push(s);e.push(t)}return e}_canMergeFrom(t){for(const e of t.getStyleNames())if(this.has(e)&&this.getAsString(e)!==t.getAsString(e))return!1;return!0}_mergeFrom(t){for(const e of t.getStyleNames())this.has(e)||this.set(e,t.getAsString(e))}_isMatching(t){for(const e of t.getStyleNames())if(!this.has(e)||this.getAsString(e)!==t.getAsString(e))return!1;return!0}}function ld(t){return t.replace("-",".")}function cd(t,e,s){let n=s;U(s)&&(n=Ut({},ae(t,e),s)),pe(t,e,n)}function dd(t,e){for(const s of Object.keys(e))null===t[s]||Array.isArray(t[s])||"object"!=typeof t[s]||"object"!=typeof e[s]?delete t[s]:(dd(t[s],e[s]),Object.keys(t[s]).length||delete t[s])}class fd{_set=new Set;get isEmpty(){return 0==this._set.size}get size(){return this._set.size}has(t){return this._set.has(t)}keys(){return Array.from(this._set.keys())}setTo(t){this.clear();for(const e of t.split(/\s+/))e&&this._set.add(e);return this}set(t){for(const e of Qc(t))e&&this._set.add(e)}remove(t){for(const e of Qc(t))this._set.delete(e)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(t){if(this.size!==t.size)return!1;for(const e of this.keys())if(!t.has(e))return!1;return!0}_clone(){const t=new this.constructor;return t._set=new Set(this._set),t}_getTokensMatch(t){const e=[];if(!0===t){for(const t of this._set.keys())e.push(t);return e}if("string"==typeof t){for(const s of t.split(/\s+/)){if(!this._set.has(s))return;e.push(s)}return e}for(const s of this._set.keys())s.match(t)&&e.push(s);return e.length?e:void 0}_getConsumables(t){return t?[t]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(t){for(const e of t._set.keys())this._set.has(e)||this._set.add(e)}_isMatching(t){for(const e of t._set.keys())if(!this._set.has(e))return!1;return!0}}class ud extends ed{name;_unsafeAttributesToRender=[];_attrs;_children;_customProperties=new Map;get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}constructor(t,e,s,n){super(t),this.name=e,this._attrs=this._parseAttributes(s),this._children=[],n&&this._insertChild(0,n)}get childCount(){return this._children.length}get isEmpty(){return 0===this._children.length}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const t of this._attrs.keys())"class"!=t&&"style"!=t&&(yield t)}*getAttributes(){for(const[t,e]of this._attrs.entries())yield[t,String(e)]}getAttribute(t){return this._attrs.has(t)?String(this._attrs.get(t)):void 0}hasAttribute(t,e){return!!this._attrs.has(t)&&(void 0===e||(pd(this.name,t)||gd(this.name,t)?this._attrs.get(t).has(e):this._attrs.get(t)===e))}isSimilar(t){if(!(t instanceof ud))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size)return!1;for(const[e,s]of this._attrs){const n=t._attrs.get(e);if(void 0===n)return!1;if("string"==typeof s||"string"==typeof n){if(n!==s)return!1}else if(!s.isSimilar(n))return!1}return!0}hasClass(...t){for(const e of t)if(!this._classes||!this._classes.has(e))return!1;return!0}getClassNames(){const t=this._classes?this._classes.keys():[],e=t[Symbol.iterator]();return Object.assign(t,{next:e.next.bind(e)})}getStyle(t){return this._styles&&this._styles.getAsString(t)}getNormalizedStyle(t){return this._styles&&this._styles.getNormalized(t)}getStyleNames(t){return this._styles?this._styles.getStyleNames(t):[]}hasStyle(...t){for(const e of t)if(!this._styles||!this._styles.has(e))return!1;return!0}findAncestor(...t){const e=new rd(...t);let s=this.parent;for(;s&&!s.is("documentFragment");){if(e.match(s))return s;s=s.parent}return null}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const t=this._classes?this._classes.keys().sort().join(","):"",e=this._styles&&String(this._styles),s=Array.from(this._attrs).filter(([t])=>"style"!=t&&"class"!=t).map(t=>`${t[0]}="${t[1]}"`).sort().join(" ");return this.name+(""==t?"":` class="${t}"`)+(e?` style="${e}"`:"")+(""==s?"":` ${s}`)}shouldRenderUnsafeAttribute(t){return this._unsafeAttributesToRender.includes(t)}toJSON(){const t=super.toJSON();if(t.name=this.name,t.type="Element",this._attrs.size&&(t.attributes=Object.fromEntries(this.getAttributes())),this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=[];if(t)for(const s of this.getChildren())e.push(s._clone(t));const s=new this.constructor(this.document,this.name,this._attrs,e);return s._customProperties=new Map(this._customProperties),s.getFillerOffset=this.getFillerOffset,s._unsafeAttributesToRender=this._unsafeAttributesToRender,s}_appendChild(t){return this._insertChild(this.childCount,t)}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){if("string"==typeof e)return[new sd(t,e)];Yc(e)||(e=[e]);const s=[];for(const n of e)"string"==typeof n?s.push(new sd(t,n)):n instanceof nd?s.push(new sd(t,n.data)):s.push(n);return s}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,e.document=this.document,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_setAttribute(t,e,s=!0){if(this._fireChange("attributes",this),pd(this.name,t)||gd(this.name,t)){let n=this._attrs.get(t);n||(n=pd(this.name,t)?new hd(this.document.stylesProcessor):new fd,this._attrs.set(t,n)),s?n.setTo(String(e)):pd(this.name,t)?Array.isArray(e)?n.set(e[0],e[1]):n.set(e):n.set("string"==typeof e?e.split(/\s+/):e)}else this._attrs.set(t,String(e))}_removeAttribute(t,e){if(this._fireChange("attributes",this),void 0!==e&&(pd(this.name,t)||gd(this.name,t))){const s=this._attrs.get(t);return!!s&&(gd(this.name,t)&&"string"==typeof e&&(e=e.split(/\s+/)),s.remove(e),!!s.isEmpty&&this._attrs.delete(t))}return this._attrs.delete(t)}_addClass(t){this._setAttribute("class",t,!1)}_removeClass(t){this._removeAttribute("class",t)}_setStyle(t,e){"string"!=typeof t?this._setAttribute("style",t,!1):this._setAttribute("style",[t,e],!1)}_removeStyle(t){this._removeAttribute("style",t)}_collectAttributesMatch(t,e,s){for(const[n,i,r]of t){let t=!1,o=!1;for(const[a,h]of this._attrs)if(!(s&&s.includes(a)||!od(n,a)))if(t=!0,"string"==typeof h){if(od(i,h))e.push([a]),o=!0;else if(!(n instanceof RegExp))return!1}else{const t=h._getTokensMatch(i,r||!0);if(t){o=!0;for(const s of t)e.push([a,s])}else if(!(n instanceof RegExp))return!1}if(!t||!o)return!1}return!0}_getConsumables(t,e){const s=[];if(t){const n=this._attrs.get(t);if(void 0!==n)if("string"==typeof n)s.push([t]);else for(const i of n._getConsumables(e))s.push([t,i])}else for(const[t,e]of this._attrs)if("string"==typeof e)s.push([t]);else for(const n of e._getConsumables())s.push([t,n]);return{name:!t,attributes:s}}_canMergeAttributesFrom(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0!==t)if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._canMergeFrom(s))return!1}return!0}_mergeAttributesFrom(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);void 0===t||"string"==typeof t||"string"==typeof s?this._setAttribute(e,s):t._mergeFrom(s)}}_canSubtractAttributesOf(t){if(this.name!=t.name)return!1;for(const[e,s]of t._attrs){const t=this._attrs.get(e);if(void 0===t)return!1;if("string"==typeof t||"string"==typeof s){if(t!==s)return!1}else if(!t._isMatching(s))return!1}return!0}_subtractAttributesOf(t){this._fireChange("attributes",this);for(const[e,s]of t._attrs){const t=this._attrs.get(e);"string"==typeof t||"string"==typeof s?this._attrs.delete(e):(t.remove(s.keys()),t.isEmpty&&this._attrs.delete(e))}}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}_parseAttributes(t){const e=Xc(t);for(const[t,s]of e)if(null===s)e.delete(t);else if(pd(this.name,t)){const n=s instanceof hd?s._clone():new hd(this.document.stylesProcessor).setTo(String(s));e.set(t,n)}else if(gd(this.name,t)){const n=s instanceof fd?s._clone():(new fd).setTo(String(s));e.set(t,n)}else"string"!=typeof s&&e.set(t,String(s));return e}}function gd(t,e){return"class"==e||"a"==t&&"rel"==e}function pd(t,e){return"style"==e}ud.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};class md extends ud{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=bd}toJSON(){const t=super.toJSON();return t.type="ContainerElement",t}}function bd(){const t=[...this.getChildren()],e=t[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(const e of t)if(!e.is("uiElement"))return null;return this.childCount}md.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class _d extends(jc(md)){constructor(t,e,s,n){super(t,e,s,n),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(t),this.bind("isFocused").to(t,"isFocused",e=>e&&t.selection.editableElement==this),this.listenTo(t.selection,"change",()=>{this.isFocused=t.isFocused&&t.selection.editableElement==this})}destroy(){this.stopListening()}toJSON(){const t=super.toJSON();return t.type="EditableElement",t.isReadOnly=this.isReadOnly,t.isFocused=this.isFocused,t}}_d.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};const yd=Symbol("rootName");(class extends _d{constructor(t,e){super(t,e),this.rootName="main"}get rootName(){return this.getCustomProperty(yd)}set rootName(t){this._setCustomProperty(yd,t)}toJSON(){return this.rootName}set _name(t){this.name=t}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class wd{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(t={}){if(!t.boundaries&&!t.startPosition)throw new vc("view-tree-walker-no-start-position",null);if(t.direction&&"forward"!=t.direction&&"backward"!=t.direction)throw new vc("view-tree-walker-unknown-direction",t.startPosition,{direction:t.direction});this.boundaries=t.boundaries||null,t.startPosition?this._position=vd._createAt(t.startPosition):this._position=vd._createAt(t.boundaries["backward"==t.direction?"end":"start"]),this.direction=t.direction||"forward",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s;do{s=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=s)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone()}next(){return"forward"==this.direction?this._next():this._previous()}_next(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&t.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let n;if(s&&s.is("view:$text")){if(t.isAtEnd)return this._position=vd._createAfter(s),this._next();n=s.data[t.offset]}else n=s.getChild(t.offset);if("string"==typeof n){let n;n=this.singleCharacters?1:(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-t.offset;const i=new nd(s,t.offset,n);return t.offset+=n,this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}else t=new vd(n,0);return this._position=t,this._formatReturnValue("elementStart",n,e,t,1)}if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new vd(n,0),this._position=t,this._next();let s,i=n.data.length;return n==this._boundaryEndParent?(i=this.boundaries.end.offset,s=new nd(n,0,i),t=vd._createAfter(s)):(s=new nd(n,0,n.data.length),t.offset++),this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=vd._createAfter(s),this._position=t,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,e,t)}_previous(){let t=this.position.clone();const e=this.position,s=t.parent;if(null===s.parent&&0===t.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let n;if(s.is("view:$text")){if(t.isAtStart)return this._position=vd._createBefore(s),this._previous();n=s.data[t.offset-1]}else n=s.getChild(t.offset-1);if("string"==typeof n){let n;if(this.singleCharacters)n=1;else{const e=s===this._boundaryStartParent?this.boundaries.start.offset:0;n=t.offset-e}t.offset-=n;const i=new nd(s,t.offset,n);return this._position=t,this._formatReturnValue("text",i,e,t,n)}if(n&&n.is("view:element"))return this.shallow?(t.offset--,this._position=t,this._formatReturnValue("elementStart",n,e,t,1)):(t=new vd(n,n.childCount),this._position=t,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",n,e,t));if(n&&n.is("view:$text")){if(this.singleCharacters)return t=new vd(n,n.data.length),this._position=t,this._previous();let s,i=n.data.length;if(n==this._boundaryStartParent){const e=this.boundaries.start.offset;s=new nd(n,e,n.data.length-e),i=s.data.length,t=vd._createBefore(s)}else s=new nd(n,0,n.data.length),t.offset--;return this._position=t,this._formatReturnValue("text",s,e,t,i)}return t=vd._createBefore(s),this._position=t,this._formatReturnValue("elementStart",s,e,t,1)}_formatReturnValue(t,e,s,n,i){return e.is("view:$textProxy")&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?s=vd._createAfter(e.textNode):(n=vd._createAfter(e.textNode),this._position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?s=vd._createBefore(e.textNode):(n=vd._createBefore(e.textNode),this._position=n))),{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}}class vd extends td{parent;offset;constructor(t,e){super(),this.parent=t,this.offset=e}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return 0===this.offset}get isAtEnd(){const t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}get root(){return this.parent.root}get editableElement(){let t=this.parent;for(;!(t instanceof _d);){if(!t.parent)return null;t=t.parent}return t}getShiftedBy(t){const e=vd._createAt(this),s=e.offset+t;return e.offset=s<0?0:s,e}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new wd(e);return s.skip(t),s.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}isEqual(t){return this.parent==t.parent&&this.offset==t.offset}isBefore(t){return"before"==this.compareWith(t)}isAfter(t){return"after"==this.compareWith(t)}compareWith(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";const e=this.parent.is("node")?this.parent.getPath():[],s=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),s.push(t.offset);const n=Kc(e,s);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<s[n]?"before":"after"}}getWalker(t={}){return t.startPosition=this,new wd(t)}clone(){return new vd(this.parent,this.offset)}toJSON(){return{parent:this.parent.toJSON(),offset:this.offset}}static _createAt(t,e){if(t instanceof vd)return new this(t.parent,t.offset);{const s=t;if("end"==e)e=s.is("$text")?s.data.length:s.childCount;else{if("before"==e)return this._createBefore(s);if("after"==e)return this._createAfter(s);if(0!==e&&!e)throw new vc("view-createpositionat-offset-required",s)}return new vd(s,e)}}static _createAfter(t){if(t.is("$textProxy"))return new vd(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new vc("view-position-after-root",t,{root:t});return new vd(t.parent,t.index+1)}static _createBefore(t){if(t.is("$textProxy"))return new vd(t.textNode,t.offsetInText);if(!t.parent)throw new vc("view-position-before-root",t,{root:t});return new vd(t.parent,t.index)}}vd.prototype.is=function(t){return"position"===t||"view:position"===t};class Pd extends td{start;end;constructor(t,e=null){super(),this.start=t.clone(),this.end=e?e.clone():t.clone()}*[Symbol.iterator](){yield*new wd({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let t=this.start.getLastMatchingPosition(xd,{direction:"backward"}),e=this.end.getLastMatchingPosition(xd);return t.parent.is("$text")&&t.isAtStart&&(t=vd._createBefore(t.parent)),e.parent.is("$text")&&e.isAtEnd&&(e=vd._createAfter(e.parent)),new Pd(t,e)}getTrimmed(){let t=this.start.getLastMatchingPosition(xd);if(t.isAfter(this.end)||t.isEqual(this.end))return new Pd(t,t);let e=this.end.getLastMatchingPosition(xd,{direction:"backward"});const s=t.nodeAfter,n=e.nodeBefore;return s&&s.is("$text")&&(t=new vd(s,0)),n&&n.is("$text")&&(e=new vd(n,n.data.length)),new Pd(t,e)}isEqual(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Pd(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Pd(t.end,this.end))):e.push(this.clone()),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Pd(e,s)}return null}getWalker(t={}){return t.boundaries=this,new wd(t)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}clone(){return new Pd(this.start,this.end)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new wd(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new wd(t);yield e.position;for(const t of e)yield t.nextPosition}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}static _createFromParentsAndOffsets(t,e,s,n){return new this(new vd(t,e),new vd(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}static _createOn(t){const e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(vd._createBefore(t),e)}}function xd(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}Pd.prototype.is=function(t){return"range"===t||"view:range"===t};class Sd extends(Rc(td)){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...t){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",t.length&&this.setTo(...t)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}get focus(){if(!this._ranges.length)return null;const t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}get isCollapsed(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const t of this._ranges)yield t.clone()}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?t.clone():null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?t.clone():null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}isEqual(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}isSimilar(t){if(this.isBackward!=t.isBackward)return!1;const e=Gc(this.getRanges());if(e!=Gc(t.getRanges()))return!1;if(0==e)return!0;for(let e of this.getRanges()){e=e.getTrimmed();let s=!1;for(let n of t.getRanges())if(n=n.getTrimmed(),e.start.isEqual(n.start)&&e.end.isEqual(n.end)){s=!0;break}if(!s)return!1}return!0}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]),this._setFakeOptions(n);else if(e instanceof Sd||e instanceof Ad)this._setRanges(e.getRanges(),e.isBackward),this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});else if(e instanceof Pd)this._setRanges([e],n&&n.backward),this._setFakeOptions(n);else if(e instanceof vd)this._setRanges([new Pd(e)]),this._setFakeOptions(n);else if(e instanceof ed){const t=!!n&&!!n.backward;let i;if(void 0===s)throw new vc("view-selection-setto-required-second-parameter",this);i="in"==s?Pd._createIn(e):"on"==s?Pd._createOn(e):new Pd(vd._createAt(e,s)),this._setRanges([i],t),this._setFakeOptions(n)}else{if(!Yc(e))throw new vc("view-selection-setto-not-selectable",this);this._setRanges(e,n&&n.backward),this._setFakeOptions(n)}this.fire("change")}setFocus(t,e){if(null===this.anchor)throw new vc("view-selection-setfocus-no-ranges",this);const s=vd._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.pop(),"before"==s.compareWith(n)?this._addRange(new Pd(s,n),!0):this._addRange(new Pd(n,s)),this.fire("change")}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())};return this.isBackward&&(t.isBackward=!0),this.isFake&&(t.isFake=!0),t}_setRanges(t,e=!1){t=Array.from(t),this._ranges=[];for(const e of t)this._addRange(e);this._lastRangeBackward=!!e}_setFakeOptions(t={}){this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}_addRange(t,e=!1){if(!(t instanceof Pd))throw new vc("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}_pushRange(t){for(const e of this._ranges)if(t.isIntersecting(e))throw new vc("view-selection-range-intersects",this,{addedRange:t,intersectingRange:e});this._ranges.push(new Pd(t.start,t.end))}}Sd.prototype.is=function(t){return"selection"===t||"view:selection"===t};class Ad extends(Rc(td)){_selection;constructor(...t){super(),this._selection=new Sd,this._selection.delegate("change").to(this),t.length&&this._selection.setTo(...t)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(t){return this._selection.isEqual(t)}isSimilar(t){return this._selection.isSimilar(t)}toJSON(){return this._selection.toJSON()}_setTo(...t){this._selection.setTo(...t)}_setFocus(t,e){this._selection.setFocus(t,e)}}Ad.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t},Symbol("bubblingEmitter"),Symbol("bubblingCallbacks"),Symbol("bubblingContexts");function Od(){if(kd(this))return null;let t=this.parent;for(;t&&t.is("attributeElement");){if(kd(t)>1)return null;t=t.parent}return!t||kd(t)>1?null:this.childCount}function kd(t){return Array.from(t.getChildren()).filter(t=>!t.is("uiElement")).length}(class extends ud{static DEFAULT_PRIORITY=10;_priority=10;_id=null;_clonesGroup=null;constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Od}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(null===this.id)throw new vc("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return null!==this.id||null!==t.id?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}toJSON(){const t=super.toJSON();return t.type="AttributeElement",t}_clone(t=!1){const e=super._clone(t);return e._priority=this._priority,e._id=this._id,e}_canMergeAttributesFrom(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canMergeAttributesFrom(t)}_canSubtractAttributesOf(t){return null===this.id&&null===t.id&&this.priority===t.priority&&super._canSubtractAttributesOf(t)}}).prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Rd(){return null}(class extends ud{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Rd}toJSON(){const t=super.toJSON();return t.type="EmptyElement",t}_insertChild(t,e){if(e&&(e instanceof ed||Array.from(e).length>0))throw new vc("view-emptyelement-cannot-add",[this,e]);return 0}}).prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Nd(){return null}(class extends ud{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Nd}_insertChild(t,e){if(e&&(e instanceof ed||Array.from(e).length>0))throw new vc("view-uielement-cannot-add",[this,e]);return 0}render(t,e){return this.toDomElement(t)}toDomElement(t){const e=t.createElement(this.name);for(const t of this.getAttributeKeys())e.setAttribute(t,this.getAttribute(t));return e}toJSON(){const t=super.toJSON();return t.type="UIElement",t}}).prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};function Ed(){return null}(class extends ud{constructor(t,e,s,n){super(t,e,s,n),this.getFillerOffset=Ed}toJSON(){const t=super.toJSON();return t.type="RawElement",t}_insertChild(t,e){if(e&&(e instanceof ed||Array.from(e).length>0))throw new vc("view-rawelement-cannot-add",[this,e]);return 0}render(t,e){}}).prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};class Md extends(Rc(td)){document;_children=[];_customProperties=new Map;constructor(t,e){super(),this.document=t,e&&this._insertChild(0,e)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return 0===this.childCount}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(t){return this._customProperties.get(t)}*getCustomProperties(){yield*this._customProperties.entries()}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}_appendChild(t){return this._insertChild(this.childCount,t)}getChild(t){return this._children[t]}getChildIndex(t){return this._children.indexOf(t)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(t,e){this._fireChange("children",this,{index:t});let s=0;const n=function(t,e){return"string"==typeof e?[new sd(t,e)]:(Yc(e)||(e=[e]),Array.from(e).map(e=>"string"==typeof e?new sd(t,e):e instanceof nd?new sd(t,e.data):e))}(this.document,e);for(const e of n)null!==e.parent&&e._remove(),e.parent=this,this._children.splice(t,0,e),t++,s++;return s}_removeChildren(t,e=1){this._fireChange("children",this,{index:t});for(let s=t;s<t+e;s++)this._children[s].parent=null;return this._children.splice(t,e)}_fireChange(t,e,s){this.fire(`change:${t}`,e,s)}_setCustomProperty(t,e){this._customProperties.set(t,e)}_removeCustomProperty(t){return this._customProperties.delete(t)}}Md.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};"".repeat(7),(t=>{const e=t.createElement("br");e.dataset.ckeFiller="true"})(pc.document),(t=>{t.createTextNode("")})(pc.document),(t=>{const e=t.createElement("span");e.dataset.ckeFiller="true",e.innerText=""})(pc.document);class Td{is(){throw new Error("is() method is abstract")}}class Bd extends Td{textNode;data;offsetInText;constructor(t,e,s){if(super(),this.textNode=t,e<0||e>t.offsetSize)throw new vc("model-textproxy-wrong-offsetintext",this);if(s<0||e+s>t.offsetSize)throw new vc("model-textproxy-wrong-length",this);this.data=t.data.substring(e,e+s),this.offsetInText=e}get startOffset(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}hasAttribute(t){return this.textNode.hasAttribute(t)}getAttribute(t){return this.textNode.getAttribute(t)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}Bd.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};class Cd{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(t){if(!t||!t.boundaries&&!t.startPosition)throw new vc("model-tree-walker-no-start-position",null);const e=t.direction||"forward";if("forward"!=e&&"backward"!=e)throw new vc("model-tree-walker-unknown-direction",t,{direction:e});this.direction=e,this.boundaries=t.boundaries||null,t.startPosition?this._position=t.startPosition.clone():this._position=Fd._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!t.singleCharacters,this.shallow=!!t.shallow,this.ignoreElementEnd=!!t.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(t){let e,s,n,i;do{n=this.position,i=this._visitedParent,({done:e,value:s}=this.next())}while(!e&&t(s));e||(this._position=n,this._visitedParent=i)}jumpTo(t){this._boundaryStartParent&&t.isBefore(this.boundaries.start)?t=this.boundaries.start:this._boundaryEndParent&&t.isAfter(this.boundaries.end)&&(t=this.boundaries.end),this._position=t.clone(),this._visitedParent=t.parent}next(){return"forward"==this.direction?this._next():this._previous()}_next(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&e.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const n=Jd(e,s),i=n||Vd(e,s,n);if(i&&i.is("model:element")){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=i;return this._position=e,Id("elementStart",i,t,e,1)}if(i&&i.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=i.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<t&&(t=this.boundaries.end.offset),n=t-e.offset}const r=e.offset-i.startOffset,o=new Bd(i,r,n);return e.offset+=n,this._position=e,Id("text",o,t,e,n)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():Id("elementEnd",s,t,e)}_previous(){const t=this.position,e=this.position.clone(),s=this._visitedParent;if(null===s.parent&&0===e.offset)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const n=e.parent,i=Jd(e,n),r=i||qd(e,n,i);if(r&&r.is("model:element"))return e.offset--,this.shallow?(this._position=e,Id("elementStart",r,t,e,1)):(e.path.push(r.maxOffset),this._position=e,this._visitedParent=r,this.ignoreElementEnd?this._previous():Id("elementEnd",r,t,e));if(r&&r.is("model:$text")){let n;if(this.singleCharacters)n=1;else{let t=r.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>t&&(t=this.boundaries.start.offset),n=e.offset-t}const i=e.offset-r.startOffset,o=new Bd(r,i-n,n);return e.offset-=n,this._position=e,Id("text",o,t,e,n)}return e.path.pop(),this._position=e,this._visitedParent=s.parent,Id("elementStart",s,t,e,1)}}function Id(t,e,s,n,i){return{done:!1,value:{type:t,item:e,previousPosition:s,nextPosition:n,length:i}}}class Fd extends Td{root;path;stickiness;constructor(t,e,s="toNone"){if(super(),!t.is("element")&&!t.is("documentFragment"))throw new vc("model-position-root-invalid",t);if(!Array.isArray(e)||0===e.length)throw new vc("model-position-path-incorrect-format",t,{path:e});t.is("rootElement")?e=e.slice():(e=[...t.getPath(),...e],t=t.root),this.root=t,this.path=e,this.stickiness=s}get offset(){return this.path[this.path.length-1]}set offset(t){this.path[this.path.length-1]=t}get parent(){let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)throw new vc("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new vc("model-position-path-incorrect",this,{position:this});return t}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Jd(this,this.parent)}get nodeAfter(){const t=this.parent;return Vd(this,t,Jd(this,t))}get nodeBefore(){const t=this.parent;return qd(this,t,Jd(this,t))}get isAtStart(){return 0===this.offset}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let t=this.root;for(let e=0;e<this.path.length-1;e++)if(t=t.getChildAtOffset(this.path[e]),!t)return!1;return this.offset<=t.maxOffset}compareWith(t){if(this.root!=t.root)return"different";const e=Kc(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}getLastMatchingPosition(t,e={}){e.startPosition=this;const s=new Cd(e);return s.skip(t),s.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}findAncestor(t){const e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}getCommonPath(t){if(this.root!=t.root)return[];const e=Kc(this.path,t.path),s="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,s)}getCommonAncestor(t){const e=this.getAncestors(),s=t.getAncestors();let n=0;for(;e[n]==s[n]&&e[n];)n++;return 0===n?null:e[n-1]}getShiftedBy(t){const e=this.clone(),s=e.offset+t;return e.offset=s<0?0:s,e}isAfter(t){return"after"==this.compareWith(t)}isBefore(t){return"before"==this.compareWith(t)}isEqual(t){return"same"==this.compareWith(t)}isTouching(t){if(this.root!==t.root)return!1;const e=Math.min(this.path.length,t.path.length);for(let s=0;s<e;s++){const e=this.path[s]-t.path[s];if(e<-1||e>1)return!1;if(1===e)return Dd(t,this,s);if(-1===e)return Dd(this,t,s)}return this.path.length===t.path.length||(this.path.length>t.path.length?jd(this.path,e):jd(t.path,e))}hasSameParentAs(t){return this.root===t.root&&"same"==Kc(this.getParentPath(),t.getParentPath())}getTransformedByOperation(t){let e;switch(t.type){case"insert":e=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":e=this._getTransformedByMoveOperation(t);break;case"split":e=this._getTransformedBySplitOperation(t);break;case"merge":e=this._getTransformedByMergeOperation(t);break;default:e=Fd._createAt(this)}return e}_getTransformedByInsertOperation(t){return this._getTransformedByInsertion(t.position,t.howMany)}_getTransformedByMoveOperation(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}_getTransformedBySplitOperation(t){const e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}_getTransformedByMergeOperation(t){const e=t.movedRange;let s;return e.containsPosition(this)||e.start.isEqual(this)?(s=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(s=s._getTransformedByDeletion(t.deletionPosition,1))):s=this.isEqual(t.deletionPosition)?Fd._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),s}_getTransformedByDeletion(t,e){const s=Fd._createAt(this);if(this.root!=t.root)return s;if("same"==Kc(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+e>this.offset)return null;s.offset-=e}}else if("prefix"==Kc(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;if(t.offset<=this.path[n]){if(t.offset+e>this.path[n])return null;s.path[n]-=e}}return s}_getTransformedByInsertion(t,e){const s=Fd._createAt(this);if(this.root!=t.root)return s;if("same"==Kc(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(s.offset+=e);else if("prefix"==Kc(t.getParentPath(),this.getParentPath())){const n=t.path.length-1;t.offset<=this.path[n]&&(s.path[n]+=e)}return s}_getTransformedByMove(t,e,s){if(e=e._getTransformedByDeletion(t,s),t.isEqual(e))return Fd._createAt(this);const n=this._getTransformedByDeletion(t,s);return null===n||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(s).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,e):n._getTransformedByInsertion(e,s)}_getCombined(t,e){const s=t.path.length-1,n=Fd._createAt(e);return n.stickiness=this.stickiness,n.offset=n.offset+this.path[s]-t.offset,n.path=[...n.path,...this.path.slice(s+1)],n}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(t,e,s="toNone"){if(t.is("model:position"))return new Fd(t.root,t.path,t.stickiness);{const n=t;if("end"==e)e=n.maxOffset;else{if("before"==e)return this._createBefore(n,s);if("after"==e)return this._createAfter(n,s);if(0!==e&&!e)throw new vc("model-createpositionat-offset-required",[this,t])}if(!n.is("element")&&!n.is("documentFragment"))throw new vc("model-position-parent-incorrect",[this,t]);const i=n.getPath();return i.push(e),new this(n.root,i,s)}}static _createAfter(t,e){if(!t.parent)throw new vc("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}static _createBefore(t,e){if(!t.parent)throw new vc("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}static fromJSON(t,e){if("$graveyard"===t.root){const s=new Fd(e.graveyard,t.path);return s.stickiness=t.stickiness,s}if(!e.getRoot(t.root))throw new vc("model-position-fromjson-no-root",e,{rootName:t.root});return new Fd(e.getRoot(t.root),t.path,t.stickiness)}}function Jd(t,e){const s=e.getChildAtOffset(t.offset);return s&&s.is("$text")&&s.startOffset<t.offset?s:null}function Vd(t,e,s){return null!==s?null:e.getChildAtOffset(t.offset)}function qd(t,e,s){return null!==s?null:e.getChild(e.offsetToIndex(t.offset)-1)}function Dd(t,e,s){return s+1!==t.path.length&&!!jd(e.path,s+1)&&!!function(t,e){let s=t.parent,n=t.path.length-1,i=0;for(;n>=e;){if(t.path[n]+i!==s.maxOffset)return!1;i=1,n--,s=s.parent}return!0}(t,s+1)}function jd(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}Fd.prototype.is=function(t){return"position"===t||"model:position"===t};class Ld extends Td{start;end;constructor(t,e){super(),this.start=Fd._createAt(t),this.end=e?Fd._createAt(e):Fd._createAt(t),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new Cd({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return"same"==Kc(this.start.getParentPath(),this.end.getParentPath())}get root(){return this.start.root}containsPosition(t){return t.isAfter(this.start)&&t.isBefore(this.end)}containsRange(t,e=!1){t.isCollapsed&&(e=!1);const s=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return s&&n}containsItem(t){const e=Fd._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}isEqual(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}isIntersecting(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}getDifference(t){const e=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&e.push(new Ld(this.start,t.start)),this.containsPosition(t.end)&&e.push(new Ld(t.end,this.end))):e.push(new Ld(this.start,this.end)),e}getIntersection(t){if(this.isIntersecting(t)){let e=this.start,s=this.end;return this.containsPosition(t.start)&&(e=t.start),this.containsPosition(t.end)&&(s=t.end),new Ld(e,s)}return null}getJoined(t,e=!1){let s=this.isIntersecting(t);if(s||(s=this.start.isBefore(t.start)?e?this.end.isTouching(t.start):this.end.isEqual(t.start):e?t.end.isTouching(this.start):t.end.isEqual(this.start)),!s)return null;let n=this.start,i=this.end;return t.start.isBefore(n)&&(n=t.start),t.end.isAfter(i)&&(i=t.end),new Ld(n,i)}getMinimalFlatRanges(){const t=[],e=this.start.getCommonPath(this.end).length,s=Fd._createAt(this.start);let n=s.parent;for(;s.path.length>e+1;){const e=n.maxOffset-s.offset;0!==e&&t.push(new Ld(s,s.getShiftedBy(e))),s.path=s.path.slice(0,-1),s.offset++,n=n.parent}for(;s.path.length<=this.end.path.length;){const e=this.end.path[s.path.length-1],n=e-s.offset;0!==n&&t.push(new Ld(s,s.getShiftedBy(n))),s.offset=e,s.path.push(0)}return t}getWalker(t={}){return t.boundaries=this,new Cd(t)}*getItems(t={}){t.boundaries=this,t.ignoreElementEnd=!0;const e=new Cd(t);for(const t of e)yield t.item}*getPositions(t={}){t.boundaries=this;const e=new Cd(t);yield e.position;for(const t of e)yield t.nextPosition}getTransformedByOperation(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new Ld(this.start,this.end)]}getTransformedByOperations(t){const e=[new Ld(this.start,this.end)];for(const s of t)for(let t=0;t<e.length;t++){const n=e[t].getTransformedByOperation(s);e.splice(t,1,...n),t+=n.length-1}for(let t=0;t<e.length;t++){const s=e[t];for(let n=t+1;n<e.length;n++){const t=e[n];(s.containsRange(t)||t.containsRange(s)||s.isEqual(t))&&e.splice(n,1)}}return e}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(t,e=!1){return this._getTransformedByInsertion(t.position,t.howMany,e)}_getTransformedByMoveOperation(t,e=!1){const s=t.sourcePosition,n=t.howMany,i=t.targetPosition;return this._getTransformedByMove(s,i,n,e)}_getTransformedBySplitOperation(t){const e=this.start._getTransformedBySplitOperation(t);let s=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(s=this.end.getShiftedBy(1)),e.root!=s.root&&(s=this.end.getShiftedBy(-1)),new Ld(e,s)}_getTransformedByMergeOperation(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new Ld(this.start);let e=this.start._getTransformedByMergeOperation(t),s=this.end._getTransformedByMergeOperation(t);return e.root!=s.root&&(s=this.end.getShiftedBy(-1)),e.isAfter(s)?(t.sourcePosition.isBefore(t.targetPosition)?(e=Fd._createAt(s),e.offset=0):(t.deletionPosition.isEqual(e)||(s=t.deletionPosition),e=t.targetPosition),new Ld(e,s)):new Ld(e,s)}_getTransformedByInsertion(t,e,s=!1){if(s&&this.containsPosition(t))return[new Ld(this.start,t),new Ld(t.getShiftedBy(e),this.end._getTransformedByInsertion(t,e))];{const s=new Ld(this.start,this.end);return s.start=s.start._getTransformedByInsertion(t,e),s.end=s.end._getTransformedByInsertion(t,e),[s]}}_getTransformedByMove(t,e,s,n=!1){if(this.isCollapsed){const n=this.start._getTransformedByMove(t,e,s);return[new Ld(n)]}const i=Ld._createFromPositionAndShift(t,s),r=e._getTransformedByDeletion(t,s);if(this.containsPosition(e)&&!n&&(i.containsPosition(this.start)||i.containsPosition(this.end))){const n=this.start._getTransformedByMove(t,e,s),i=this.end._getTransformedByMove(t,e,s);return[new Ld(n,i)]}let o;const a=this.getDifference(i);let h=null;const l=this.getIntersection(i);if(1==a.length?h=new Ld(a[0].start._getTransformedByDeletion(t,s),a[0].end._getTransformedByDeletion(t,s)):2==a.length&&(h=new Ld(this.start,this.end._getTransformedByDeletion(t,s))),o=h?h._getTransformedByInsertion(r,s,null!==l||n):[],l){const t=new Ld(l.start._getCombined(i.start,r),l.end._getCombined(i.start,r));2==o.length?o.splice(1,0,t):o.push(t)}return o}_getTransformedByDeletion(t,e){let s=this.start._getTransformedByDeletion(t,e),n=this.end._getTransformedByDeletion(t,e);return null==s&&null==n?null:(null==s&&(s=t),null==n&&(n=t),new Ld(s,n))}static _createFromPositionAndShift(t,e){const s=t,n=t.getShiftedBy(e);return e>0?new this(s,n):new this(n,s)}static _createIn(t){return new this(Fd._createAt(t,0),Fd._createAt(t,t.maxOffset))}static _createOn(t){return this._createFromPositionAndShift(Fd._createBefore(t),t.offsetSize)}static _createFromRanges(t){if(0===t.length)throw new vc("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();const e=t[0];t.sort((t,e)=>t.start.isAfter(e.start)?1:-1);const s=t.indexOf(e),n=new this(e.start,e.end);for(let e=s-1;e>=0&&t[e].end.isEqual(n.start);e--)n.start=Fd._createAt(t[e].start);for(let e=s+1;e<t.length&&t[e].start.isEqual(n.end);e++)n.end=Fd._createAt(t[e].end);return n}static fromJSON(t,e){return new this(Fd.fromJSON(t.start,e),Fd.fromJSON(t.end,e))}}Ld.prototype.is=function(t){return"range"===t||"model:range"===t};class $d extends Td{parent=null;_attrs;_index=null;_startOffset=null;constructor(t){super(),this._attrs=Xc(t)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return null===this.startOffset?null:this.startOffset+this.offsetSize}get nextSibling(){const t=this.index;return null!==t&&this.parent.getChild(t+1)||null}get previousSibling(){const t=this.index;return null!==t&&this.parent.getChild(t-1)||null}get root(){let t=this;for(;t.parent;)t=t.parent;return t}isAttached(){return null!==this.parent&&this.root.isAttached()}getPath(){const t=[];let e=this;for(;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}getAncestors(t={}){const e=[];let s=t.includeSelf?this:this.parent;for(;s;)e[t.parentFirst?"push":"unshift"](s),s=s.parent;return e}getCommonAncestor(t,e={}){const s=this.getAncestors(e),n=t.getAncestors(e);let i=0;for(;s[i]==n[i]&&s[i];)i++;return 0===i?null:s[i-1]}isBefore(t){if(this==t)return!1;if(this.root!==t.root)return!1;const e=this.getPath(),s=t.getPath(),n=Kc(e,s);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<s[n]}}isAfter(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}hasAttribute(t){return this._attrs.has(t)}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((t,e)=>(t[e[0]]=e[1],t),{})),t}_clone(t){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(t,e){this._attrs.set(t,e)}_setAttributesTo(t){this._attrs=Xc(t)}_removeAttribute(t){return this._attrs.delete(t)}_clearAttributes(){this._attrs.clear()}}$d.prototype.is=function(t){return"node"===t||"model:node"===t};class zd extends(Rc(Td)){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...t){super(),t.length&&this.setTo(...t)}get anchor(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}get focus(){if(this._ranges.length>0){const t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}get isCollapsed(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;for(const e of this._ranges){let s=!1;for(const n of t._ranges)if(e.isEqual(n)){s=!0;break}if(!s)return!1}return!0}*getRanges(){for(const t of this._ranges)yield new Ld(t.start,t.end)}getFirstRange(){let t=null;for(const e of this._ranges)t&&!e.start.isBefore(t.start)||(t=e);return t?new Ld(t.start,t.end):null}getLastRange(){let t=null;for(const e of this._ranges)t&&!e.end.isAfter(t.end)||(t=e);return t?new Ld(t.start,t.end):null}getFirstPosition(){const t=this.getFirstRange();return t?t.start.clone():null}getLastPosition(){const t=this.getLastRange();return t?t.end.clone():null}setTo(...t){let[e,s,n]=t;if("object"==typeof s&&(n=s,s=void 0),null===e)this._setRanges([]);else if(e instanceof zd)this._setRanges(e.getRanges(),e.isBackward);else if(e&&"function"==typeof e.getRanges)this._setRanges(e.getRanges(),e.isBackward);else if(e instanceof Ld)this._setRanges([e],!!n&&!!n.backward);else if(e instanceof Fd)this._setRanges([new Ld(e)]);else if(e instanceof $d){const t=!!n&&!!n.backward;let i;if("in"==s)i=Ld._createIn(e);else if("on"==s)i=Ld._createOn(e);else{if(void 0===s)throw new vc("model-selection-setto-required-second-parameter",[this,e]);i=new Ld(Fd._createAt(e,s))}this._setRanges([i],t)}else{if(!Yc(e))throw new vc("model-selection-setto-not-selectable",[this,e]);this._setRanges(e,n&&!!n.backward)}}_setRanges(t,e=!1){const s=Array.from(t),n=s.some(e=>{if(!(e instanceof Ld))throw new vc("model-selection-set-ranges-not-range",[this,t]);return this._ranges.every(t=>!t.isEqual(e))});(s.length!==this._ranges.length||n)&&(this._replaceAllRanges(s),this._lastRangeBackward=!!e,this.fire("change:range",{directChange:!0}))}setFocus(t,e){if(null===this.anchor)throw new vc("model-selection-setfocus-no-ranges",[this,t]);const s=Fd._createAt(t,e);if("same"==s.compareWith(this.focus))return;const n=this.anchor;this._ranges.length&&this._popRange(),"before"==s.compareWith(n)?(this._pushRange(new Ld(s,n)),this._lastRangeBackward=!0):(this._pushRange(new Ld(n,s)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(t){return this._attrs.get(t)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(t){return this._attrs.has(t)}removeAttribute(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}setAttribute(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}getSelectedElement(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const t=new WeakSet;for(const e of this.getRanges()){const s=Gd(e.start,t);Yd(s,e)&&(yield s);const n=e.getWalker();for(const s of n){const i=s.item;"elementEnd"==s.type&&Ud(i,t,e)?yield i:"elementStart"==s.type&&i.is("model:element")&&i.root.document.model.schema.isBlock(i)&&n.jumpTo(Fd._createAt(i,"end"))}const i=Gd(e.end,t);Qd(i,e)&&(yield i)}}containsEntireContent(t=this.anchor.root){const e=Fd._createAt(t,0),s=Fd._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&s.isTouching(this.getLastPosition())}toJSON(){const t={ranges:Array.from(this.getRanges()).map(t=>t.toJSON())},e=Object.fromEntries(this.getAttributes());return Object.keys(e).length&&(t.attributes=e),this.isBackward&&(t.isBackward=!0),t}_pushRange(t){this._checkRange(t),this._ranges.push(new Ld(t.start,t.end))}_checkRange(t){for(let e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new vc("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}_replaceAllRanges(t){this._removeAllRanges();for(const e of t)this._pushRange(e)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}function Wd(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function Ud(t,e,s){return Wd(t,e)&&Kd(t,s)}function Gd(t,e){const s=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0});let i=!1;const r=n.find(t=>!i&&(i=s.isLimit(t),!i&&Wd(t,e)));return n.forEach(t=>e.add(t)),r}function Kd(t,e){const s=function(t){const e=t.root.document.model.schema;let s=t.parent;for(;s;){if(e.isBlock(s))return s;s=s.parent}}(t);return!s||!e.containsRange(Ld._createOn(s),!0)}function Yd(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(Fd._createAt(t,t.maxOffset))&&Kd(t,e))}function Qd(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(Fd._createAt(t,0))&&Kd(t,e))}zd.prototype.is=function(t){return"selection"===t||"model:selection"===t};class Hd extends(Rc(Ld)){constructor(t,e){super(t,e),Xd.call(this)}detach(){this.stopListening()}toRange(){return new Ld(this.start,this.end)}static fromRange(t){return new Hd(t.start,t.end)}}function Xd(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Zd.call(this,s)},{priority:"low"})}function Zd(t){const e=this.getTransformedByOperation(t),s=Ld._createFromRanges(e),n=!s.isEqual(this),i=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t);let r=null;if(n){"$graveyard"==s.root.rootName&&(r="remove"==t.type?t.sourcePosition:t.deletionPosition);const e=this.toRange();this.start=s.start,this.end=s.end,this.fire("change:range",e,{deletionPosition:r})}else i&&this.fire("change:content",this.toRange(),{deletionPosition:r})}Hd.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};class tf extends $d{_data;constructor(t,e){super(e),this._data=t||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const t=super.toJSON();return t.data=this.data,t}_clone(){return new tf(this.data,this.getAttributes())}static fromJSON(t){return new tf(t.data,t.attributes)}}tf.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};const ef="selection:";(class extends(Rc(Td)){_selection;constructor(t){super(),this._selection=new sf(t),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(t){return this._selection.containsEntireContent(t)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(t){return this._selection.getAttribute(t)}hasAttribute(t){return this._selection.hasAttribute(t)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(t){this._selection.observeMarkers(t)}toJSON(){return this._selection.toJSON()}_setFocus(t,e){this._selection.setFocus(t,e)}_setTo(...t){this._selection.setTo(...t)}_setAttribute(t,e){this._selection.setAttribute(t,e)}_removeAttribute(t){this._selection.removeAttribute(t)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(t){this._selection.restoreGravity(t)}static _getStoreAttributeKey(t){return ef+t}static _isStoreAttributeKey(t){return t.startsWith(ef)}}).prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};class sf extends zd{markers=new Hc({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(t){super(),this._model=t.model,this._document=t,this.listenTo(this._model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&"marker"!=s.type&&"rename"!=s.type&&"noop"!=s.type&&(0==this._ranges.length&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,e,s,n)=>{this._updateMarker(e,n)}),this.listenTo(this._document,"change",(t,e)=>{!function(t,e){const s=t.document.differ;for(const n of s.getChanges()){if("insert"!=n.type)continue;const s=n.position.parent;n.length===s.maxOffset&&t.enqueueChange(e,t=>{const e=Array.from(s.getAttributeKeys()).filter(t=>t.startsWith(ef));for(const n of e)t.removeAttribute(n,s)})}}(this._model,e)})}get isCollapsed(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...t){super.setTo(...t),this._updateAttributes(!0),this.updateMarkers()}setFocus(t,e){super.setFocus(t,e),this._updateAttributes(!0),this.updateMarkers()}setAttribute(t,e){if(this._setAttribute(t,e)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}removeAttribute(t){if(this._removeAttribute(t)){const e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}overrideGravity(){const t=_c();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}restoreGravity(t){if(!this._overriddenGravityRegister.has(t))throw new vc("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(t){this._observedMarkers.add(t),this.updateMarkers()}_replaceAllRanges(t){this._validateSelectionRanges(t),super._replaceAllRanges(t)}_popRange(){this._ranges.pop().detach()}_pushRange(t){const e=this._prepareRange(t);e&&this._ranges.push(e)}toJSON(){const t=super.toJSON();return this.markers.length&&(t.markers=this.markers.map(t=>t.toJSON())),t}_validateSelectionRanges(t){for(const e of t)if(!this._document._validateSelectionRange(e))throw new vc("document-selection-wrong-position",this,{range:e})}_prepareRange(t){if(this._checkRange(t),t.root==this._document.graveyard)return;const e=Hd.fromRange(t);return e.on("change:range",(t,s,n)=>{if(this._hasChangedRange=!0,e.root==this._document.graveyard){this._selectionRestorePosition=n.deletionPosition;const t=this._ranges.indexOf(e);this._ranges.splice(t,1),e.detach()}}),e}updateMarkers(){if(!this._observedMarkers.size)return;const t=[];let e=!1;for(const e of this._model.markers){const s=e.name.split(":",1)[0];if(!this._observedMarkers.has(s))continue;const n=e.getRange();for(const s of this.getRanges())n.containsRange(s,!s.isCollapsed)&&t.push(e)}const s=Array.from(this.markers);for(const s of t)this.markers.has(s)||(this.markers.add(s),e=!0);for(const s of Array.from(this.markers))t.includes(s)||(this.markers.remove(s),e=!0);e&&this.fire("change:marker",{oldMarkers:s,directChange:!1})}_updateMarker(t,e){const s=t.name.split(":",1)[0];if(!this._observedMarkers.has(s))return;let n=!1;const i=Array.from(this.markers),r=this.markers.has(t);if(e){let s=!1;for(const t of this.getRanges())if(e.containsRange(t,!t.isCollapsed)){s=!0;break}s&&!r?(this.markers.add(t),n=!0):!s&&r&&(this.markers.remove(t),n=!0)}else r&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateAttributes(t){const e=Xc(this._getSurroundingAttributes()),s=Xc(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else for(const[t,e]of this._attributePriority)"low"==e&&(this._attrs.delete(t),this._attributePriority.delete(t));this._setAttributesTo(e);const n=[];for(const[t,e]of this.getAttributes())s.has(t)&&s.get(t)===e||n.push(t);for(const[t]of s)this.hasAttribute(t)||n.push(t);n.length>0&&this.fire("change:attribute",{attributeKeys:n,directChange:!1})}_setAttribute(t,e,s=!0){const n=s?"normal":"low";return("low"!=n||"normal"!=this._attributePriority.get(t))&&(super.getAttribute(t)!==e&&(this._attrs.set(t,e),this._attributePriority.set(t,n),!0))}_removeAttribute(t,e=!0){const s=e?"normal":"low";return!("low"==s&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,s),!super.hasAttribute(t)||(this._attrs.delete(t),0)))}_setAttributesTo(t){const e=new Set;for(const[e,s]of this.getAttributes())t.get(e)!==s&&this._removeAttribute(e,!1);for(const[s,n]of t)this._setAttribute(s,n,!1)&&e.add(s);return e}*getStoredAttributes(){const t=this.getFirstPosition().parent;if(this.isCollapsed&&t.isEmpty)for(const e of t.getAttributeKeys())if(e.startsWith(ef)){const s=e.substr(10);yield[s,t.getAttribute(e)]}}_getSurroundingAttributes(){const t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;let s=null;if(this.isCollapsed){const n=t.textNode?t.textNode:t.nodeBefore,i=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(s=nf(n,e)),s||(s=nf(i,e)),!this.isGravityOverridden&&!s){let t=n;for(;t&&!s;)t=t.previousSibling,s=nf(t,e)}if(!s){let t=i;for(;t&&!s;)t=t.nextSibling,s=nf(t,e)}s||(s=this.getStoredAttributes())}else{const t=this.getFirstRange();for(const n of t){if(n.item.is("element")&&e.isObject(n.item)){s=nf(n.item,e);break}if("text"==n.type){s=n.item.getAttributes();break}}}return s}_fixGraveyardSelection(t){const e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}function nf(t,e){if(!t)return null;if(t instanceof Bd||t instanceof tf)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];const s=[];for(const[n,i]of t.getAttributes())e.checkAttribute("$text",n)&&!1!==e.getAttributeProperties(n).copyFromObject&&s.push([n,i]);return s}class rf{_nodes=[];_offsetToNode=[];constructor(t){t&&this._insertNodes(0,t)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(t){return this._nodes[t]||null}getNodeAtOffset(t){return this._offsetToNode[t]||null}getNodeIndex(t){return t.index}getNodeStartOffset(t){return t.startOffset}indexToOffset(t){if(t==this._nodes.length)return this.maxOffset;const e=this._nodes[t];if(!e)throw new vc("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}offsetToIndex(t){if(t==this._offsetToNode.length)return this._nodes.length;const e=this._offsetToNode[t];if(!e)throw new vc("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.getNodeIndex(e)}_insertNodes(t,e){const s=[];for(const t of e){if(!(t instanceof $d))throw new vc("model-nodelist-insertnodes-not-node",this);s.push(t)}let n=this.indexToOffset(t);Zc(this._nodes,s,t),Zc(this._offsetToNode,function(t){const e=[];let s=0;for(const n of t)for(let t=0;t<n.offsetSize;t++)e[s++]=n;return e}(s),n);for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=n,n+=this._nodes[e].offsetSize}_removeNodes(t,e=1){if(0==e)return[];let s=this.indexToOffset(t);const n=this._nodes.splice(t,e),i=n[n.length-1],r=i.startOffset+i.offsetSize-s;this._offsetToNode.splice(s,r);for(const t of n)t._index=null,t._startOffset=null;for(let e=t;e<this._nodes.length;e++)this._nodes[e]._index=e,this._nodes[e]._startOffset=s,s+=this._nodes[e].offsetSize;return n}_removeNodesArray(t){if(0==t.length)return;for(const e of t)e._index=null,e._startOffset=null;this._nodes=this._nodes.filter(t=>null!==t.index),this._offsetToNode=this._offsetToNode.filter(t=>null!==t.index);let e=0;for(let t=0;t<this._nodes.length;t++)this._nodes[t]._index=t,this._nodes[t]._startOffset=e,e+=this._nodes[t].offsetSize}toJSON(){return this._nodes.map(t=>t.toJSON())}}class of extends $d{name;_children=new rf;constructor(t,e,s){super(e),this.name=t,s&&this._insertChild(0,s)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}offsetToIndex(t){return this._children.offsetToIndex(t)}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}findAncestor(t,e={}){let s=e.includeSelf?this:this.parent;for(;s;){if(s.name===t)return s;s=s.parent}return null}toJSON(){const t=super.toJSON();if(t.name=this.name,this._children.length>0){t.children=[];for(const e of this._children)t.children.push(e.toJSON())}return t}_clone(t=!1){const e=t?function(t){const e=[];for(const s of t)e.push(s._clone(!0));return e}(this._children):void 0;return new of(this.name,this.getAttributes(),e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){if("string"==typeof t)return[new tf(t)];Yc(t)||(t=[t]);const e=[];for(const s of t)"string"==typeof s?e.push(new tf(s)):s instanceof Bd?e.push(new tf(s.data,s.getAttributes())):e.push(s);return e}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}static fromJSON(t){let e;if(t.children){e=[];for(const s of t.children)s.name?e.push(of.fromJSON(s)):e.push(tf.fromJSON(s))}return new of(t.name,t.attributes,e)}}of.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;class af{baseVersion;isDocumentOperation;batch;constructor(t){this.baseVersion=t,this.isDocumentOperation=null!==this.baseVersion,this.batch=null}_validate(){}toJSON(){const t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}static get className(){return"Operation"}static fromJSON(t,e){return new this(t.baseVersion)}}function hf(t,e){const s=cf(e),n=s.reduce((t,e)=>t+e.offsetSize,0),i=t.parent;ff(t);const r=t.index;return i._insertChild(r,s),df(i,r+s.length),df(i,r),new Ld(t,t.getShiftedBy(n))}function lf(t,e){if(!t.isFlat)throw new vc("operation-utils-move-range-not-flat",this);const s=function(t){if(!t.isFlat)throw new vc("operation-utils-remove-range-not-flat",this);const e=t.start.parent;ff(t.start),ff(t.end);const s=e._removeChildren(t.start.index,t.end.index-t.start.index);return df(e,t.start.index),s}(t);return hf(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),s)}function cf(t){const e=[];!function t(s){if("string"==typeof s)e.push(new tf(s));else if(s instanceof Bd)e.push(new tf(s.data,s.getAttributes()));else if(s instanceof $d)e.push(s);else if(Yc(s))for(const e of s)t(e)}(t);for(let t=1;t<e.length;t++){const s=e[t],n=e[t-1];s instanceof tf&&n instanceof tf&&uf(s,n)&&(e.splice(t-1,2,new tf(n.data+s.data,n.getAttributes())),t--)}return e}function df(t,e){const s=t.getChild(e-1),n=t.getChild(e);if(s&&n&&s.is("$text")&&n.is("$text")&&uf(s,n)){const i=new tf(s.data+n.data,s.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,i)}}function ff(t){const e=t.textNode,s=t.parent;if(e){const n=t.offset-e.startOffset,i=e.index;s._removeChildren(i,1);const r=new tf(e.data.substr(0,n),e.getAttributes()),o=new tf(e.data.substr(n),e.getAttributes());s._insertChild(i,[r,o])}}function uf(t,e){const s=t.getAttributes(),n=e.getAttributes();for(const t of s){if(t[1]!==e.getAttribute(t[0]))return!1;n.next()}return n.next().done}class gf extends af{sourcePosition;howMany;targetPosition;constructor(t,e,s,n){super(n),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toNext",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName==this.sourcePosition.root.rootName?"move":"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}get affectedSelectable(){return[Ld._createFromPositionAndShift(this.sourcePosition,this.howMany),Ld._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new gf(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new gf(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent,s=this.sourcePosition.offset,n=this.targetPosition.offset;if(s+this.howMany>t.maxOffset)throw new vc("move-operation-nodes-do-not-exist",this);if(t===e&&s<n&&n<s+this.howMany)throw new vc("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Kc(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){const t=this.sourcePosition.path.length-1;if(this.targetPosition.path[t]>=s&&this.targetPosition.path[t]<s+this.howMany)throw new vc("move-operation-node-into-itself",this)}}_execute(){lf(Ld._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}static get className(){return"MoveOperation"}static fromJSON(t,e){const s=Fd.fromJSON(t.sourcePosition,e),n=Fd.fromJSON(t.targetPosition,e);return new this(s,t.howMany,n,t.baseVersion)}}class pf extends af{position;nodes;shouldReceiveAttributes;constructor(t,e,s){super(s),this.position=t.clone(),this.position.stickiness="toNone",this.nodes=new rf(cf(e)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const t=new rf([...this.nodes].map(t=>t._clone(!0))),e=new pf(this.position,t,this.baseVersion);return e.shouldReceiveAttributes=this.shouldReceiveAttributes,e}getReversed(){const t=this.position.root.document.graveyard,e=new Fd(t,[0]);return new gf(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}_validate(){const t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new vc("insert-operation-position-invalid",this)}_execute(){const t=this.nodes;this.nodes=new rf([...t].map(t=>t._clone(!0))),hf(this.position,t)}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}static get className(){return"InsertOperation"}static fromJSON(t,e){const s=[];for(const e of t.nodes)e.name?s.push(of.fromJSON(e)):s.push(tf.fromJSON(e));const n=new pf(Fd.fromJSON(t.position,e),s,t.baseVersion);return n.shouldReceiveAttributes=t.shouldReceiveAttributes,n}}class mf extends af{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.splitPosition=t.clone(),this.splitPosition.stickiness="toNext",this.howMany=e,this.insertionPosition=s,this.graveyardPosition=n?n.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const t=this.insertionPosition.path.slice();return t.push(0),new Fd(this.insertionPosition.root,t)}get movedRange(){const t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ld(this.splitPosition,t)}get affectedSelectable(){const t=[Ld._createFromPositionAndShift(this.splitPosition,0),Ld._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Ld._createFromPositionAndShift(this.graveyardPosition,0)),t}clone(){return new mf(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.splitPosition.root.document.graveyard,e=new Fd(t,[0]);return new bf(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}_validate(){const t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new vc("split-operation-position-invalid",this);if(!t.parent)throw new vc("split-operation-split-in-root",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset-this.splitPosition.offset)throw new vc("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new vc("split-operation-graveyard-position-invalid",this);this.howMany=this.splitPosition.parent.maxOffset-this.splitPosition.offset}_execute(){const t=this.splitPosition.parent;if(this.graveyardPosition)lf(Ld._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const e=t._clone();hf(this.insertionPosition,e)}lf(new Ld(Fd._createAt(t,this.splitPosition.offset),Fd._createAt(t,t.maxOffset)),this.moveTargetPosition)}toJSON(){const t=super.toJSON();return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}static get className(){return"SplitOperation"}static getInsertionPosition(t){const e=t.path.slice(0,-1);return e[e.length-1]++,new Fd(t.root,e,"toPrevious")}static fromJSON(t,e){const s=Fd.fromJSON(t.splitPosition,e),n=Fd.fromJSON(t.insertionPosition,e),i=t.graveyardPosition?Fd.fromJSON(t.graveyardPosition,e):null;return new this(s,t.howMany,n,i,t.baseVersion)}}class bf extends af{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(t,e,s,n,i){super(i),this.sourcePosition=t.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=e,this.targetPosition=s.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=n.clone()}get type(){return"merge"}get deletionPosition(){return new Fd(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Ld(this.sourcePosition,t)}get affectedSelectable(){const t=this.sourcePosition.parent;return[Ld._createOn(t),Ld._createFromPositionAndShift(this.targetPosition,0),Ld._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new bf(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),s=new Fd(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new mf(t,this.howMany,s,this.graveyardPosition,this.baseVersion+1)}_validate(){const t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new vc("merge-operation-source-position-invalid",this);if(!e.parent)throw new vc("merge-operation-target-position-invalid",this);if(this.howMany!==Number.NEGATIVE_INFINITY&&this.howMany!=t.maxOffset)throw new vc("merge-operation-how-many-invalid",this);this.howMany=this.sourcePosition.parent.maxOffset}_execute(){const t=this.sourcePosition.parent;lf(Ld._createIn(t),this.targetPosition),lf(Ld._createOn(t),this.graveyardPosition)}toJSON(){const t=super.toJSON();return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}static get className(){return"MergeOperation"}static fromJSON(t,e){const s=Fd.fromJSON(t.sourcePosition,e),n=Fd.fromJSON(t.targetPosition,e),i=Fd.fromJSON(t.graveyardPosition,e);return new this(s,t.howMany,n,i,t.baseVersion)}}class _f extends af{name;oldRange;newRange;affectsData;_markers;constructor(t,e,s,n,i,r){super(r),this.name=t,this.oldRange=e?e.clone():null,this.newRange=s?s.clone():null,this.affectsData=i,this._markers=n}get type(){return"marker"}get affectedSelectable(){const t=[];return this.oldRange&&t.push(this.oldRange.clone()),this.newRange&&(this.oldRange?t.push(...this.newRange.getDifference(this.oldRange)):t.push(this.newRange.clone())),t}clone(){return new _f(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new _f(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const t=super.toJSON();return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}static get className(){return"MarkerOperation"}static fromJSON(t,e){return new _f(t.name,t.oldRange?Ld.fromJSON(t.oldRange,e):null,t.newRange?Ld.fromJSON(t.newRange,e):null,e.model.markers,t.affectsData,t.baseVersion)}}class yf extends af{range;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.range=t.clone(),this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new yf(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new yf(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const t=super.toJSON();return t.range=this.range.toJSON(),t}_validate(){if(!this.range.isFlat)throw new vc("attribute-operation-range-not-flat",this);for(const t of this.range.getItems({shallow:!0})){if(null!==this.oldValue&&!Ns(t.getAttribute(this.key),this.oldValue))throw new vc("attribute-operation-wrong-old-value",this,{item:t,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&t.hasAttribute(this.key))throw new vc("attribute-operation-attribute-exists",this,{node:t,key:this.key})}}_execute(){Ns(this.oldValue,this.newValue)||function(t,e,s){ff(t.start),ff(t.end);for(const n of t.getItems({shallow:!0})){const t=n.is("$textProxy")?n.textNode:n;null!==s?t._setAttribute(e,s):t._removeAttribute(e),df(t.parent,t.index)}df(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(t,e){return new yf(Ld.fromJSON(t.range,e),t.key,t.oldValue,t.newValue,t.baseVersion)}}class wf extends af{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new wf(this.baseVersion)}getReversed(){return new wf(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class vf extends af{position;oldName;newName;constructor(t,e,s,n){super(n),this.position=t,this.position.stickiness="toNext",this.oldName=e,this.newName=s}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new vf(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new vf(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const t=this.position.nodeAfter;if(!(t instanceof of))throw new vc("rename-operation-wrong-position",this);if(""!==this.oldName&&t.name!==this.oldName)throw new vc("rename-operation-wrong-name",this);this.oldName=t.name}_execute(){this.position.nodeAfter.name=this.newName}toJSON(){const t=super.toJSON();return t.position=this.position.toJSON(),t}static get className(){return"RenameOperation"}static fromJSON(t,e){return new vf(Fd.fromJSON(t.position,e),t.oldName,t.newName,t.baseVersion)}}class Pf extends af{root;key;oldValue;newValue;constructor(t,e,s,n,i){super(i),this.root=t,this.key=e,this.oldValue=void 0===s?null:s,this.newValue=void 0===n?null:n}get type(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new Pf(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new Pf(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new vc("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new vc("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new vc("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const t=super.toJSON();return t.root=this.root.toJSON(),t}static get className(){return"RootAttributeOperation"}static fromJSON(t,e){if(!e.getRoot(t.root))throw new vc("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new Pf(e.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}class xf extends af{rootName;elementName;isAdd;_document;constructor(t,e,s,n,i){super(i),this.rootName=t,this.elementName=e,this.isAdd=s,this._document=n,this._document.getRoot(this.rootName)||(this._document.createRoot(this.elementName,this.rootName)._isAttached=!1)}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new xf(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new xf(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const t=super.toJSON();return delete t._document,t}static get className(){return"RootOperation"}static fromJSON(t,e){return new xf(t.rootName,t.elementName,t.isAdd,e,t.baseVersion)}}const Sf={};Sf[yf.className]=yf,Sf[pf.className]=pf,Sf[_f.className]=_f,Sf[gf.className]=gf,Sf[wf.className]=wf,Sf[af.className]=af,Sf[vf.className]=vf,Sf[Pf.className]=Pf,Sf[xf.className]=xf,Sf[mf.className]=mf,Sf[bf.className]=bf;const Af=new Map;function Of(t,e,s){let n=Af.get(t);n||(n=new Map,Af.set(t,n)),n.set(e,s)}function kf(t,e,s){const n=t.nodes.getNode(0).getAttribute(e);if(n==s)return null;const i=new Ld(t.position,t.position.getShiftedBy(t.howMany));return new yf(i,e,n,s,0)}function Rf(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function Nf(t,e){const s=[];for(let n=0;n<t.length;n++){const i=t[n],r=new gf(i.start,i.end.offset-i.start.offset,e,0);s.push(r);for(let e=n+1;e<t.length;e++)t[e]=t[e]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return s}Of(yf,yf,(t,e,s)=>{if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){const n=t.range.getDifference(e.range).map(e=>new yf(e,t.key,t.oldValue,t.newValue,0)),i=t.range.getIntersection(e.range);return i&&s.aIsStrong&&n.push(new yf(i,e.key,e.newValue,t.newValue,0)),0==n.length?[new wf(0)]:n}return[t]}),Of(yf,pf,(t,e)=>{if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){const s=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(e=>new yf(e,t.key,t.oldValue,t.newValue,t.baseVersion));if(e.shouldReceiveAttributes){const n=kf(e,t.key,t.oldValue);n&&s.unshift(n)}return s}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]}),Of(yf,bf,(t,e)=>{const s=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&s.push(Ld._createFromPositionAndShift(e.graveyardPosition,1));const n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||s.push(n),s.map(e=>new yf(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Of(yf,gf,(t,e)=>{const s=function(t,e){const s=Ld._createFromPositionAndShift(e.sourcePosition,e.howMany);let n=null,i=[];s.containsRange(t,!0)?n=t:t.start.hasSameParentAs(s.start)?(i=t.getDifference(s),n=t.getIntersection(s)):i=[t];const r=[];for(let t of i){t=t._getTransformedByDeletion(e.sourcePosition,e.howMany);const s=e.getMovedRangeStart(),n=t.start.hasSameParentAs(s),i=t._getTransformedByInsertion(s,e.howMany,n);r.push(...i)}return n&&r.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}(t.range,e);return s.map(e=>new yf(e,t.key,t.oldValue,t.newValue,t.baseVersion))}),Of(yf,mf,(t,e)=>{if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){const s=t.clone();return s.range=new Ld(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,s]}return t.range=t.range._getTransformedBySplitOperation(e),[t]}),Of(pf,yf,(t,e)=>{const s=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){const n=kf(t,e.key,e.newValue);n&&s.push(n)}return s}),Of(pf,pf,(t,e,s)=>(t.position.isEqual(e.position)&&s.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t])),Of(pf,gf,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Of(pf,mf,(t,e)=>(t.position=t.position._getTransformedBySplitOperation(e),[t])),Of(pf,bf,(t,e)=>(t.position=t.position._getTransformedByMergeOperation(e),[t])),Of(_f,pf,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t])),Of(_f,_f,(t,e,s)=>{if(t.name==e.name){if(!s.aIsStrong)return[new wf(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]}),Of(_f,bf,(t,e)=>(t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t])),Of(_f,gf,(t,e)=>{const s=[t];if(t.oldRange&&(t.oldRange=Ld._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){const n=t.newRange._getTransformedByMoveOperation(e);t.newRange=n[0];for(let e=1;e<n.length;e++){const i=t.clone();i.oldRange=null,i.newRange=n[e],i.baseVersion=-1,s.push(i)}}return s}),Of(_f,mf,(t,e,s)=>{if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(s.abRelation){const n=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)?s.abRelation.wasStartBeforeMergedElement?t.newRange.start=Fd._createAt(e.insertionPosition):s.abRelation.wasInLeftElement?t.newRange.start=Fd._createAt(t.newRange.start):t.newRange.start=Fd._createAt(e.moveTargetPosition):t.newRange.start=n.start,t.newRange.end.isEqual(e.splitPosition)?t.newRange.end.isEqual(e.splitPosition)&&s.abRelation.wasEndBeforeMergedElement?t.newRange.end=Fd._createAt(e.insertionPosition):s.abRelation.wasInRightElement?t.newRange.end=Fd._createAt(e.moveTargetPosition):t.newRange.end=Fd._createAt(t.newRange.end):t.newRange.end=n.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]}),Of(bf,pf,(t,e)=>(t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t])),Of(bf,bf,(t,e,s)=>{if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(s.bWasUndone){const s=e.graveyardPosition.path.slice();return s.push(0),t.sourcePosition=new Fd(e.graveyardPosition.root,s),t.howMany=0,[t]}return[new wf(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!s.bWasUndone&&"splitAtSource"!=s.abRelation){const n="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=e.targetPosition._getTransformedByMergeOperation(e),n=t.targetPosition._getTransformedByMergeOperation(e);return[new gf(s,t.howMany,n,0)]}return[new wf(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&s.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Of(bf,gf,(t,e,s)=>{const n=Ld._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!s.bWasUndone&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new wf(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==s.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==s.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])}),Of(bf,mf,(t,e,s)=>{if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition)||"mergeTargetNotMoved"==s.abRelation))return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t];if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==s.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==s.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}),Of(gf,pf,(t,e)=>{const s=Ld._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=s.start,t.howMany=s.end.offset-s.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]}),Of(gf,gf,(t,e,s)=>{const n=Ld._createFromPositionAndShift(t.sourcePosition,t.howMany),i=Ld._createFromPositionAndShift(e.sourcePosition,e.howMany);let r,o=s.aIsStrong,a=!s.aIsStrong;if("insertBefore"==s.abRelation||"insertAfter"==s.baRelation?a=!0:"insertAfter"!=s.abRelation&&"insertBefore"!=s.baRelation||(a=!1),r=t.targetPosition.isEqual(e.targetPosition)&&a?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Rf(t,e)&&Rf(e,t))return[e.getReversed()];if(n.containsPosition(e.targetPosition)&&n.containsRange(i,!0))return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Nf([n],r);if(i.containsPosition(t.targetPosition)&&i.containsRange(n,!0))return n.start=n.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),n.end=n.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),Nf([n],r);const h=Kc(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==h||"extension"==h)return n.start=n.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),n.end=n.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),Nf([n],r);"remove"!=t.type||"remove"==e.type||s.aWasUndone||s.forceWeakRemove?"remove"==t.type||"remove"!=e.type||s.bWasUndone||s.forceWeakRemove||(o=!1):o=!0;const l=[],c=n.getDifference(i);for(const t of c){t.start=t.start._getTransformedByDeletion(e.sourcePosition,e.howMany),t.end=t.end._getTransformedByDeletion(e.sourcePosition,e.howMany);const s="same"==Kc(t.start.getParentPath(),e.getMovedRangeStart().getParentPath()),n=t._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,s);l.push(...n)}const d=n.getIntersection(i);return null!==d&&o&&(d.start=d.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),d.end=d.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(d):1==l.length?i.start.isBefore(n.start)||i.start.isEqual(n.start)?l.unshift(d):l.push(d):l.splice(1,0,d)),0===l.length?[new wf(t.baseVersion)]:Nf(l,r)}),Of(gf,mf,(t,e,s)=>{let n=t.targetPosition.clone();if(t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=s.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e)),t.sourcePosition.isEqual(e.insertionPosition)&&"firstToMoveMerged"==s.abRelation)return t.howMany++,t.targetPosition=n,[t];const i=Ld._createFromPositionAndShift(t.sourcePosition,t.howMany);if(i.end.isEqual(e.insertionPosition))return e.graveyardPosition&&"lastToMoveMerged"!=s.abRelation||t.howMany++,t.targetPosition=n,[t];if(i.start.hasSameParentAs(e.splitPosition)&&i.containsPosition(e.splitPosition)){let t=new Ld(e.splitPosition,i.end);return t=t._getTransformedBySplitOperation(e),Nf([new Ld(i.start,e.splitPosition),t],n)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==s.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==s.abRelation&&(n=t.targetPosition);const r=[i._getTransformedBySplitOperation(e)];if(e.graveyardPosition){const n=i.start.isEqual(e.graveyardPosition)||i.containsPosition(e.graveyardPosition);t.howMany>1&&n&&!s.aWasUndone&&r.push(Ld._createFromPositionAndShift(e.insertionPosition,1))}return Nf(r,n)}),Of(gf,bf,(t,e,s)=>{const n=Ld._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||s.forceWeakRemove){if(1==t.howMany)return s.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new wf(0)]}else if(!s.aWasUndone){const s=[];let n=e.graveyardPosition.clone(),i=e.targetPosition._getTransformedByMergeOperation(e);const r=t.targetPosition.getTransformedByOperation(e);t.howMany>1&&(s.push(new gf(t.sourcePosition,t.howMany-1,r,0)),n=n._getTransformedByMove(t.sourcePosition,r,t.howMany-1),i=i._getTransformedByMove(t.sourcePosition,r,t.howMany-1));const o=e.deletionPosition._getCombined(t.sourcePosition,r),a=new gf(n,1,o,0),h=a.getMovedRangeStart().path.slice();h.push(0);const l=new Fd(a.targetPosition.root,h);i=i._getTransformedByMove(n,o,1);const c=new gf(i,e.howMany,l,0);return s.push(a),s.push(c),s}const i=Ld._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=i.start,t.howMany=i.end.offset-i.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]}),Of(vf,pf,(t,e)=>(t.position=t.position._getTransformedByInsertOperation(e),[t])),Of(vf,bf,(t,e)=>t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])),Of(vf,gf,(t,e)=>(t.position=t.position._getTransformedByMoveOperation(e),[t])),Of(vf,vf,(t,e,s)=>{if(t.position.isEqual(e.position)){if(!s.aIsStrong)return[new wf(0)];t.oldName=e.newName}return[t]}),Of(vf,mf,(t,e)=>{if("same"==Kc(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){const e=new vf(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,e]}return t.position=t.position._getTransformedBySplitOperation(e),[t]}),Of(Pf,Pf,(t,e,s)=>{if(t.root===e.root&&t.key===e.key){if(!s.aIsStrong||t.newValue===e.newValue)return[new wf(0)];t.oldValue=e.newValue}return[t]}),Of(xf,xf,(t,e)=>t.rootName===e.rootName&&t.isAdd===e.isAdd?[new wf(0)]:[t]),Of(mf,pf,(t,e)=>(t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t])),Of(mf,bf,(t,e,s)=>{if(!t.graveyardPosition&&!s.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){const s=e.graveyardPosition.path.slice();s.push(0);const n=new Fd(e.graveyardPosition.root,s),i=mf.getInsertionPosition(new Fd(e.graveyardPosition.root,s)),r=new mf(n,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=mf.getInsertionPosition(t.splitPosition),t.graveyardPosition=r.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[r,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=mf.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]}),Of(mf,gf,(t,e,s)=>{const n=Ld._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){const i=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!s.bWasUndone&&i){const s=t.splitPosition._getTransformedByMoveOperation(e),n=t.graveyardPosition._getTransformedByMoveOperation(e),i=n.path.slice();i.push(0);const r=new Fd(n.root,i);return[new gf(s,t.howMany,r,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}const i=t.splitPosition.isEqual(e.targetPosition);if(i&&("insertAtSource"==s.baRelation||"splitBefore"==s.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=mf.getInsertionPosition(t.splitPosition),[t];if(i&&s.abRelation&&s.abRelation.howMany){const{howMany:e,offset:n}=s.abRelation;return t.howMany+=e,t.splitPosition=t.splitPosition.getShiftedBy(n),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){const s=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=s,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=mf.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=mf.getInsertionPosition(t.splitPosition),[t]}),Of(mf,mf,(t,e,s)=>{if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new wf(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new wf(0)];if("splitBefore"==s.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){const n="$graveyard"==t.splitPosition.root.rootName,i="$graveyard"==e.splitPosition.root.rootName;if(i&&!n||(!n||i)&&s.aIsStrong){const s=[];return e.howMany&&s.push(new gf(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&s.push(new gf(t.splitPosition,t.howMany,t.moveTargetPosition,0)),s}return[new wf(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==s.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==s.baRelation){const s=e.insertionPosition.path.slice();s.push(0);const n=new Fd(e.insertionPosition.root,s);return[t,new gf(t.insertionPosition,1,n,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=mf.getInsertionPosition(t.splitPosition),[t]});function Ef(){this.listenTo(this.root.document.model,"applyOperation",(t,e)=>{const s=e[0];s.isDocumentOperation&&Mf.call(this,s)},{priority:"low"})}function Mf(t){const e=this.getTransformedByOperation(t);if(!this.isEqual(e)){const t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}(class extends(Rc(Fd)){constructor(t,e,s="toNone"){if(super(t,e,s),!this.root.is("rootElement"))throw new vc("model-liveposition-root-not-rootelement",t);Ef.call(this)}detach(){this.stopListening()}toPosition(){return new Fd(this.root,this.path.slice(),this.stickiness)}static fromPosition(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}).prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};(class extends of{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(t,e,s="main"){super(e),this._document=t,this.rootName=s}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}).prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t},Symbol.iterator;(class extends(Rc(Td)){name;_managedUsingOperations;_affectsData;_liveRange;constructor(t,e,s,n){super(),this.name=t,this._liveRange=this._attachLiveRange(e),this._managedUsingOperations=s,this._affectsData=n}get managedUsingOperations(){if(!this._liveRange)throw new vc("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new vc("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new vc("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new vc("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new vc("marker-destroyed",this);return this._liveRange.toRange()}toJSON(){return{name:this.name,range:this._liveRange?.toJSON(),usingOperations:this._managedUsingOperations,affectsData:this._affectsData}}_attachLiveRange(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}).prototype.is=function(t){return"marker"===t||"model:marker"===t};class Tf extends Td{markers=new Map;_children=new rf;constructor(t){super(),t&&this._insertChild(0,t)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return 0===this.childCount}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(t){return this._children.getNode(t)}getChildAtOffset(t){return this._children.getNodeAtOffset(t)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(t){return this._children.getNodeIndex(t)}getChildStartOffset(t){return this._children.getNodeStartOffset(t)}getPath(){return[]}getNodeByPath(t){let e=this;for(const s of t)e=e.getChildAtOffset(s);return e}offsetToIndex(t){return this._children.offsetToIndex(t)}toJSON(){const t=[];for(const e of this._children)t.push(e.toJSON());return t}static fromJSON(t){const e=[];for(const s of t)s.name?e.push(of.fromJSON(s)):e.push(tf.fromJSON(s));return new Tf(e)}_appendChild(t){this._insertChild(this.childCount,t)}_insertChild(t,e){const s=function(t){return"string"==typeof t?[new tf(t)]:(Yc(t)||(t=[t]),Array.from(t).map(t=>"string"==typeof t?new tf(t):t instanceof Bd?new tf(t.data,t.getAttributes()):t))}(e);for(const t of s)null!==t.parent&&t._remove(),t.parent=this;this._children._insertNodes(t,s)}_removeChildren(t,e=1){const s=this._children._removeNodes(t,e);for(const t of s)t.parent=null;return s}_removeChildrenArray(t){this._children._removeNodesArray(t);for(const e of t)e.parent=null}}Tf.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t},new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]),Symbol("_treeDump"),Symbol("MainQueueId"),Symbol.iterator;function Bf(t){return new RegExp(`(^|\\s)(${t})([^${t}]*)(${t})$`)}Bf('"'),Bf("'"),Bf("'"),Bf('"'),Bf('"'),Bf("'"),s(16949),s(90068),s(69541),s(78772),s(15128),s(67723),s(38143),s(26086),s(60962),s(80873),s(99212),s(3709),s(62210),s(45916),s(38096),s(58498),s(74266),s(3232),s(66905),s(6140),s(49564),s(13411),s(23232),s(54371),s(54620),s(93754),s(90043),s(76587),s(78457),s(44633),s(69299),s(23318),s(65989),s(64737),s(53991),s(24716),s(31245),s(93865),s(22502),s(713),s(69305),s(88825),s(21068),s(43756),s(18440),s(74826),s(27542),s(16452),s(49918),s(27855),s(58252),s(3532),s(9017),s(95070),s(73911),s(34741),s(55948),s(86229),s(30343),s(93732),s(85091),s(49647),s(15079),s(57779),s(98768),s(75826),s(28606),s(30453),s(50595),s(15285),s(9593),s(56289),s(12730),s(82165),s(35522),s(12977),s(35630),s(39481),s(76156),s(75172),s(29623),s(24294),s(10057),s(84696),s(42763),s(12677),s(27698),s(23432),s(21883),s(60782),s(17476),s(81890),s(61379),s(63005),s(33457),s(23319),s(8252),s(50175),s(83151),s(69719),s(21995),s(45848),s(37795),s(79697),s(1323),s(68674),s(56883),s(83873),s(45833),s(37548),s(39120),s(44436),s(37004),s(95599),s(3341),s(81413),s(8917),s(6713),s(86287),s(93384),s(97732),s(75418),s(5460),s(21612),s(62135),s(22550),s(42517),s(40092),s(65816),s(86279),s(48648),s(95202),s(85874),s(18500),s(32022),s(44551),s(89674),s(93164),s(52598),s(81973),s(24939),s(298),s(72974),s(88667),s(59548),s(87256),s(48835),s(17769),s(27623),s(93656),s(45540),s(70400),s(78578),s(61805),s(80635),s(2396),s(15463),s(54105),s(2047),s(68337),s(23939),s(37705),s(74393),s(84327),s(96656),s(72431),s(79960),s(99858),s(43888),s(7133),s(87383),s(75180),s(44135),s(43614),s(1989),s(91112),s(57844),s(43467),s(81644),s(3785),s(13326),s(45845),s(98696),s(9153),s(19281),s(22260),s(45554),s(54111),s(94089),s(3225),s(79149),s(1782),s(77600),s(90637),s(82229),s(88724),s(84709),s(15717),s(35686),s(44660),s(47515),s(67088),s(33942),s(70796),s(80837),s(44067);class Cf extends t.default{}Cf.builtinPlugins=[e.default,i.default,r.default,o.default,a.default,h.default,c.default,d.default,f.default,l.default,u.default,g.default,p.default,b.default,m.default,_.default,y.default,w.default,v.default,P.default,x.default,S.default,HtmlSupport],Cf.defaultConfig={toolbar:{items:["heading","|","bold","italic","underline","strikethrough","code","codeBlock","|","fontFamily","fontSize","fontColor","fontBackgroundColor","highlight","|","link","bulletedList","numberedList","outdent","indent","alignment","|","insertTable","imageUpload","mediaEmbed","specialCharacters","|","undo","redo"]},image:{toolbar:["imageTextAlternative","imageStyle:full","imageStyle:side"]},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells"]},language:"ru"};const If=Cf})(),n})());