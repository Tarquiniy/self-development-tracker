/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/@tiptap/extension-link@2.0.0-beta.37/dist/tiptap-extension-link.umd.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@tiptap/core"),require("linkifyjs"),require("prosemirror-state")):"function"==typeof define&&define.amd?define(["exports","@tiptap/core","linkifyjs","prosemirror-state"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@tiptap/extension-link"]={},e.core,e.linkifyjs,e.prosemirrorState)}(this,(function(e,t,n,r){"use strict";const o=t.Mark.create({name:"link",priority:1e3,keepOnSplit:!1,inclusive(){return this.options.autolink},addOptions:()=>({openOnClick:!0,linkOnPaste:!0,autolink:!0,HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow"}}),addAttributes(){return{href:{default:null},target:{default:this.options.HTMLAttributes.target}}},parseHTML:()=>[{tag:'a[href]:not([href *= "javascript:" i])'}],renderHTML({HTMLAttributes:e}){return["a",t.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({chain:t})=>t().setMark(this.name,e).setMeta("preventAutolink",!0).run(),toggleLink:e=>({chain:t})=>t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[t.markPasteRule({find:e=>n.find(e).filter((e=>e.isLink)).map((e=>({text:e.value,index:e.start,data:e}))),type:this.type,getAttributes:e=>{var t;return{href:null===(t=e.data)||void 0===t?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[];var o;return this.options.autolink&&e.push((o={type:this.type},new r.Plugin({key:new r.PluginKey("autolink"),appendTransaction:(e,r,i)=>{const s=e.some((e=>e.docChanged))&&!r.doc.eq(i.doc),a=e.some((e=>e.getMeta("preventAutolink")));if(!s||a)return;const{tr:p}=i,d=t.combineTransactionSteps(r.doc,e),{mapping:l}=d;return t.getChangedRanges(d).forEach((({oldRange:e,newRange:s})=>{t.getMarksBetween(e.from,e.to,r.doc).filter((e=>e.mark.type===o.type)).forEach((e=>{const s=l.map(e.from),a=l.map(e.to),d=t.getMarksBetween(s,a,i.doc).filter((e=>e.mark.type===o.type));if(!d.length)return;const u=d[0],f=r.doc.textBetween(e.from,e.to,void 0," "),c=i.doc.textBetween(u.from,u.to,void 0," "),h=n.test(f),k=n.test(c);h&&!k&&p.removeMark(u.from,u.to,o.type)})),t.findChildrenInRange(i.doc,s,(e=>e.isTextblock)).forEach((e=>{const t=i.doc.textBetween(e.pos,e.pos+e.node.nodeSize,void 0," ");n.find(t).filter((e=>e.isLink)).map((t=>({...t,from:e.pos+t.start+1,to:e.pos+t.end+1}))).filter((e=>{const t=s.from>=e.from&&s.from<=e.to,n=s.to>=e.from&&s.to<=e.to;return t||n})).forEach((e=>{p.addMark(e.from,e.to,o.type.create({href:e.href}))}))}))})),p.steps.length?p:void 0}}))),this.options.openOnClick&&e.push(function(e){return new r.Plugin({key:new r.PluginKey("handleClickLink"),props:{handleClick:(n,r,o)=>{var i;const s=t.getAttributes(n.state,e.type.name);return!(!(null===(i=o.target)||void 0===i?void 0:i.closest("a"))||!s.href||(window.open(s.href,s.target),0))}}})}({type:this.type})),this.options.linkOnPaste&&e.push(function(e){return new r.Plugin({key:new r.PluginKey("handlePasteLink"),props:{handlePaste:(t,r,o)=>{const{state:i}=t,{selection:s}=i,{empty:a}=s;if(a)return!1;let p="";o.content.forEach((e=>{p+=e.textContent}));const d=n.find(p).find((e=>e.isLink&&e.value===p));return!(!p||!d||(e.editor.commands.setMark(e.type,{href:d.href}),0))}}})}({editor:this.editor,type:this.type})),e}});e.Link=o,e.default=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=/sm/22323b7f696023759312c5c7d2998bc1f98e9edb58113e7b17f2ea7842245ddc.map