{% extends "admin/base_site.html" %}
{% load static %}

{# Ранний shim: если jQuery загрузился раньше, но $ отсутствует, выставим $ = jQuery.
   Запускается до {{ block.super }} чтобы перекрыть случаи, когда админские скрипты ожидают $. #}
{% block extrahead %}
<script>
(function(){
  function ensureDollar(){
    try {
      if (window.jQuery) {
        if (!window.$) window.$ = window.jQuery;
        return true;
      }
    } catch(e){}
    return false;
  }
  if (!ensureDollar()) {
    var tries = 0;
    var t = setInterval(function(){
      if (ensureDollar() || ++tries > 200) clearInterval(t);
    }, 25);
  }
})();
</script>
{{ block.super }}
{% endblock %}
