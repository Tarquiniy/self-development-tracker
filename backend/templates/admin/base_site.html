{% extends "admin/base.html" %}
{% load static i18n %}

{# base_site.html — кастомизация верхнего бара и подключение кастомного CSS #}
{% block title %}Positive Theta — Панель управления{% endblock %}

{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'admin/css/custom_admin.css' %}">
{% endblock %}

{% block branding %}
  <a class="pt-logo" href="{% url 'admin:index' %}">
    <span class="pt-logo-mark">Θ</span>
    <span class="pt-logo-text">Positive Theta</span>
  </a>
{% endblock %}

{% block nav-global %}
  <div class="pt-topbar">
    <div class="pt-search">
      <form action="{% url 'admin:search' %}" method="get">
        <input name="q" placeholder="{% trans 'Поиск по админке…' %}" aria-label="search admin">
      </form>
    </div>

    <div class="pt-actions">
      {# защищённый вызов admin:add — проверим, что имена существуют при рендере #}
      {% if perms.blog.add_post %}
        <a href="{% url 'admin:blog_post_add' %}" class="pt-btn primary">{% trans "Создать пост" %}</a>
      {% else %}
        <a class="pt-btn primary disabled" aria-disabled="true">{% trans "Создать пост" %}</a>
      {% endif %}
      {# Пользователи — только если есть доступ к auth.user change #}
      {% if perms.auth.view_user %}
        <a href="{% url 'admin:auth_user_changelist' %}" class="pt-btn">{% trans "Пользователи" %}</a>
      {% else %}
        <a class="pt-btn disabled" aria-disabled="true">{% trans "Пользователи" %}</a>
      {% endif %}
      <a href="{% url 'admin:logout' %}" class="pt-btn outline">{% trans "Выйти" %}</a>
    </div>
  </div>
{% endblock %}
