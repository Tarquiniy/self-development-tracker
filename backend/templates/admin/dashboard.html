{% extends "admin/base_site.html" %}
{% load i18n %}
{% block content %}
  <div class="dashboard-panel" style="padding:20px;">
    <h1>{% trans "Admin dashboard" %}</h1>

    <div style="display:flex;gap:16px;flex-wrap:wrap;margin-bottom:18px">
      <div style="padding:12px;border:1px solid #eee;border-radius:6px;min-width:160px">
        <strong>{% trans "Posts" %}</strong>
        <div>{{ posts_count }}</div>
        <small>{% trans "Published" %}: {{ published_count }}</small><br/>
        <small>{% trans "Drafts" %}: {{ draft_count }}</small>
      </div>

      <div style="padding:12px;border:1px solid #eee;border-radius:6px;min-width:160px">
        <strong>{% trans "Comments" %}</strong>
        <div>{{ comments_count }}</div>
      </div>

      <div style="padding:12px;border:1px solid #eee;border-radius:6px;min-width:160px">
        <strong>{% trans "Users" %}</strong>
        <div>{{ users_count }}</div>
      </div>

      <div style="padding:12px;border:1px solid #eee;border-radius:6px;min-width:160px">
        <strong>{% trans "Views" %}</strong>
        <div>{{ total_views }}</div>
      </div>
    </div>

    <h2 style="margin-top:10px">{% trans "Recent posts" %}</h2>
    <ul>
      {% for p in recent_posts %}
        <li>
          {% if p.url %}<a href="{{ p.url }}">{% endif %}
            {{ p.title }}
          {% if p.url %}</a>{% endif %}
          — <small>{{ p.published_at }}</small>
        </li>
      {% empty %}
        <li>{% trans "No posts" %}</li>
      {% endfor %}
    </ul>

    <h2>{% trans "Recent comments" %}</h2>
    <ul>
      {% for c in recent_comments %}
        <li>
          <strong>{{ c.name }}</strong> — {{ c.content }} <em>({{ c.post_title }})</em>
        </li>
      {% empty %}
        <li>{% trans "No comments" %}</li>
      {% endfor %}
    </ul>

    <h2>{% trans "Recent admin actions" %}</h2>
    <ul>
      {% for l in log_entries %}
        <li>{{ l.action_time }} — {{ l.user }} — {{ l.object_repr }} — {{ l.change_message|safe }}</li>
      {% empty %}
        <li>{% trans "No admin log entries" %}</li>
      {% endfor %}
    </ul>

    {% if app_list %}
      <h2>{% trans "Applications" %}</h2>
      <div>
        {% for app in app_list %}
          <h3>{{ app.name }}</h3>
          <ul>
            {% for model in app.models %}
              <li><a href="{{ model.admin_url }}">{{ model.name }}</a></li>
            {% endfor %}
          </ul>
        {% endfor %}
      </div>
    {% endif %}
  </div>
{% endblock %}
