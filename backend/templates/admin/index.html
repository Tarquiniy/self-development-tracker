{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block content %}
  <div class="pt-dashboard">
    <div class="pt-cards">
      <div class="pt-card">
        <div class="pt-card-title">–ü–æ—Å—Ç—ã</div>
        <div class="pt-card-value">{{ app_list|length }}</div>
        <div class="pt-card-sub">–ë–ª–æ–≥ / –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ / –¢–µ–≥–∏</div>
      </div>

      <div class="pt-card">
        <div class="pt-card-title">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</div>
        <div class="pt-card-value">
          {% if recent_actions %}
            {{ recent_actions|length }}
          {% else %}
            0
          {% endif %}
        </div>
        <div class="pt-card-sub">–î–µ–π—Å—Ç–≤–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤</div>
      </div>

      <div class="pt-card">
        <div class="pt-card-title">–ß–µ—Ä–Ω–æ–≤–∏–∫–∏</div>
        <div class="pt-card-value">
          {% with drafts=app_list|default_if_none:None %}
            {% comment %} –≠—Ç–æ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–æ: –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–¥—Å–∫–∞–∑–∫—É {% endcomment %}
            ‚Äî
          {% endwith %}
        </div>
        <div class="pt-card-sub">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</div>
      </div>
    </div>

    <div class="pt-main">
      <section class="pt-section">
        <h2>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
        <div class="pt-quick-actions">
          <a href="{% url 'admin:blog_post_add' %}" class="pt-action">
            <div class="pt-action-icon">‚úèÔ∏è</div>
            <div class="pt-action-text">–ù–æ–≤—ã–π –ø–æ—Å—Ç</div>
          </a>
          <a href="{% url 'admin:blog_post_changelist' %}" class="pt-action">
            <div class="pt-action-icon">üìã</div>
            <div class="pt-action-text">–£–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Å—Ç–∞–º–∏</div>
          </a>
          <a href="{% url 'admin:blog_category_changelist' %}" class="pt-action">
            <div class="pt-action-icon">üè∑Ô∏è</div>
            <div class="pt-action-text">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
          </a>
          <a href="{% url 'admin:auth_user_changelist' %}" class="pt-action">
            <div class="pt-action-icon">üë•</div>
            <div class="pt-action-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
          </a>
        </div>
      </section>

      <section class="pt-section">
        <h2>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h2>
        <div class="pt-table-wrap">
          <table class="pt-table">
            <thead>
              <tr>
                <th>–ó–∞–≥–æ–ª–æ–≤–æ–∫</th>
                <th>–ê–≤—Ç–æ—Ä</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–î–∞—Ç–∞</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody>
              {% for post in recent_posts %}
                <tr>
                  <td class="title-col">{{ post.title|default:"(–±–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è)" }}</td>
                  <td>{{ post.author }}</td>
                  <td><span class="badge badge-{{ post.status }}">{{ post.get_status_display }}</span></td>
                  <td>{{ post.published_at|date:"Y-m-d H:i" }}</td>
                  <td>
                    <a class="link" href="{% url 'admin:blog_post_change' post.pk %}">–†–µ–¥.</a>
                    {% if post.get_absolute_url %}
                      <a target="_blank" class="link" href="{{ post.get_absolute_url }}">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
                    {% endif %}
                  </td>
                </tr>
              {% empty %}
                <tr><td colspan="5" class="muted">–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</td></tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </section>
    </div>
  </div>
{% endblock %}
